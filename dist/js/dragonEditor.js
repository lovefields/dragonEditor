/*!
 * dragonEditor 1.1.2
 * DragonEditor is Javascript WYSIWYG editor.
 * Author : Lovefield
 * License : MPL 2.0
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dragonEditor=e():t.dragonEditor=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";n.r(e),n.d(e,"typeCheckThrow",(function(){return i})),n.d(e,"typeCheckBoolean",(function(){return a})),n.d(e,"eventBinding",(function(){return d})),n.d(e,"removeEvent",(function(){return s})),n.d(e,"classControl",(function(){return c})),n.d(e,"hasClass",(function(){return l})),n.d(e,"fetchURL",(function(){return r})),n.d(e,"upperFirstChar",(function(){return u})),n.d(e,"isMobile",(function(){return f})),n.d(e,"hasValueArrToArr",(function(){return p}));const{message:o}=n(4);function i(t,e){if("*"!==e){if("string"!=typeof e)throw"DRAGON EDITOR - type augment is must be String : "+e;{let n,o=typeof t,i=e.split(",");if(n="object"!==o?o:void 0!==t.addEventListener?"node":t instanceof Event?"event":t.constructor.name.toLowerCase(),-1==i.indexOf(n))throw`DRAGON EDITOR - invalid type ${t} : ${i.join(",")}`}}return t}function a(t,e){let n=!0;if("*"!==e)if("string"==typeof e){let o,i=typeof t,a=e.split(",");o="object"!==i?i:void 0!==t.addEventListener?"node":t instanceof Event?"event":t.constructor.name.toLowerCase(),-1==a.indexOf(o)&&(n=!1)}else n=!1;return n}function d(t,e,n,o=!1,a=i(t,"*"),d=i(e,"string"),s=i(n,"function"),c=i(o,"boolean")){let l=e.split(",");null!=t.forEach?t.forEach(t=>{l.forEach(e=>{t.addEventListener(e,n,!0)})}):null!=t.addEventListener&&l.forEach(e=>{t.addEventListener(e,n,!0)})}function s(t,e,n,o=i(t,"object"),a=i(e,"string"),d=i(n,"function")){let s=e.split(",");null!=t.forEach?t.forEach(t=>{s.forEach(e=>{t.removeEventListener(e,n,!0)})}):s.forEach(e=>{t.removeEventListener(e,n,!0)})}function c(t,e,n,o=i(t,"*"),a=i(e,"string"),d=i(n,"string")){null!=t.forEach?t.forEach(t=>{"add"==e?t.classList.add(n):"remove"==e?t.classList.remove(n):"toggle"==e&&t.classList.toggle(n)}):null!=t.addEventListener&&("add"==e?t.classList.add(n):"remove"==e?t.classList.remove(n):"toggle"==e&&t.classList.toggle(n))}function l(t,e,n=i(t,"node"),o=i(e,"string")){let a=!1;return e.split(".").some(e=>{if(""!==e)return a=!!t.classList.contains(e),0==a}),a}function r(t,e={},n="form",a=i(t,"string"),d=i(e,"object"),s=i(n,"string")){let c=new FormData,l=Object.entries(condition.csrfHeader);if("json"==n){for(let t in e.body)c.append(t,e.body[t]);e.body=c}return l.length>0&&(e.headers=new Headers(condition.csrfHeader)),fetch(t,e).then(t=>{if(0==t.ok)throw new Error(o.serverNotWorking);return t.json()}).catch(t=>({respon:!1,error:t}))}function u(t,e=i(t,"string")){return t.charAt(0).toUpperCase()+t.slice(1)}function f(){return condition.windowWidth<condition.changePoint}function p(t,e,n=i(t,"array"),o=i(e,"array")){let a=!1;return e.forEach(e=>{t.indexOf(e)>-1&&(a=!0)}),a}},function(t,e,n){"use strict";n.r(e),n.d(e,"getElement",(function(){return i})),n.d(e,"getChild",(function(){return a})),n.d(e,"checkElement",(function(){return d})),n.d(e,"findParentByClass",(function(){return s})),n.d(e,"getActiveElement",(function(){return c})),n.d(e,"findContenteditable",(function(){return l}));const{typeCheckThrow:o}=n(0);function i(t,e=!0,n=o(t,"string"),i=o(e,"boolean")){return 1==e?document.querySelectorAll(t):document.querySelector(t)}function a(t,e,n=!0,i=o(t,"node"),a=o(e,"string"),d=o(n,"boolean")){return 1==n?t.querySelectorAll(e):t.querySelector(e)}function d(t="",e,n=!0,a=o(t,"string"),d=o(e,"string"),s=o(n,"boolean")){return i(0==(""!=t&&function(t,e=o(t,"string")){return null!==document.querySelector(t)}(t))?e:t,n)}function s(t,e,n=o(t,"node"),i=o(e,"string")){if("HTMLBodyElement"!==t.constructor.name&&"HTMLHtmlElement"!==t.constructor.name){return"Text"==t.constructor.name&&(t=t.parentNode),!0===t.classList.contains(e)?t:null==t.parentElement?null:s(t.parentElement,e)}return null}function c(){let t=condition.areaContent.childElementCount,e=i(".djs-content > *");return null==condition.activeItem?e[t-1]:1==condition.activeItem.classList.contains("djs-item")?condition.activeItem:e[t-1]}function l(t,e=o(t,"*")){let n,i=t.constructor.name;if("HTMLBodyElement"!==i){return n="Text"===i?t.parentElement:t,"true"==n.getAttribute("contenteditable")?n:l(n.parentElement)}return null}},function(t,e,n){"use strict";n.r(e),n.d(e,"makeView",(function(){return u})),n.d(e,"setEmoticonLayout",(function(){return f})),n.d(e,"setEmoticonList",(function(){return p})),n.d(e,"scrollButtonHTML",(function(){return b})),n.d(e,"getDefaultBlockHTML",(function(){return g})),n.d(e,"getTextBlockHTML",(function(){return h})),n.d(e,"getImageBlockHTML",(function(){return m})),n.d(e,"getEmoticonBlockHTML",(function(){return v})),n.d(e,"getListChildHTML",(function(){return x})),n.d(e,"getYoutubeBlock",(function(){return y})),n.d(e,"getCodepenBlock",(function(){return k})),n.d(e,"getLinkboxBlock",(function(){return j})),n.d(e,"setMediaList",(function(){return w})),n.d(e,"addBlockToContent",(function(){return $})),n.d(e,"getContentData",(function(){return T}));const{typeCheckThrow:o,upperFirstChar:i,classControl:a}=n(0),{getElement:d,getActiveElement:s,getChild:c}=n(1),{setCursor:l}=n(3),{htmlToJson:r}=n(7);function u(){let t=`<div class="editor-content djs-content"><p class="editor-item djs-item" contenteditable="true" data-type="text"></p></div><div class="editor-menu-block">${function(t){let e=Object.entries(t),n=`<div class="editor-scroll-col editor-clearfix" data-count="${e.length}">`;for(const[t,o]of e)"block"===o.type?n+=`<button type="button" class="editor-btn djs-add-block" title="${o.text}" data-value="${t}" data-type="${o.type}"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="${o.icon}" href="${o.icon}"></use></svg>${o.text}</button>`:"pop"===o.type?n+=`<button type="button" class="editor-btn djs-add-block djs-btn-ignore" title="${o.text}" data-value="${t}" data-type="${o.type}"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="${o.icon}" href="${o.icon}"></use></svg>${o.text}</button>`:"file"===o.type?n+=`<button type="button" class="editor-btn djs-add-block" title="${o.text}" data-value="${t}" data-type="${o.type}"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="${o.icon}" href="${o.icon}"></use></svg>${o.text}</button>`:n+=`<button type="button" class="editor-btn djs-add-block" title="${o.text}" data-value="${t}" data-type="custom"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="${o.icon}" href="${o.icon}"></use></svg>${o.text}</button>`;return n+="</div>",n}(condition.defaultMenu)}</div><div class="editor-menu-bottom">${function(){let t="";""!==condition.mediaURL&&(t+='<button type="button" class="editor-btn djs-toggle-target djs-btn-ignore" data-target=".editor-pop-folder"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-folder" href="#icon-folder"></use></svg>Media</button>');1==condition.multiLang&&(t+='<button type="button" class="editor-btn djs-toggle-target djs-btn-ignore" data-target=".editor-pop-lang"><svg viewbox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-lang" href="#icon-lang"></use></svg>Change language</button>');return t+='<button type="button" class="editor-btn editor-switch-device djs-switch-device"><svg class="editor-icon" viewbox="0 0 64 64"><use class="path editor-pc" xlink:href="#icon-pc" href="#icon-pc"></use><use class="path editor-mobile" xlink:href="#icon_mobile" href="#icon-mobile"></use></svg>Change view</button>',t}()}`;1==condition.multiLang&&(t+=function(){let t=`<div class="editor-pop-lang djs-trigger" data-length="${condition.langCategory.length}">`;return condition.langCategory.forEach(e=>{e==condition.lang?t+=`<button type="button" class="editor-btn-lang djs-change-lang --act" data-value="${e}">${e.toUpperCase()}</button>`:t+=`<button type="button" class="editor-btn-lang djs-change-lang" data-value="${e}">${e.toUpperCase()}</button>`}),t+="</div>",t}()),""!==condition.mediaURL&&(t+='\n        <div class="editor-list-pop editor-pop-folder editor-scroll djs-folder-pop djs-trigger djs-scroll">\n            <div class="editor-scroll-content djs-scroll-content">\n                <ul class="editor-list-media djs-list-media editor-clearfix"></ul>\n            </div>\n            <button type="button" class="editor-add-media djs-add-media">Add Media</button>\n        </div>\n    ',document.body.insertAdjacentHTML("beforeend",function(){let t='<form enctype="multipart/form-data" method="post" class="editor-uploader djs-uploader">';""!=condition.csrfData.value&&(t+=`<input type="hidden" name="${condition.csrfData.name}" value="${condition.csrfData.value}">`);1==condition.multiUpload?t+='<input type="file" name="file" multiple class="djs-file">':t+='<input type="file" name="file" class="djs-file">';return t+="</form>",t}())),t+="</div>",t+='\n        <div class="editor-pop-linkbox djs-linkbox-pop editor-clearfix djs-trigger" data-type="new">\n            <input type="url" class="editor-input djs-input --new" placeholder="https://dico.me">\n            <a href="" class="editor-link --del djs-link"></a>\n            <button type="button" class="editor-btn djs-btn" data-value="">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path --del" xlink:href="#icon-delete-link" href="#icon-delete-link"></use><use class="path --new" xlink:href="#icon-btn-accept" href="#icon-btn-accept"></use></svg>\n            </button>\n        </div>\n    ',t+=function(){let t="--act";"container"==condition.layout&&(t="");let e='\n    <div class="editor-pop-option djs-option-pop">\n        <div class="editor-scroll-wrap">\n            <div class="editor-clearfix djs-scroll-depth">';e+=`\n            <div class="editor-col --act" data-group="text,li,table,codeblock,word">\n                <button type="button" class="editor-select djs-fontsize djs-toggle-target djs-btn-ignore" data-target=".editor-list-fontsize">\n                    <span class="editor-text djs-text">${condition.defaultFontSize}</span>\n\n                    <svg class="editor-icon" viewbox="0 0 64 64"><use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use></svg>\n                </button>\n\n                <div class="editor-list-fontsize editor-scroll djs-scroll djs-trigger">\n                    <div class="editor-scroll-content djs-scroll-content">\n    `,condition.frontSize.forEach(t=>{let n=Math.floor(condition.defaultFontSize*t);e+=`<button type="button" class="editor-btn djs-change-fontsize" data-value="${t}">${n}</button>`}),e+="\n                    </div>\n                </div>\n            </div>\n    ",e+='\n        <div class="editor-col --act" data-group="text,li,table,word">\n            <button type="button" class="editor-color djs-color djs-toggle-target djs-btn-ignore" data-target=".editor-list-color" data-value="#333"></button>\n            <div class="editor-list-color djs-trigger">\n    ',condition.colorList.forEach(t=>{e+=`<button type="button" class="editor-btn djs-change-color" data-value="${t}">${t}</button>`}),e+="\n            </div>\n        </div>\n    ",e+='\n        <div class="editor-col editor-btn-area --act" data-group="text,li,table,image,sticker">\n            <button type="button" class="editor-btn djs-change-align" data-value="left">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-align-left" href="#icon-align-left"></use></svg>align left\n            </button>\n\n            <button type="button" class="editor-btn djs-change-align" data-value="center">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-align-center" href="#icon-align-center"></use></svg>\n\n                align center\n            </button>\n\n            <button type="button" class="editor-btn djs-change-align" data-value="right">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-align-right" href="#icon-align-right"></use></svg>align right\n            </button>\n        </div>\n\n        <div class="editor-col editor-btn-area --act" data-group="text,li,table,word,link">\n            <button type="button" class="editor-btn djs-toggle-bold">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-bold" href="#icon-bold"></use></svg>bold\n            </button>\n\n            <button type="button" class="editor-btn djs-toggle-italic">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-italic" href="#icon-italic"></use></svg>italic\n            </button>\n\n            <button type="button" class="editor-btn djs-toggle-underline">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-underline" href="#icon-underline"></use></svg>underline\n            </button>\n\n            <button type="button" class="editor-btn djs-toggle-strikethrough">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-strikethrough" href="#icon-strikethrough"></use></svg>strikethrough\n            </button>\n        </div>\n\n        ',e+='\n            <div class="editor-col --act" data-group="td,th">\n                <button type="button" class="editor-select djs-colsize djs-toggle-target djs-btn-ignore" data-target=".editor-list-colsize">\n                    <span class="editor-text djs-text">100px</span>\n                    <svg class="editor-icon" viewbox="0 0 64 64"><use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use></svg>\n                </button>\n\n                <div class="editor-list-colsize editor-scroll djs-scroll djs-trigger">\n                    <div class="editor-scroll-content djs-scroll-content">\n    ';for(let t=1;t<15;t+=1){let n=Math.floor(50*t);e+=`<button type="button" class="editor-btn djs-change-colsize" data-value="${n}">${n}px</button>`}return e+="\n                    </div>\n                </div>\n            </div>\n    ",e+=`<div class="editor-col editor-btn-area ${t}" data-group="td,th">\n            <button type="button" class="editor-btn djs-cell-control" data-type="row" data-action="add">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-add-row" href="#icon-add-row"></use></svg>add row\n            </button>\n\n            <button type="button" class="editor-btn djs-cell-control" data-type="row" data-action="delete">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-del-row" href="#icon-del-row"></use></svg>del row\n            </button>\n\n            <button type="button" class="editor-btn djs-cell-control" data-type="col" data-action="add">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-add-col" href="#icon-add-col"></use></svg>add col\n            </button>\n\n            <button type="button" class="editor-btn djs-cell-control" data-type="col" data-action="delete">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-del-col" href="#icon-del-col"></use></svg>del col\n            </button>\n        </div>\n\n        <div class="editor-col editor-btn-area ${t}" data-group="td">\n            <button type="button" class="editor-btn djs-table-header">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-table-header" href="#icon-table-header"></use></svg>change to table header\n            </button>\n        </div>\n\n        <div class="editor-col editor-btn-area ${t}" data-group="th">\n            <button type="button" class="editor-btn djs-table-body">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-table-body" href="#icon-table-body"></use></svg>change to table body\n            </button>\n        </div>\n\n        <div class="editor-col editor-btn-area ${t}" data-group="word,link">\n            <button type="button" class="editor-btn djs-open-linkbox">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-link" href="#icon-link"></use></svg>open linkbox pop\n            </button>\n        </div>\n\n        <div class="editor-col editor-btn-area ${t}" data-group="codeblock">\n            <button type="button" class="editor-btn djs-code-theme djs-toggle-target djs-btn-ignore" data-target=".editor-list-theme">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-theme" href="#icon-theme"></use></svg>open theme pop\n            </button>\n\n            <div class="editor-list-select editor-list-theme djs-trigger">\n    `,condition.codeTheme.forEach(t=>{e+=`<button type="button" class="editor-btn djs-set-theme" data-value="${t}">${i(t)}</button>`}),e+="\n            </div>\n        </div>\n    ",e+=`\n        <div class="editor-col ${t}" data-group="codeblock">\n            <button type="button" class="editor-select djs-code-lang djs-toggle-target djs-btn-ignore" data-target=".editor-list-lang">\n                <span class="editor-text djs-text">Text</span>\n                <svg class="editor-icon" viewbox="0 0 64 64"><use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use></svg>\n            </button>\n\n            <div class="editor-list-select editor-list-lang djs-trigger">\n    `,condition.codeLang.forEach(t=>{e+=`<button type="button" class="editor-btn djs-set-lang" data-value="${t}">${i(t)}</button>`}),e+="\n            </div>\n        </div>\n    ",e+=`\n        <div class="editor-col ${t}" data-group="ol">\n            <button type="button" class="editor-select djs-list-style djs-toggle-target djs-btn-ignore" data-target=".editor-list-type">\n                <span class="editor-text djs-text">Numbered - 1</span>\n                <svg class="editor-icon" viewbox="0 0 64 64"><use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use></svg>\n            </button>\n\n            <div class="editor-list-select editor-list-type djs-trigger">\n                <button type="button" class="editor-btn djs-set-list-type" data-value="number">Numbered - 1</button>\n                <button type="button" class="editor-btn djs-set-list-type" data-value="upper-roman">Upper-roman - I</button>\n                <button type="button" class="editor-btn djs-set-list-type" data-value="lower-roman">Lower-roman - i</button>\n                <button type="button" class="editor-btn djs-set-list-type" data-value="upper-alpha">Upper-alpha - A</button>\n                <button type="button" class="editor-btn djs-set-list-type" data-value="lower-alpha">Lower-alpha - a</button>\n            </div>\n        </div>\n    `,e+=`\n        <div class="editor-col editor-btn-area ${t}" data-group="all">\n            <button type="button" class="editor-btn djs-move-up">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-arrow-up" href="#icon-arrow-up"></use></svg>move up block\n            </button>\n        </div>\n    `,e+=`\n        <div class="editor-col editor-btn-area ${t}" data-group="all">\n            <button type="button" class="editor-btn djs-move-down">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-arrow-down" href="#icon-arrow-down"></use></svg>move down block\n            </button>\n        </div>\n    `,e+=`\n        <div class="editor-col editor-btn-area ${t}" data-group="word,wordblock">\n            <button type="button" class="editor-btn djs-word-block">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-word-block" href="#icon-word-block"></use></svg>make word block\n            </button>\n        </div>\n    `,e+=`\n        <div class="editor-col editor-btn-area --noline ${t}" data-group="all">\n            <button type="button" class="editor-btn djs-delete-block">\n                <svg viewBox="0 0 64 64" class="editor-icon"><use class="path --red" xlink:href="#icon-delete-block" href="#icon-delete-block"></use></svg>delete block\n            </button>\n        </div>\n    </div>\n</div>\n</div>`,e}(),1==condition.useEmoticon&&(t+='\n        <div class="editor-list-pop editor-pop-emoticon djs-emoticon-pop djs-trigger">\n            <div class="editor-btn-area djs-btn-area">\n            </div>\n\n            <div class="editor-scroll djs-scroll">\n                <div class="editor-scroll-content djs-scroll-content">\n                    <div class="editor-list-emoticon djs-list-emoticon editor-clearfix"></div>\n                </div>\n            </div>\n        </div>\n    '),condition.wrap.insertAdjacentHTML("beforeend",t)}function f(){let t="";for(let[e,n]of Object.entries(condition.emoticonData))t+=`<button class="editor-emoticon-tap djs-emoticon-tap" data-key="${e}">${n.icon}</button>`;condition.btnEmoticonTapArea.insertAdjacentHTML("beforeend",t)}function p(t,e){let n="";e.forEach((e,o)=>{"image"==e.type?n+=`<button type="button" class="editor-emoticon djs-add-emoticon" data-key="${t}" data-idx="${o}"><img src="${e.src}" alt="${e.caption}" class="img"></button>`:"svg"==e.type&&(n+=`<button type="button" class="editor-emoticon djs-add-emoticon" data-key="${t}" data-idx="${o}">${e.code}</button>`)}),condition.listEmoticon.innerHTML=n}function b(){return'<button type="button" class="scroll-bar djs-scroll-bar" style="transform:translateY(0)"></button>'}function g(t,e=o(t,"string")){let n;switch(t){case"textBlock":n=h();break;case"ulBlock":n=function(t=[""],e=o(t,"array")){let n='<ul class="editor-item djs-item --djs-selected" data-type="ul">';return t.forEach(t=>{n+=`<li contenteditable="true">${t}</li>`}),n+="</ul>",n}();break;case"olBlock":n=function(t=[""],e=o(t,"array")){let n='<ol class="editor-item djs-item --djs-selected" data-style="number" data-type="ol">';return t.forEach(t=>{n+=`<li contenteditable="true">${t}</li>`}),n+="</ol>",n}();break;case"quotaionBlock":n='<blockquote class="editor-item djs-item --djs-selected" data-type="quote" data-style="default"><p class="editor-text djs-text" contenteditable="true"></p><p class="editor-author djs-author" contenteditable="true"></p></blockquote>';break;case"tableBlock":n='\n        <div class="editor-item djs-item --djs-selected" data-type="table">\n            <div class="editor-scroll">\n                <table class="editor-table">\n                    <caption class="djs-caption" contenteditable="true"></caption>\n                    <colgroup>\n                        <col data-size="100">\n                        <col data-size="100">\n                        <col data-size="100">\n                        <col data-size="100">\n                    </colgroup>\n                    <tbody>\n                        <tr>\n                            <th contenteditable="true" data-x="0" data-y="0"></th>\n                            <th contenteditable="true" data-x="1" data-y="0"></th>\n                            <th contenteditable="true" data-x="2" data-y="0"></th>\n                            <th contenteditable="true" data-x="3" data-y="0"></th>\n                        </tr>\n                        <tr>\n                            <td contenteditable="true" data-x="0" data-y="1"></td>\n                            <td contenteditable="true" data-x="1" data-y="1"></td>\n                            <td contenteditable="true" data-x="2" data-y="1"></td>\n                            <td contenteditable="true" data-x="3" data-y="1"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    ';break;case"codeBlock":n='<pre class="editor-item djs-item --djs-selected" data-type="codeblock" data-theme="default" data-lang="text"><code class="nohighlight editor-code djs-code" contenteditable="true"></code></pre>';break;default:n=""}return n}function h(t="",e=o(t,"string")){return`<p class="editor-item djs-item --djs-selected" contenteditable="true" data-type="text">${t}</p>`}function m(t,e=700,n=o(t,"object"),i=o(e,"number")){let a=`<div class="editor-item djs-item --djs-selected" data-type="image" data-webp="${t.hasWebp}"><div class="editor-size djs-size" data-width="${e}">`;return 1==condition.useWebp?(a+="<picture>",1==t.hasWebp&&(a+=`<source srcset="${t.src}.webp" type="image/webp">`),a+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" alt="${t.alt}" data-height="${t.height}" class="editor-img djs-img" draggable="false">`,a+="</picture>"):a+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" alt="${t.alt}" data-height="${t.height}" class="editor-img djs-img" draggable="false">`,a+='<button type="button" class="editor-btn-resize --left djs-resize" data-value="width" data-position="left">resize</button>',a+='<button type="button" class="editor-btn-resize --right djs-resize" data-value="width" data-position="right">resize</button>',a+=`</div><p class="editor-caption djs-caption" contenteditable="true" data-type="caption">${t.alt}</p></div>`,a}function v(t,e,n=o(t,"string"),i=o(e,"number")){let a=condition.emoticonData[t].list[e],d='<div class="editor-item djs-item --djs-selected" data-type="emoticon">';return"image"==a.type?d+=`<img src="${a.src}" alt="${a.caption}" data-width="${a.width}" data-height="${a.height}">`:"svg"==a.type&&(d+=a.code),d+="</div>",d}function x(t="",e=o(t,"string")){return`<li contenteditable="true">${t}</li>`}function y(t,e=o(t,"string")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="youtube" data-code="${t}">\n            <iframe src="https://www.youtube.com/embed/${t}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="editor-iframe djs-iframe"></iframe>\n            <button type="button" class="editor-edit">edit</button>\n        </div>\n    `}function k(t,e,n=300,i=o(t,"string"),a=o(e,"string"),d=o(n,"number")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="codepen">\n            <iframe height="${n}" title="" src="https://codepen.io/${t}/embed/${e}?height=${n}&theme-id=${condition.codepenTheme}&default-tab=result" allowfullscreen class="editor-iframe djs-iframe" data-code="${e}" data-nickname="${t}"></iframe>\n            <button type="button" class="editor-btn-resize djs-resize" data-value="height">Resize height</button>\n            <button type="button" class="editor-edit">edit</button>\n        </div>\n    `}function j(t,e=o(t,"object")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="linkbox">\n            <a href="${t.url}" target="_blank" rel="nofollow" class="editor-linkbox editor-clearfix djs-linkbox" draggable="false">\n                <div class="editor-linkbox-img">\n                    <img src="${t.img}" alt="preview image" class="editor-img djs-img" draggable="false">\n                </div>\n\n                <div class="editor-linkbox-text">\n                    <p class="editor-title djs-title">${t.title}</p>\n                    <p class="editor-description djs-description">${t.description}</p>\n                    <p class="editor-domain djs-domain">${t.domain}</p>\n                </div>\n            </a>\n        </div>\n    `}function w(t){let e="";t.forEach(t=>{"image"==t.type&&(e+=`\n                <li class="editor-media djs-media" data-type="image" data-idx="${t.fileIdx}">\n                    <div class="eidtor-img-area djs-add-media" data-src="${t.src}" data-alt="${t.alt}" data-default-format="${t.defaultFormat}" data-webp="${t.hasWebp}" data-width="${t.width}" data-height="${t.height}">\n                        <img src="${t.src}.${t.defaultFormat}" class="editor-img">\n                    </div>\n\n                    <p class="editor-name djs-name">${t.alt}</p>\n                    <button type="button" class="editor-btn-del djs-del-media" data-idx="${t.fileIdx}"><svg viewBox="0 0 64 64" class="editor-icon"><use class="path" xlink:href="#icon-delete-block" href="#icon-delete-block"></use></svg>delete media</button>\n                </li>\n            `)}),condition.listMedia.insertAdjacentHTML("beforeend",e)}function $(t,e=o(t,"string")){let n,i=s(),r=d(".--djs-selected");if(i.insertAdjacentHTML("afterend",t),n=i.nextElementSibling,"true"==n.contentEditable)condition.activeElement=n,l(n,0);else{let t=c(n,"*[contenteditable]",!1);null!=t&&(condition.activeElement=t,l(t,0))}r.length>0&&a(r,"remove","--djs-selected"),condition.activeItem=n}function T(){let t=c(condition.areaContent,".djs-item");return r(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"setCursor",(function(){return a})),n.d(e,"isTextSelect",(function(){return d}));const{typeCheckThrow:o}=n(0),{setSelection:i}=n(6);function a(t,e,n=o(t,"node"),a=o(e,"number")){let d=window.getSelection(),s=document.createRange();s.setStart(t,e),s.collapse(!0),d.removeAllRanges(),d.addRange(s),i()}function d(){return condition.focusNode!=condition.baseNode||condition.focusOffset!=condition.baseOffset}},function(t,e,n){"use strict";n.r(e),n.d(e,"message",(function(){return o}));const o={wrongValue:t=>`DRAGON EDITOR - Wrong type value in "${t}".`,wrongURL:(t,e)=>`DRAGON EDITOR - Wrong URL value { ${t} : "${e}" }`,wrongKey:(t,e)=>`DRAGON EDITOR - Wrong key set "${t}" : { "${e}" : ... }`,apiNotWorking:"API server is not responding.",serverNotWorking:"Server is not responding.",wrongItemStructure:"This block structure is broken, But we fixed it. Try again please.",missingSelect:"Missing block. Please select block.",noContentData:t=>`Language "${t}" is didn't have content. Did you want duplicate to content?`}},function(t,e,n){"use strict";n.r(e),n.d(e,"openPop",(function(){return b})),n.d(e,"openLinkPop",(function(){return g})),n.d(e,"closeOptionPop",(function(){return m})),n.d(e,"openOptionPop",(function(){return v})),n.d(e,"setOptionPopValue",(function(){return x}));const{typeCheckThrow:o,classControl:i,isMobile:a,hasValueArrToArr:d}=n(0),{getElement:s,getChild:c,findParentByClass:l,findContenteditable:r}=n(1),{getItemType:u,itemStructureValidation:f}=n(9),{getTextNodeStyle:p}=n(8);function b(t,e,n=o(t,"string"),d=o(e,"node")){let s=e.getBoundingClientRect();switch(t){case"linkboxBlock":g("linkbox",s);break;case"emoticonBlock":!function(t,e=o(t,"domrect,object")){let n=condition.popEmoticon.getBoundingClientRect(),d=condition.windowWidth-t.right+(t.width+10),s=t.top;if(1==a()){let e=condition.windowWidth-n.width;s=t.top+t.height,d>e&&(d=e)}condition.popEmoticon.style.top=s+"px",condition.popEmoticon.style.right=d+"px",h(condition.popEmoticon),i(condition.popEmoticon,"toggle","--act")}(s);break;case"youtubeBlock":g("youtube",s);break;case"codepenBlock":g("codepen",s)}}function g(t,e={},n=o(t,"string"),d=o(e,"domrect,object")){let s=condition.popLinkbox.getBoundingClientRect(),l=c(condition.popLinkbox,".djs-input",!1),r=c(condition.popLinkbox,".djs-btn",!1),u=c(condition.popLinkbox,".djs-link",!1),f=condition.windowWidth-e.right+(e.width+10),p=e.top;if(1==a()){let t=condition.windowWidth-s.width;p=e.top+e.height,f>t&&(f=t)}if("word"==t){let e=condition.baseNode.parentNode;u.textContent=e.href,u.href=e.href,u.target="_blank",r.dataset.value=t,condition.popLinkbox.dataset.type="del",r.dataset.type=t,i(condition.popLinkbox,"add","--act")}else r.dataset.value=t,l.value="",condition.popLinkbox.style.top=p+"px",condition.popLinkbox.style.right=f+"px",h(condition.popLinkbox),i(condition.popLinkbox,"add","--act"),setTimeout(()=>{l.focus()},250)}function h(t,e=o(t,"node")){let n=s(".djs-trigger.--act");n.length>0&&n.forEach(e=>{e!==t&&i(e,"remove","--act")})}function m(t,e=o(t,"node")){let n=null!==l(t,"djs-option-pop"),a=null!==l(t,"djs-item"),d=l(t,"djs-add-block"),s=!1;if(null!=d){"block"==d.dataset.type&&(s=!0)}0==n&&0==a&&0==s&&i(condition.popOption,"remove","--act")}function v(){let t=null==condition.activeElement?condition.activeItem:condition.activeElement;t="HTMLTableCellElement"==t.constructor.name||"CODE"==t.tagName?condition.activeItem:t;let e=t.getBoundingClientRect(),n=u(condition.activeItem,condition.activeElement),o=c(condition.popOption,".editor-col"),s=condition.popOption.getBoundingClientRect();if(!0!==a()&&"container"!=condition.layout&&(condition.popOption.style.top=e.top-s.height-10+"px",condition.popOption.style.left=e.left+"px"),o.forEach(t=>{let e=t.dataset.group.split(",");1==d(e,n)?i(t,"add","--act"):i(t,"remove","--act")}),x(),i(condition.popOption,"add","--act"),1==a()){let t=c(condition.popOption,".djs-scroll-depth",!1),e=c(condition.popOption,".--act"),n=0;e.forEach(t=>{let e=t.getBoundingClientRect();n+=e.width}),t.style.width=Math.ceil(n)+"px"}f()}function x(){let t=l(condition.baseNode,"djs-item");if(null!=t){let e=t.dataset.type,n=r(condition.baseNode),o=p(condition.baseNode),a=s(".djs-fontsize .djs-text",!1),d=s(".djs-color",!1),l=s(".djs-list-style .djs-text",!1),u=s(".djs-code-lang .djs-text",!1),f=s(".djs-colsize .djs-text",!1);null==n&&(n=t);let b=p(n);if(""!=o.fontsize?a.textContent=Math.floor(o.fontsize*condition.defaultFontSize):a.textContent=condition.defaultFontSize,""!=o.color?d.dataset.value=o.color:d.dataset.value=condition.defaultColor,""!=b.align?condition.btnAlign.forEach(t=>{t.dataset.value==b.align?i(t,"add","--act"):i(t,"remove","--act")}):i(condition.btnAlign,"remove","--act"),""!=o.bold?i(condition.btnToggleBold,"add","--act"):i(condition.btnToggleBold,"remove","--act"),""!=o.italic?i(condition.btnToggleItalic,"add","--act"):i(condition.btnToggleItalic,"remove","--act"),""!=o.underline?i(condition.btnToggleUnderline,"add","--act"):i(condition.btnToggleUnderline,"remove","--act"),""!=o.strikethrough?i(condition.btnToggleStrikethrough,"add","--act"):i(condition.btnToggleStrikethrough,"remove","--act"),"ol"==e){let e;condition.btnListType.forEach(n=>{n.dataset.value==t.dataset.style&&(e=n.textContent)}),l.textContent=e}if("codeblock"==e){let e=t.dataset.lang;u.textContent=e}if("table"==e&&"CAPTION"!==n.tagName){let e=parseInt(n.dataset.x);if(0==isNaN(e)){let n=c(t,"col")[e];f.textContent=n.dataset.size+"px"}}""!=o.wordblock?i(condition.btnWordBlock,"add","--act"):i(condition.btnWordBlock,"remove","--act")}}},function(t,e,n){"use strict";function o(){let t=window.getSelection();condition.focusNode=t.focusNode,condition.focusOffset=t.focusOffset,condition.baseNode=null==t.baseNode?t.anchorNode:t.baseNode,condition.baseOffset=null==t.baseOffset?t.anchorOffset:t.baseOffset}function i(){let t=window.getSelection();return null!=t.baseNode||null!=t.anchorNode}n.r(e),n.d(e,"setSelection",(function(){return o})),n.d(e,"hasBaseNode",(function(){return i}))},function(t,e,n){"use strict";n.r(e),n.d(e,"jsonToHtml",(function(){return d})),n.d(e,"htmlToJson",(function(){return s}));const{typeCheckThrow:o}=n(0),{getTextNodeStyle:i}=n(8),{getChild:a}=n(1);function d(t){let e="",n="";return t.forEach((function(t){switch(t.type){case"text":for(const[e,o]of Object.entries(t.option))""!=o&&(n+=` data-${e}="${o}"`);e+=`<p class="editor-item djs-item" ${n} contenteditable="true" data-type="${t.type}">${t.textContent}</p>`,n="";break;case"image":for(const[e,o]of Object.entries(t.option))""!=o&&(n+=` data-${e}="${o}"`);e+=`<div class="editor-item djs-item" data-type="${t.type}" data-webp="${t.hasWebp}" ${n}>`,e+=`<div class="editor-size djs-size" data-width="${t.itemWidth}">`,n="",1==condition.useWebp?(e+="<picture>",1==t.hasWebp&&(e+=`<source srcset="${t.src}.webp" type="image/webp">`),e+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" data-height="${t.height}" alt="${t.alt}" class="editor-img djs-img" draggable="false"></picture>`):e+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" data-height="${t.height}" alt="${t.alt}" class="editor-img djs-img" draggable="false">`;for(const[e,o]of Object.entries(t.caption.option))""!=o&&(n+=` data-${e}="${o}"`);e+='<button class="editor-btn-resize --left djs-resize" data-value="width" data-position="left">resize</button><button class="editor-btn-resize --right djs-resize" data-value="width" data-position="right">resize</button>',e+="</div>",e+=`<p class="editor-caption djs-caption" contenteditable="true"${n}>${t.caption.textContent}</p>`,e+="</div>",n="";break;case"ul":let o="";t.child.forEach(t=>{for(const[e,o]of Object.entries(t.option))""!=o&&(n+=` data-${e}="${o}"`);o+=`<li contenteditable="true"${n}>${t.textContent}</li>`,n=""}),e+=`<ul class="editor-item djs-item" data-type="${t.type}">${o}</ul>`;break;case"ol":let i="";t.child.forEach(t=>{for(const[e,o]of Object.entries(t.option))""!=o&&(n+=` data-${e}="${o}"`);i+=`<li contenteditable="true"${n}>${t.textContent}</li>`,n=""}),e+=`<ol class="editor-item djs-item" data-style="${t.style}" data-type="${t.type}">${i}</ol>`;break;case"quote":e+=`<blockquote class="editor-item djs-item" data-type="${t.type}" data-style="${t.style}"><p class="editor-text djs-text" contenteditable="true">${t.text}</p><p class="editor-author djs-author" contenteditable="true">${t.author}</p></blockquote>`;break;case"table":let a=0;for(const[e,o]of Object.entries(t.caption.option))""!=o&&(n+=` data-${e}="${o}"`);e+=`\n                    <div class="editor-item djs-item" data-type="${t.type}">\n                        <div class="editor-scroll">\n                            <table class="editor-table">\n                                <caption ${n} class="djs-caption" contenteditable="true">${t.caption.textContent}</caption>\n                                <colgroup>`,n="",t.colgroup.forEach((function(t){e+=`<col data-size="${t}">`})),e+="</colgroup><tbody>",t.body.forEach((function(t){let o=0;e+="<tr>",t.forEach((function(t){for(const[e,o]of Object.entries(t.option))""!=o&&(n+=` data-${e}="${o}"`);e+=`<${t.tag} contenteditable="true" data-x="${o}" data-y="${a}"${n}>${t.textContent}</${t.tag}>`,o+=1,n=""})),e+="</tr>",a+=1})),e+="</tbody></table></div></div>";break;case"linkbox":e+=`\n                    <div class="editor-item djs-item" data-type="${t.type}">\n                        <a href="${t.url}" target="_blank" rel="nofollow" class="editor-linkbox editor-clearfix djs-linkbox" draggable="false">\n                            <div class="editor-linkbox-img">\n                                <img src="${t.imgSrc}" alt="preview image" class="editor-img djs-img" draggable="false">\n                            </div>\n            \n                            <div class="editor-linkbox-text">\n                                <p class="editor-title djs-title">${t.title}</p>\n                                <p class="editor-description djs-description">${t.description}</p>\n                                <p class="editor-domain djs-domain">${t.domain}</p>\n                            </div>\n                        </a>\n                    </div>\n                `;break;case"emoticon":"image"==t.data.type?e+=`<div class="editor-item djs-item" data-type="${t.type}"><img src="${t.data.src}" alt="${t.data.caption}" data-width="${t.data.width}" data-height="${t.data.height}"></div>`:"svg"==t.data.type&&(e+=`<div class="editor-item djs-item" data-type="${t.type}">${t.data.code}</div>`);break;case"youtube":e+=`\n                    <div class="editor-item djs-item" data-type="${t.type}" data-code="${t.code}">\n                        <iframe src="https://www.youtube.com/embed/${t.code}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="editor-iframe djs-iframe"></iframe>\n                        <button class="editor-edit">edit</button>\n                    </div>\n                `;break;case"codepen":e+=`\n                    <div class="editor-item djs-item" data-type="${t.type}">\n                        <iframe height="${t.height}" title="" src="https://codepen.io/${t.nickname}/embed/${t.code}?height=${t.height}&theme-id=${condition.codepenTheme}&default-tab=result" allowfullscreen class="editor-iframe djs-iframe" data-code="${t.code}" data-nickname="${t.nickname}"></iframe>\n                        <button class="editor-btn-resize djs-resize" data-value="height">Resize height</button>\n                        <button class="editor-edit">edit</button>\n                    </div>\n                `;break;case"codeblock":e+=`<pre class="editor-item djs-item" data-type="${t.type}" data-theme="${t.theme}" data-lang="${t.lang}"><code class="${t.code.class.join(" ")}" contenteditable="true">${t.code.textContent}</code></pre>`;break;default:e+=`<div class="editor-item djs-item" data-type="${t.type}">${t.other}</div>`}})),e}function s(t,e=o(t,"nodelist")){let n=[];return t.forEach(t=>{let e=t.dataset.type;switch(e){case"text":n.push({type:"text",option:i(t),textContent:t.innerHTML});break;case"image":let o="true"==t.dataset.webp,d=a(t,".djs-img",!1),s=d.getAttribute("src"),c=a(t,".djs-caption",!1);n.push({type:"image",option:i(t),hasWebp:o,itemWidth:a(t,".djs-size",!1).dataset.width,width:d.getAttribute("width"),height:d.dataset.height,alt:d.getAttribute("alt"),src:s.replace(condition.regList.srcURL,"$1"),defaultFormat:s.replace(condition.regList.srcURL,"$2"),caption:{option:i(c),textContent:c.textContent}});break;case"ul":let l=[];a(t,'*[contenteditable="true"]').forEach(t=>{l.push({option:i(t),textContent:t.innerHTML})}),n.push({type:"ul",child:l});break;case"ol":let r=[];a(t,'*[contenteditable="true"]').forEach(t=>{r.push({option:i(t),textContent:t.innerHTML})}),n.push({type:"ol",style:t.dataset.style,child:r});break;case"quote":n.push({type:"quote",style:t.dataset.style,text:a(t,".djs-text",!1).textContent,author:a(t,".djs-author",!1).textContent});break;case"table":let u=[],f=[],p=a(t,"col"),b=a(t,"tbody tr"),g=a(t,".djs-caption",!1);p.forEach(t=>{u.push(t.dataset.size)}),b.forEach(t=>{let e=[];a(t,'*[contenteditable="true"]').forEach(t=>{e.push({tag:t.tagName.toLowerCase(),option:i(t),textContent:t.innerHTML})}),f.push(e)}),n.push({type:"table",caption:{option:i(g),textContent:g.textContent},colgroup:u,body:f});break;case"linkbox":n.push({type:"linkbox",url:a(t,".djs-linkbox",!1).getAttribute("href"),imgSrc:a(t,".djs-img",!1).getAttribute("src"),title:a(t,".djs-title",!1).textContent,description:a(t,".djs-description",!1).textContent,domain:a(t,".djs-domain",!1).textContent});break;case"emoticon":let h=t.children[0],m=h.tagName,v={};"IMG"==m?(v.type="image",v.src=h.src,v.caption=h.alt,v.width=parseInt(h.dataset.width),v.height=parseInt(h.dataset.height)):"svg"==m&&(v.type="svg",v.code=h.outerHTML),n.push({type:"emoticon",data:v});break;case"youtube":n.push({type:"youtube",code:t.dataset.code});break;case"codepen":n.push({type:"codepen",nickname:a(t,".djs-iframe",!1).dataset.nickname,code:a(t,".djs-iframe",!1).dataset.code,height:a(t,".djs-iframe",!1).getAttribute("height")});break;case"codeblock":let x=a(t,".djs-code",!1);n.push({type:"codeblock",theme:t.dataset.theme,lang:t.dataset.lang,code:{class:[...x.classList],textContent:x.innerHTML}});break;default:n.push({type:e,other:t.innerHTML})}}),n}},function(t,e,n){"use strict";n.r(e),n.d(e,"getTextNodeStyle",(function(){return l})),n.d(e,"textNodeStyleing",(function(){return r}));const{typeCheckThrow:o}=n(0),{findParentByClass:i,findContenteditable:a}=n(1),{itemStructureValidation:d}=n(9),{setOptionPopValue:s}=n(5),{setCursor:c}=n(3);function l(t,e=o(t,"*")){let n=i(t,"djs-item").dataset.type,a={color:"",fontsize:"",align:"",bold:"",italic:"",underline:"",strikethrough:"",wordblock:"",depth:""};if("Text"==t.constructor.name&&(t=t.parentNode),null!=t.dataset)for(const[e]of Object.entries(a))a[e]=null==t.dataset[e]?"":t.dataset[e];switch(t.tagName){case"B":a.bold="true";break;case"I":a.italic="true";break;case"U":a.underline="true";break;case"DEL":a.strikethrough="true";break;case"CODE":"codeblock"!=n&&(a.wordblock="true")}return a}function r(t,e,n=o(t,"string"),i=o(e,"*")){const d=a(condition.baseNode);let r,m=!1,v=!1;r="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,condition.baseNode!==condition.focusNode&&(m=!0),condition.baseOffset!==condition.focusOffset&&(v=!0),r==d?0==m?0==v?u(r,t,e):function(t,e,n){let o=t.childNodes.length,i=condition.baseNode.textContent;if(g(),1==o)if(i.length==condition.focusOffset&&0==condition.baseOffset)u(t,e,n);else{let o=i.substring(0,condition.baseOffset),a=i.substring(condition.baseOffset,condition.focusOffset),d=i.substring(condition.focusOffset,i.length),s=h(e,a,n);t.innerHTML=`${o}${s}${d}`,0==condition.baseOffset?(condition.baseNode=t.childNodes[0],c(t.childNodes[0],1)):(condition.baseNode=t.childNodes[1],c(t.childNodes[1],1))}else if(o>1){let a,d=i.substring(0,condition.baseOffset),s=i.substring(condition.baseOffset,condition.focusOffset),l=i.substring(condition.focusOffset,i.length),r=h(e,s,n),u=t.childNodes,f="";for(let t=0;t<o;t+=1)if(u[t]==condition.baseNode){a=t;break}for(let t=0;t<o;t+=1)a==t?f+=`${d}${r}${l}`:"Text"==u[t].constructor.name?f+=u[t].textContent:f+=u[t].outerHTML;t.innerHTML=f,0==condition.baseOffset?(condition.baseNode=t.childNodes[a],c(t.childNodes[a],1)):(condition.baseNode=t.childNodes[a+1],c(t.childNodes[a+1],1))}}(r,t,e):p(t,e):0==m?0==v?f(r,t,e):function(t,e,n){const o=a(t);let i,d=l(t),s=b(e),r=t.tagName,u=t.attributes.length,p=t.textContent;if(g(),o.childNodes.forEach((e,n)=>{e==t&&(i=n)}),0==condition.baseOffset&&condition.focusOffset==p.length)f(t,e,n);else{let a=p.substring(0,condition.baseOffset),l=p.substring(condition.baseOffset,condition.focusOffset),f=p.substring(condition.focusOffset,p.length),b=r.toLowerCase();if(0==n)if(0==u)a=h(e,a,n),f=h(e,f,n),t.insertAdjacentHTML("afterend",`${a}${l}${f}`),t.remove(),c(o.childNodes[i+1],o.childNodes[i+1].textContent.length);else{let n="",u="";d[e]="";for(let[t,e]of Object.entries(d))""!==e&&(n+=` data-${t}="${e}"`);u+=r==s?`<${b}${n}>${a}</${b}><span${n}>${l}</span><${b}${n}>${f}</${b}>`:`<${b}${n}>${a}</${b}><${b}${n}>${l}</${b}><${b}${n}>${f}</${b}>`,t.insertAdjacentHTML("afterend",u),t.remove(),c(o.childNodes[i+1],1)}else if(0==u)t.insertAdjacentHTML("afterend",`<${b}>${a}</${b}><${b}>${l}</${b}><${b}>${f}</${b}>`),t.remove(),o.childNodes[i+1].dataset[e]=n,c(o.childNodes[i+1],1);else{let s="",r="",u="";for(let[t,e]of Object.entries(d))""!==e&&(s+=` data-${t}="${e}"`);d[e]=n;for(let[t,e]of Object.entries(d))""!==e&&(r+=` data-${t}="${e}"`);u+=`<${b}${s}>${a}</${b}><${b}${r}>${l}</${b}><${b}${s}>${f}</${b}>`,t.insertAdjacentHTML("afterend",u),t.remove(),c(o.childNodes[i+1],1)}}}(r,t,e):p(t,e),s()}function u(t,e,n){let o=!1;("fontsize"==e&&"1"==n||"color"==e&&condition.defaultColor==n||0==n)&&(o=!0),0==o?t.dataset[e]=n:delete t.dataset[e]}function f(t,e,n){const o=a(t);let i=l(t),s=b(e),r=t.tagName,u=t.attributes.length,f=t.textContent;if(0==n)if(0==u)t.insertAdjacentText("afterend",f),t.remove(),o.innerHTML=o.innerHTML,c(o,1);else if(r==s){t.insertAdjacentHTML("afterend",`<span>${f}</span>`),i[e]="";for(let[e,n]of Object.entries(i))""!==n&&(t.nextElementSibling.dataset[e]=n);c(t.nextElementSibling,1),t.remove()}else delete t.dataset[e],o.focus();else"fontsize"==e&&"1"==n||"color"==e&&condition.defaultColor==n?(delete t.dataset[e],o.focus()):(t.dataset[e]=n,t.focus());d()}function p(t,e){const n=a(condition.baseNode);let o,i,d,s,l=condition.baseNode,r=condition.focusNode,u="",f=[];if(l.parentNode!==n&&(l=l.parentNode),r.parentNode!==n&&(r=r.parentNode),n.childNodes.forEach((t,e)=>{t==l?o=e:r==t&&(i=e)}),o>i){let t=l,e=r,n=o,a=i,d=condition.baseOffset,s=condition.focusOffset;l=e,r=t,o=a,i=n,condition.baseOffset=s,condition.focusOffset=d}if(d=l.textContent,s=r.textContent,u+=d.substring(condition.baseOffset,d.length),n.childNodes.forEach((t,e)=>{e>o&&e<i&&(f.push(t),u+=t.textContent)}),u+=s.substring(0,condition.focusOffset),"Text"!==r.constructor.name&&(f.forEach(t=>{t.remove()}),l.textContent=d.substring(0,condition.baseOffset),r.textContent=s.substring(condition.focusOffset,s.length)),"Text"==l.constructor.name)if("Text"==r.constructor.name){let a="";n.childNodes.forEach((n,c)=>{c<o?"Text"==n.constructor.name?a+=n.textContent:a+=n.outerHTML:c==o?(a+=d.substring(0,condition.baseOffset),a+=h(t,u,e)):c==i?a+=s.substring(condition.focusOffset,s.length):c>i&&("Text"==n.constructor.name?a+=n.textContent:a+=n.outerHTML)}),f.forEach(t=>{t.remove()}),n.innerHTML=a,c(n.childNodes[o+1],1)}else r.insertAdjacentHTML("beforebegin",h(t,u,e)),c(l.nextElementSibling,1);else"Text"==r.constructor.name?(l.textContent=d.substring(0,condition.baseOffset),l.insertAdjacentHTML("afterend",h(t,u,e)),r.textContent=s.substring(condition.focusOffset,s.length),c(l.nextElementSibling,1)):(l.insertAdjacentHTML("afterend",h(t,u,e)),c(l.nextElementSibling,1))}function b(t){let e;switch(t){case"bold":e="B";break;case"italic":e="I";break;case"underline":e="U";break;case"strikethrough":e="DEL";break;case"wordblock":e="CODE"}return e}function g(){if(condition.baseOffset>condition.focusOffset){let t=condition.baseOffset,e=condition.focusOffset;condition.baseOffset=e,condition.focusOffset=t}}function h(t,e,n,i=o(t,"string"),a=o(e,"string"),d=o(n,"*")){let s;switch(t){case"fontSize":s=`<span data-font-size="${n}">${e}</span>`;break;case"color":s=`<span data-color="${n}">${e}</span>`;break;case"bold":s=`<b>${e}</b>`;break;case"italic":s=`<i>${e}</i>`;break;case"underline":s=`<u>${e}</u>`;break;case"strikethrough":s=`<del>${e}</del>`;break;case"wordblock":s=`<code>${e}</code>`;break;case"link":s=`<a href="${n}" rel="nofollow">${e}</a>`}return s}},function(t,e,n){"use strict";n.r(e),n.d(e,"itemClickEvent",(function(){return x})),n.d(e,"getItemType",(function(){return y})),n.d(e,"itemKeyboardEvent",(function(){return k})),n.d(e,"itemMove",(function(){return j})),n.d(e,"itemStructureValidation",(function(){return w}));const{typeCheckThrow:o,classControl:i}=n(0),{openOptionPop:a}=n(5),{contentEnterKeyEvent:d,contentTabKeyEvent:s,contentBackspaceKeyEvent:c,blockHotKey:l}=n(17),{isTextSelect:r}=n(3),{findParentByClass:u,findContenteditable:f,getChild:p,getElement:b}=n(1),{hasBaseNode:g,setSelection:h}=n(6),{getTextBlockHTML:m}=n(2),{message:v}=n(4);function x(t,e=o(t,"event")){let n=t.target,d=u(n,"djs-item"),s=f(n);if(null!==d||null!==s){let t=b(".--djs-selected");t.length>0&&i(t,"remove","--djs-selected"),i(d,"add","--djs-selected"),condition.activeItem=d,condition.activeElement=s,condition.baseNode=n,a()}}function y(t,e){let n=["all"],o=t.dataset.type;if(null!==e&&1==g()){let t;switch(h(),t="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,e.constructor.name){case"HTMLLIElement":n.push("li");break;case"HTMLTableCellElement":"TD"==e.tagName?n.push("td"):"TH"==e.tagName&&n.push("th")}switch(i(condition.btnWordLink,"remove","--act"),i(condition.btnWordBlock,"remove","--act"),t.tagName){case"A":n.push("link"),i(condition.btnWordLink,"add","--act");break;case"CODE":"codeblock"!=o&&(n.push("wordblock"),i(condition.btnWordBlock,"add","--act"))}if(1==r()){let t=condition.baseNode.constructor.name;"codeblock"!=o&&((t="HTMLAnchorElement")&&n.push("link"),n.push("word"))}}return n.push(o),n}function k(t,e=o(t,"event")){let n=u(t.target,"djs-item"),i=f(t.target),a=t.keyCode;switch(h(),a){case 13:d(n,i,t.shiftKey,t);break;case 9:s(n,i,t.shiftKey,t);break;case 8:c(n,i,t);break;default:l(t)}}function j(t,e=o(t,"string")){let n,i,d=u(condition.baseNode,"djs-item");null!=d?("up"==t?n=d.previousElementSibling:"down"==t&&(n=d.nextElementSibling),null!=n&&(i=n.outerHTML,"up"==t?d.insertAdjacentHTML("afterend",i):"down"==t&&d.insertAdjacentHTML("beforebegin",i),n.remove()),a(),d.focus()):alert(v.missingSelect)}function w(){let t=["font","center","div"],e=p(condition.areaContent,'[contenteditable="true"]');e.forEach(e=>{let n=u(e,"djs-item").dataset.type,o=e.childNodes;"codeblock"!=n&&o.forEach(e=>{if(1==("Text"!=e.constructor.name)){let n=e.childNodes,o=e.tagName.toLowerCase(),i=0!=Object.keys(e.dataset),a=""!=e.textContent;e.removeAttribute("style"),0==a?"br"!=o&&e.remove():0==i?(t.indexOf(o)>-1||"span"==o)&&(e.outerHTML=e.textContent):n.forEach(t=>{"Text"!=t.constructor.name&&(t.outerHTML=t.innerText)})}})}),0==e.length&&condition.areaContent.insertAdjacentHTML("beforeend",m())}},function(t,e,n){"use strict";n.r(e),n.d(e,"setScroll",(function(){return s})),n.d(e,"refreshScroll",(function(){return l})),n.d(e,"getScrollInfo",(function(){return r}));const{typeCheckThrow:o}=n(0),{getChild:i}=n(1),{scrollButtonHTML:a}=n(2),{bindingScrollEvent:d}=n(11);function s(){condition.scrollArea.forEach(t=>{t.insertAdjacentHTML("beforeend",a()),c(t),d(t)})}function c(t,e=o(t,"node")){let n=i(t,".djs-scroll-bar",!1),a=r(t);n.style.height=a.scrollHeight+"px"}function l(){condition.scrollArea.forEach(t=>{c(t),d(t)})}function r(t,e=o(t,"node")){let n,a,d,s,c=i(t,".djs-scroll-content",!1),l=t.getBoundingClientRect(),r=c.getBoundingClientRect(),u=i(t,".djs-scroll-content > *"),f=l.height-10,p=0;return u.forEach(t=>{p+=t.getBoundingClientRect().height}),p<f&&(p=f),n=100/p*f,a=Math.floor(n/100*f),d=p-r.height,s=r.height-8-a,a==f&&(a=0),{scrollHeight:a,contentHeight:p,maxScrollTop:d,maxBarTop:s}}},function(t,e,n){"use strict";n.r(e),n.d(e,"setEvent",(function(){return P})),n.d(e,"bindingScrollEvent",(function(){return F})),n.d(e,"setEmoticonBtnEvent",(function(){return q}));const{typeCheckThrow:o,eventBinding:i,classControl:a,hasClass:d,fetchURL:s,isMobile:c}=n(0),{getElement:l,findParentByClass:r,getChild:u,findContenteditable:f}=n(1),{setScroll:p,getScrollInfo:b}=n(10),{getDefaultBlockHTML:g,getYoutubeBlock:h,getCodepenBlock:m,getLinkboxBlock:v,setEmoticonList:x,getEmoticonBlockHTML:y,addBlockToContent:k,getImageBlockHTML:j,getContentData:w}=n(2),{itemClickEvent:$,itemKeyboardEvent:T,itemStructureValidation:L,itemMove:C}=n(9),{openFile:E,fileUpload:N,mediaNameUpdate:M}=n(12),{openPop:O,closeOptionPop:H,openOptionPop:B,openLinkPop:S}=n(5),{contentPasteEvent:I}=n(18),{jsonToHtml:A}=n(7),{textNodeStyleing:D}=n(8),{changeTableCell:R,tableCellControl:z,setTableColSize:U}=n(19),{message:W}=n(4);function P(){!function(){let t;i(window,"resize",(function(){clearTimeout(t),t=setTimeout(()=>{condition.windowWidth=window.innerWidth,condition.windowHeight=window.innerHeight,condition.popOption.removeAttribute("style"),a(condition.popOption,"remove","--act")},250)})),i(document,"mousedown",(function(t){let e=t.target,n=l(".djs-trigger.--act"),o=null!=r(e,"djs-trigger");0==(null!=r(e,"djs-btn-ignore"))&&0==o&&n.length>0&&a(n,"remove","--act"),H(t.target)})),i(condition.btnToggleTarget,"click",(function(t){let e=this.dataset.target,n=l(e,!1),o=l(".djs-trigger.--act"),i=d(n,".djs-scroll");o.forEach(t=>{if(t!==n&&(a(t,"remove","--act"),1==i)){n.querySelector(".djs-scroll-content").scrollTo(0,0)}}),a(n,"toggle","--act")}))}(),function(){""!==condition.mediaURL&&(i(condition.uploadInput,"change",(function(){let t=condition.uploadForm,e=new FormData(t);e.append("type",t.dataset.type),e.append("articleIdx",condition.articleIdx),e.append("articleTempIdx",condition.articleTempIdx),N(e)})),i(condition.btnAddMedia,"click",(function(){condition.uploadForm.dataset.type="default",condition.uploadInput.removeAttribute("accept"),condition.uploadInput.click()})));1==condition.multiLang&&i(condition.btnChangeLang,"click",(function(){let t,e=this.dataset.value,n=w();if(a(condition.btnChangeLang,"remove","--act"),a(this,"add","--act"),condition.contentData[condition.lang]=n,null==condition.contentData[e]&&(condition.contentData[e]=[]),0==condition.contentData[e].length){let t=confirm(W.noContentData(e));condition.contentData[e]=1==t?n:condition.defaultContentData}t=A(condition.contentData[e]),condition.activeItem=condition.wrap,condition.activeElement=condition.wrap,condition.areaContent.innerHTML=t,condition.triggerLangChange(condition.lang,e),condition.lang=e}));i(condition.btnSwitchDevice,"click",(function(){a(condition.areaContent,"toggle","--mobile"),a(this,"toggle","--act")})),i(condition.btnAddBlock,"click",(function(){let t=this.dataset.type,e=this.dataset.value;if("block"==t){let t=g(e);k(t),B()}else"pop"==t?O(e,this):"file"==t?E(e):"custom"==t&&condition.defaultMenu[e].fn()})),i(condition.btnLinkbox,"click",(async function(){let t,e=u(condition.popLinkbox,".djs-input",!1),n=e.value,o=this.dataset.value,i=!1;if("linkbox"==o){let e={};if(condition.regList.defaultURL.test(n)){if(a(this,"add","--ing"),""===condition.linkBoxApi){let o=await s("https://api.allorigins.win/get?url="+n);if(!1!==o.response){let a=o.contents,d=new RegExp('property=\\"og:title\\"',"g"),s=new RegExp('([^])*\\<title>([^"]*)<\\/title>([^]*)',"g"),c=new RegExp('([^]*)\\<meta property=\\"og:title\\" content=\\"([^"]*)(?=\\")"([^]*)',"g"),l=new RegExp('property=\\"og:image\\"',"g"),r=new RegExp('([^])*\\<meta name=\\"image\\" content=\\"([^"]*)"\\>([^]*)',"g"),u=new RegExp('([^])*\\<meta property=\\"og:image\\" content=\\"([^"]*)(?=\\")([^]*)',"g"),f=new RegExp('property=\\"og:description\\"',"g"),p=new RegExp('([^])*\\<meta name=\\"description\\" content=\\"([^"]*)(?=\\")([^]*)',"g"),b=new RegExp('([^])*\\<meta property=\\"og:description\\" content=\\"([^"]*)(?=\\")([^]*)',"g");if(1==d.test(a)?e.title=a.replace(c,"$2"):e.title=a.replace(s,"$2"),1==l.test(a))e.img=a.replace(u,"$2");else{let t=a.replace(r,"$2");t.length>500?e.img="":e.img=t}if(1==f.test(a))e.description=a.replace(b,"$2");else{let t=a.replace(p,"$2");t.length>500?e.description="":e.description=t}n.indexOf("://")>-1?e.domain=n.split("/")[2]:e.domain=n.split("/")[0],e.domain=e.domain.split(":")[0],e.url=n,t=v(e),i=!0}else console.error(o.error),alert(W.apiNotWorking)}else{let e=await s(condition.linkBoxApi,{method:"POST",body:{url:n}});1==e.response?(e.data.url=n,t=v(e.data),i=!0):alert(e.error.message)}a(this,"remove","--ing")}}else if("youtube"==o){if(condition.regList.youtubeURL.test(n)){let e=n.replace(condition.regList.youtubeCode,"$7");t=h(e),i=!0}}else if("codepen"==o){if(condition.regList.codepenURL.test(n)){let e=n.replace(condition.regList.codepenCode,"$2"),o=n.replace(condition.regList.codepenCode,"$4");t=m(e,o),i=!0}}else if("word"==o){let t=condition.baseNode.parentNode;t.insertAdjacentHTML("afterend",`<span>${t.textContent}</span>`),t.remove(),L(),a(condition.popLinkbox,"remove","--act")}else"link"==o&&condition.regList.defaultURL.test(n)&&(D("link",n),i=!0);1==i?("link"!=o&&k(t),e.value="",a(condition.popLinkbox,"remove","--act")):"word"!=o&&(a(condition.popLinkbox,"add","--wrong"),e.focus(),setTimeout(()=>{a(condition.popLinkbox,"remove","--wrong")},1e3))})),i(u(condition.popLinkbox,".djs-input",!1),"keydown",(function(t){if("Enter"==t.code){let t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1),condition.btnLinkbox.dispatchEvent(t)}})),i(condition.listMedia,"click",(async function(t){let e,n=u(this,'*[contenteditable="true"]'),o=r(t.target,"djs-media"),i="",a="";if(n.length>0&&n.forEach(t=>{M(t)}),null!=o){let t=u(o,".djs-add-media",!1);e={src:t.dataset.src,alt:t.dataset.alt,hasWebp:t.dataset.webp,defaultFormat:t.dataset.defaultFormat,webp:t.dataset.webp,width:parseInt(t.dataset.width),height:parseInt(t.dataset.height)},i=o.dataset.type,a=o.dataset.idx}if("image"==i)switch(!0){case null!==r(t.target,"djs-add-media"):let n,i=700;1==c()?i=300:e.width<e.height&&(i=400),n=j(e,i),k(n);break;case null!==r(t.target,"djs-del-media"):let d=condition.mediaURL;0==("/"==d.substr(d.length-1,d.length))&&(d+="/");let l=await s(`${d}${a}`,{method:"DELETE"});if(1==l.response){u(condition.areaContent,`img[src="${e.src}.${e.defaultFormat}"]`).forEach(t=>{r(t,"djs-item").remove()}),o.remove(),condition.activeItem=condition.wrap}else alert(l.error.message);break;case null!==r(t.target,"djs-name"):let f=r(t.target,"djs-name");f.setAttribute("contenteditable","true"),f.focus(),f.dataset.preText=f.textContent}})),i(condition.listMedia,"keydown",(function(t){let e=null!==r(t.target,"djs-name");"Enter"==t.code&&1==e&&(t.preventDefault(),M(t.target))}))}(),p(),function(){let t={resize:!1,client:{x:0,y:0},type:"",item:"",position:""};i(condition.areaContent,"paste",(function(t){I(t)})),i(condition.areaContent,"mousedown,touchstart",(function(e){let n=e.target;1==n.classList.contains("djs-resize")&&(1==c()?(t.client.x=Math.floor(e.touches[0].clientX),t.client.y=Math.floor(e.touches[0].clientY)):(t.client.x=e.clientX,t.client.y=e.clientY),t.resize=!0,t.item=r(n,"djs-item"),t.type=t.item.dataset.type,t.position=n.dataset.position,"image"==t.type?(t.target=u(t.item,".djs-size",!1),t.defaultValue=parseInt(t.target.dataset.width)):"codepen"==t.type&&(t.target=u(t.item,".djs-iframe",!1),t.defaultValue=parseInt(t.target.height),a(t.item,"add","--act")))})),i(condition.areaContent,"mousemove,touchmove",(function(e){if(1==t.resize){let n,o;if(1==c()?(n=Math.floor(e.touches[0].clientX),o=Math.floor(e.touches[0].clientY)):(n=e.clientX,o=e.clientY),"image"==t.type){let e;"left"==t.position?e=n-t.client.x:"right"==t.position&&(e=t.client.x-n);let o=50*Math.floor(e/50),i=t.defaultValue-o;i>condition.maxImageWidth?i=condition.maxImageWidth:i<50&&(i=50),t.target.dataset.width=i}else if("codepen"==t.type){let e=t.client.y-o,n=50*Math.floor(e/50),i=t.defaultValue-n;i<300?i=300:i>condition.maxCodepenHeight&&(i=condition.maxCodepenHeight),t.target.height=i}}})),i(condition.areaContent,"mouseup,touchend",(function(e){t.resize=!1,"codepen"==t.type&&a(t.item,"remove","--act"),$(e)})),i(condition.areaContent,"keydown",(function(t){T(t)})),i(condition.areaContent,"keyup",(function(t){$(t)}))}(),i(condition.btnFontSize,"click",(function(){let t=l(".djs-fontsize",!1),e=this.dataset.value,n=this.textContent,o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),D("fontsize",e),u(t,".djs-text",!1).textContent=n,t.dispatchEvent(o)})),i(condition.btnColSize,"click",(function(){let t=l(".djs-colsize",!1),e=this.dataset.value,n=this.textContent,o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),U(e),u(t,".djs-text",!1).textContent=n,t.dispatchEvent(o)})),i(condition.btnColor,"click",(function(){let t=l(".djs-color",!1),e=this.dataset.value,n=document.createEvent("HTMLEvents");n.initEvent("click",!0,!1),D("color",e),t.dataset.value=e,t.dispatchEvent(n)})),i(condition.btnAlign,"click",(function(){let t=f(condition.baseNode),e=this.dataset.value,n=this.classList.contains("--act");null==t&&(t=r(condition.baseNode,"djs-item")),1==n?(t.removeAttribute("data-align"),a(this,"remove","--act")):(t.dataset.align=e,a(condition.btnAlign,"remove","--act"),a(this,"add","--act"))})),i(condition.btnToggleBold,"click",(function(){let t=this.classList.contains("--act");D("bold",!t)})),i(condition.btnToggleItalic,"click",(function(){let t=this.classList.contains("--act");D("italic",!t)})),i(condition.btnToggleUnderline,"click",(function(){let t=this.classList.contains("--act");D("underline",!t)})),i(condition.btnToggleStrikethrough,"click",(function(){let t=this.classList.contains("--act");D("strikethrough",!t)})),i(condition.btnWordBlock,"click",(function(){let t=this.classList.contains("--act");D("wordblock",!t),a(this,"toggle","--act")})),i(condition.btnListType,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=this.dataset.value;t.dataset.style=e})),i(condition.btnTableHeader,"click",(function(){R("th")})),i(condition.btnTableBody,"click",(function(){R("td")})),i(condition.btnCellControl,"click",(function(){let t=this.dataset.type,e=this.dataset.action,n=f(condition.baseNode),o=n.dataset.x,i=n.dataset.y;z(t,e,o,i)})),i(condition.btnThemeSet,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=this.dataset.value,n=l(".djs-code-theme",!1),o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),t.dataset.theme=e,n.dispatchEvent(o)})),i(condition.btnLangSet,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=f(condition.baseNode),n=this.dataset.value,o=l(".djs-code-lang",!1),i=l(".djs-code-lang .djs-text",!1),a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!1),"text"==n&&(n="nohighlight"),t.dataset.lang=n,e.classList=n+" editor-code djs-code",e.textContent=e.textContent,hljs.highlightBlock(e),"nohighlight"==n?(i.textContent="text",t.dataset.lang="text"):i.textContent=n,o.dispatchEvent(a),e.focus(),condition.baseNode=e})),i(condition.btnItemMobeUp,"click",(function(){C("up")})),i(condition.btnItemMobeDown,"click",(function(){C("down")})),i(condition.btnWordLink,"click",(function(){let t,e,n=this.classList.contains("--act"),o={};t="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,e=t.getBoundingClientRect(),o.top=e.top-37,o.right=e.right+230,o.width=e.width,a(condition.popOption,"remove","--act"),S(1==n?"word":"link",o)})),i(condition.btnItemDelete,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=condition.areaContent.childElementCount;t.remove(),condition.activeItem=condition.wrap,a(condition.popOption,"remove","--act"),1==e&&condition.areaContent.insertAdjacentHTML("beforeend",g("textBlock"))}))}function F(t,e=o(t,"node")){let n=u(t,".djs-scroll-content",!1),a=u(t,".djs-scroll-bar",!1),d=b(t),s={activity:!1,mouseY:0,scrollY:0};i(n,"scroll",(function(){let t=this.scrollTop,e=Math.floor(100/d.maxScrollTop*t),n=Math.floor(e/100*d.maxBarTop);a.style.transform=`translateY(${n}px)`})),i(t,"mousemove",(function(t){if(1==s.activity){let e=-(s.mouseY-t.clientY),o=s.scrollY+2*e;n.scrollTo(0,o)}})),i(a,"mousedown",(function(t){s.activity=!0,s.mouseY=t.clientY,s.scrollY=n.scrollTop})),i(t,"mouseup",(function(){s.activity=!1}))}function q(){let t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1),condition.btnEmoticonTap=u(condition.popEmoticon,".djs-emoticon-tap"),i(condition.btnEmoticonTap,"click",(function(){let t=this.dataset.key,e=condition.emoticonData[t].list;x(t,e)})),condition.btnEmoticonTap[0].dispatchEvent(t),i(condition.listEmoticon,"click",(function(t){let e=t.target,n=r(e,"djs-add-emoticon");if(null!==n){let t=n.dataset.key,e=parseInt(n.dataset.idx),o=y(t,e);k(o)}}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"openFile",(function(){return u})),n.d(e,"fileUpload",(function(){return f})),n.d(e,"mediaNameUpdate",(function(){return p}));const{typeCheckThrow:o,fetchURL:i,isMobile:a}=n(0),{setMediaList:d,getImageBlockHTML:s,addBlockToContent:c}=n(2),{findParentByClass:l,getChild:r}=n(1);function u(t,e=o(t,"string")){switch(t){case"imageBlock":condition.uploadForm.dataset.type="image",condition.uploadInput.setAttribute("accept","image/*");break;default:condition.uploadForm.dataset.type="default",condition.uploadInput.removeAttribute("accept")}condition.uploadInput.click()}async function f(t,e=o(t,"formdata")){let n=await i(condition.mediaURL,{method:"POST",body:t});1==n.response?(d(n.list),n.list.forEach(t=>{if("image"==t.type){let e,n=700;1==a()?n=300:t.width<t.height&&(n=400),e=s(t,n),c(e)}}),condition.uploadInput.value=""):alert(n.error.message)}async function p(t,e=o(t,"node")){let n=l(t,"djs-name"),a=l(t,"djs-media"),d=n.textContent,s=n.dataset.preText,c=a.dataset.idx;n.scrollTo(0,0),n.removeAttribute("contenteditable"),n.removeAttribute("data-pre-text");let u=await i(condition.mediaURL,{method:"PUT",body:{imageName:d,fileIdx:c}},"json");if(1==u.response){r(condition.areaContent,`img[alt="${s}"]`).forEach(t=>{t.setAttribute("alt",d)})}else alert(u.error.message)}},function(t,e,n){t.exports=n(14)},function(t,e,n){(function(e){const{typeCheckThrow:o}=n(0),{storage:i}=n(16),{makeView:a,setEmoticonLayout:d,setMediaList:s,getContentData:c,addBlockToContent:l}=n(2),{refreshScroll:r}=n(10),{setEvent:u,setEmoticonBtnEvent:f}=n(11),{jsonToHtml:p}=n(7);t.exports=class{constructor(t={},n=o(t,"object")){return e.condition=new i(t),condition.wrap.dataset.layout=condition.layout,a(),condition.setElement(t),u(),this}setEmoticon(t,e=o(t,"object")){0!=condition.useEmoticon?(condition.emoticonData=t,d(),f(),r()):console.warn('DRAGON EDITOR - If you want using Emoticon? set "useEmoticion" first.')}setMedia(t,e=o(t,"array")){""!=condition.mediaURL?(s(t),r()):console.warn('DRAGON EDITOR - If you want using Media? set "uploadURL" first.')}setContentData(t,e=o(t,"object")){let n={};for(const[e,o]of Object.entries(t))condition.langCategory.indexOf(e)>-1&&(n[e]=o);condition.contentData=n,condition.areaContent.innerHTML=p(n[condition.lang])}getContentData(){return condition.contentData[condition.lang]=c(),condition.contentData}addItem(t,e=o(t,"string")){l(`<div class="editor-item djs-item" data-type="other">${t}</div>`)}getStatus(){return condition}}}).call(this,n(15))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"storage",(function(){return c}));const{typeCheckThrow:o,typeCheckBoolean:i}=n(0),{getElement:a,checkElement:d}=n(1),{message:s}=n(4);class c{constructor(t){if(this.wrap=a(".editor-dragon",!1),null==this.wrap)throw'DRAGON EDITOR - You must be set element has "editor-dragon" class.';this.setMessage(t.message),this.setStatus(t)}setMessage(t={},e=o(t,"object")){let n=["apiNotWorking","wrongItemStructure","missingSelect","noContentData"];for(const[e,o]of Object.entries(t))n.indexOf(e)>-1?s[e]=o:console.warn(s.wrongKey("message",e))}setStatus(t){this.defaultContentData=[{option:{align:"",bold:"",color:"",fontSize:"",italic:"",strikethrough:"",underline:"",wordblock:""},textContent:"",type:"text"}],this.popOptionToClose=!0,this.log=[],this.linkBoxData={},this.langCategory=["en","ko"],this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.enterCount=0,this.activeItem=this.wrap,this.activeElement=this.wrap,this.focusNode,this.baseNode,this.focusOffset,this.baseOffset,this.regList={srcURL:new RegExp("(.*)\\.(jpg|png|gif|webp|bmp|jpeg)","i"),defaultURL:new RegExp("https?:\\/\\/(\\w*:\\w*@)?[-\\w.]+(:\\d+)?(\\/([\\w\\/_.]*(\\?\\S+)?)?)?","i"),youtubeURL:new RegExp("(https:\\/\\/)?(www\\.)?youtu(be)?\\.(be|com)?","i"),youtubeCode:new RegExp("((https:\\/\\/)?(www\\.)?youtu(be)?\\.(be|com)\\/(embed\\/|watch\\?v=)?)([^=\\/& :]*)(.*)","i"),codepenURL:new RegExp("codepen.io","g"),codepenCode:new RegExp("(https:\\/\\/codepen\\.io\\/)(\\w*)\\/(pen|embed)\\/([A-Za-z]*)(.*)","i")},this.articleIdx=i(t.articleIdx,"number")?t.articleIdx:0,this.articleTempIdx=i(t.articleTempIdx,"number")?t.articleTempIdx:0,this.csrfData=i(t.csrfData,"object")?t.csrfData:{name:"",value:""},this.csrfHeader=i(t.csrfHeader,"object")?t.csrfHeader:{},this.mode=i(t.mode,"string")?t.mode:"editor",this.layout=i(t.layout,"string")?t.layout:"full",this.multiLang=!i(t.multiLang,"boolean")||t.multiLang,this.defaultColor=i(t.defaultColor,"string")?t.defaultColor:"#333",this.defaultFontSize=i(t.defaultFontSize,"number")?t.defaultFontSize:14,this.changePoint=i(t.changePoint,"number")?t.changePoint:800,this.maxImageWidth=i(t.maxImageWidth,"number")?t.maxImageWidth:700,this.maxCodepenHeight=i(t.maxCodepenHeight,"number")?t.maxCodepenHeight:1e3,this.useWebp=!i(t.useWebp,"boolean")||t.useWebp,this.useEmoticon=!!i(t.useEmoticon,"boolean")&&t.useEmoticon,this.emoticonData=i(t.emoticonData,"object")?t.emoticonData:{},this.codepenTheme=i(t.codepenTheme,"string")?t.codepenTheme:"dark",this.blockName=i(t.blockName,"object")?t.blockName:{},this.removeMenu=i(t.removeMenu,"array")?t.removeMenu:[],this.frontSize=i(t.frontSize,"array")?t.frontSize:[.75,.9,1,1.15,1.25,1.5,1.75,1.9,2,2.15,2.25],this.codeTheme=i(t.codeTheme,"array")?t.codeTheme:["default","vs2015","androidstudio","monokai"],this.codeLang=i(t.codeLang,"array")?t.codeLang:["text","css","html","xml","json","java","javascript","markdown","objective-c","php","python","sql","shell","kotlin","swift","yml"],this.colorList=i(t.colorList,"array")?t.colorList:["#fff","#efefef","#ccc","#999","#777","#555","#333","#e6b8af","#dd7e6b","#cc4125","#980000","#a61c00","#85200c","#5b0f00","#f4cccc","#ea9999","#e06666","#ff0000","#cc0000","#990000","#660000","#fce5cd","#f9cb9c","#f6b36b","#ff9900","#e69138","#b45f06","#783f04","#fff2cc","#ffe599","#ffd966","#ffff00","#f1c232","#bf9000","#7f6000","#d9ead3","#b6d7a8","#93c47d","#00ff00","#6aa84f","#38761d","#274e13","#d0e0e3","#a2c4c9","#76a5af","#00ffff","#45818e","#134f5c","#0c343d","#c9daf8","#a4c2f4","#6d9eeb","#4a87e8","#3c78d8","#1156cc","#1c4587","#cfe2f3","#9fc5e8","#6fa8dc","#0000ff","#3d85c6","#0b5394","#073763","#d9d2e9","#b4a7d6","#8e7cc3","#9900ff","#674ea7","#351c75","#20124d","#ead1dc","#d5a6bd","#c27ba0","#ff00ff","#a64d79","#741b47","#4c1130"],this.addMenu=i(t.addMenu,"object")?t.addMenu:{},this.addLang=i(t.addLang,"array")?t.addLang:[],this.triggerLangChange=i(t.triggerLangChange,"function")?t.triggerLangChange:()=>{},this.multiUpload=!!i(t.multiUpload,"boolean")&&t.multiUpload,this.defaultLinkBoxImage=i(t.defaultLinkBoxImage,"string")?t.defaultLinkBoxImage:"https://via.placeholder.com/600x300.png",this.linkBoxApi=i(t.linkBoxApi,"string")?t.linkBoxApi:"",this.mediaURL=this.setURL(t.mediaURL,"mediaURL"),this.setLang(t.lang),this.setContentData(),this.setBlockMenu(),this.addLanguage()}setURL(t="",e){return""==t?"":1==i(t,"string")&&(1==this.regList.defaultURL.test(t)||"/"==t.substr(0,1))?t:(console.warn(s.wrongURL(e,t)),"")}setLang(t){if(1==i(t,"undefined"))this.lang=this.langCategory[0];else if(1==i(t,"string")){let e=this.langCategory.indexOf(t);e>-1?this.lang=this.langCategory[e]:(this.langCategory.unshift(t),this.lang=this.langCategory[0])}else console.warn(s.wrongValue("lang")),this.lang=this.langCategory[0]}setContentData(){let t={};this.langCategory.forEach(e=>{t[e]=[]}),this.contentData=t}setBlockMenu(){let t={textBlock:{text:"Text",icon:"#icon-text-block",type:"block"},imageBlock:{text:"Image",icon:"#icon-image-block",type:"file"},ulBlock:{text:"Unnumbered list",icon:"#icon-ul-block",type:"block"},olBlock:{text:"Numbered list",icon:"#icon-ol-block",type:"block"},quotaionBlock:{text:"Quotaion",icon:"#icon-quotaion-block",type:"block"},tableBlock:{text:"Table",icon:"#icon-table-block",type:"block"},linkboxBlock:{text:"Link box",icon:"#icon-linkbox-block",type:"pop"},emoticonBlock:{text:"Emoticon",icon:"#icon-emoticon-block",type:"pop"},youtubeBlock:{text:"Youtube",icon:"#icon-youtube-block",type:"pop"},codepenBlock:{text:"Codepen",icon:"#icon-codepen-block",type:"pop"},codeBlock:{text:"Code",icon:"#icon-code-block",type:"block"}};for(const[e,n]of Object.entries(this.blockName))1==i(n,"string")&&(t[e].text=n);delete this.blockName,""==this.mediaURL&&delete t.imageBlock,0==this.useEmoticon&&delete t.emoticonBlock,this.removeMenu.forEach(e=>{delete t[e]}),delete this.removeMenu;for(const[e,n]of Object.entries(this.addMenu))t[e]={type:"custom",text:n.text,icon:n.icon,fn:n.fn};delete this.addMenu,this.defaultMenu=t}addLanguage(){let t=[];this.addLang.forEach(e=>{i(e,"string")&&2==e.length&&t.push(e)}),this.langCategory=[...new Set(this.langCategory.concat(t))],delete this.addLang}setElement(t){this.scrollArea=a(".djs-scroll"),this.btnToggleTarget=a(".djs-toggle-target"),this.btnAddBlock=a(".djs-add-block"),this.areaContent=a(".djs-content",!1),this.popEmoticon=a(".djs-emoticon-pop",!1),this.popFolder=a(".djs-folder-pop",!1),this.popLinkbox=a(".djs-linkbox-pop",!1),this.btnLinkbox=a(".djs-linkbox-pop .djs-btn",!1),this.listEmoticon=a(".djs-list-emoticon",!1),this.listMedia=a(".djs-list-media",!1),this.popOption=a(".djs-option-pop",!1),this.btnSwitchDevice=d(t.btnSwitchDevice,".djs-switch-device",!1),1==condition.multiLang&&(this.btnChangeLang=d(t.btnChangeLang,".djs-change-lang")),this.btnEmoticonTapArea=a(".djs-emoticon-pop .djs-btn-area",!1),this.btnFontSize=a(".djs-change-fontsize"),this.btnColSize=a(".djs-change-colsize"),this.btnColor=a(".djs-change-color"),this.btnAlign=a(".djs-change-align"),this.btnToggleBold=a(".djs-toggle-bold",!1),this.btnToggleItalic=a(".djs-toggle-italic",!1),this.btnToggleUnderline=a(".djs-toggle-underline",!1),this.btnToggleStrikethrough=a(".djs-toggle-strikethrough",!1),this.btnCellControl=a(".djs-cell-control"),this.btnListType=a(".djs-set-list-type"),this.btnTableHeader=a(".djs-table-header",!1),this.btnTableBody=a(".djs-table-body",!1),this.btnThemeSet=a(".djs-set-theme"),this.btnLangSet=a(".djs-set-lang"),this.btnItemMobeUp=a(".djs-move-up",!1),this.btnItemMobeDown=a(".djs-move-down",!1),this.btnWordBlock=a(".djs-word-block",!1),this.btnWordLink=a(".djs-open-linkbox",!1),this.btnItemDelete=a(".djs-delete-block",!1),this.btnAddMedia=a(".djs-add-media",!1),""!==condition.mediaURL&&(this.uploadForm=a(".djs-uploader",!1),this.uploadInput=a(".djs-uploader .djs-file",!1))}}},function(t,e,n){"use strict";n.r(e),n.d(e,"contentEnterKeyEvent",(function(){return f})),n.d(e,"contentTabKeyEvent",(function(){return p})),n.d(e,"contentBackspaceKeyEvent",(function(){return b})),n.d(e,"blockHotKey",(function(){return g}));const{typeCheckThrow:o,classControl:i}=n(0),{isTextSelect:a,setCursor:d}=n(3),{getChild:s,findContenteditable:c}=n(1),{getTextBlockHTML:l,getListChildHTML:r,addBlockToContent:u}=n(2);function f(t,e,n,i,f=o(t,"node"),p=o(e,"node"),b=o(n,"boolean")){if(0==n&&0==condition.enterCount){i.preventDefault();let n=t.dataset.type;if(condition.enterCount+=1,1==a());else{let o=e.childNodes,i=o.length;d(condition.baseNode,condition.baseOffset),setTimeout(()=>{if("text"==n)if(i>0){let e=o[i-1],n=e.textContent.length;if(condition.baseNode==e&&condition.baseOffset==n)t.insertAdjacentHTML("afterend",l()),d(t.nextElementSibling,0);else if(condition.baseNode==o[0]&&0==condition.baseOffset)t.insertAdjacentHTML("beforebegin",l());else{let e=h(o,i);t.childNodes[e.childNumber].textContent=e.beforeText,t.insertAdjacentHTML("afterend",l(e.afterHTML)),t.nextElementSibling.childNodes[0].textContent=e.afterText,d(t.nextElementSibling.childNodes[0],0)}}else t.insertAdjacentHTML("afterend",l()),d(t.nextElementSibling,0);else if("ol"==n||"ul"==n)if(i>0){let t=o[i-1],n=t.textContent.length;if(condition.baseNode==t&&condition.baseOffset==n)e.insertAdjacentHTML("afterend",r()),d(e.nextElementSibling,0);else if(condition.baseNode==c(o[0])&&0==condition.baseOffset)e.insertAdjacentHTML("beforebegin",r());else{let t=h(o,i);e.innerHTML=t.beforeHTML,e.childNodes[t.childNumber].textContent=t.beforeText,e.insertAdjacentHTML("afterend",r(t.afterHTML)),e.nextElementSibling.childNodes[0].textContent=t.afterText,d(e.nextElementSibling.childNodes[0],0)}}else{let n=s(t,'[contenteditable="true"]'),o=n.length;if(o>1){let t=!1;n.forEach((n,i)=>{n==e&&i==o-1&&(t=!0)}),1==t?(e.remove(),u(l())):(e.insertAdjacentHTML("afterend",r()),d(e.nextElementSibling,0))}else e.insertAdjacentHTML("afterend",r()),d(e.nextElementSibling,0)}else if("table"==n){if("HTMLTableCaptionElement"==e.constructor.name){let e=s(t,'*[data-x="0"][data-y="0"]',!1),n=e.childNodes.length>0;d(1==n?e.childNodes[0]:e,0)}else{let n=parseInt(e.dataset.x),o=parseInt(e.dataset.y)+1,i=s(t,`*[data-x="${n}"][data-y="${o}"]`,!1);if(null!=i){let t=i.childNodes.length>0;d(1==t?i.childNodes[0]:i,0)}else t.insertAdjacentHTML("afterend",l()),d(t.nextElementSibling,0)}}else t.insertAdjacentHTML("afterend",l()),d(t.nextElementSibling,0)},50)}setTimeout(()=>{condition.enterCount=0},150)}else 0!=condition.enterCount&&i.preventDefault()}function p(t,e,n,i,a=o(t,"node"),c=o(e,"node"),l=o(n,"boolean")){i.preventDefault(),d(condition.baseNode,condition.baseOffset),setTimeout(()=>{let o=t.dataset.type,i=parseInt(null==e.dataset.depth?0:e.dataset.depth);if(1==n?i>0&&(i-=1):i<3&&(i+=1),"text"==o||"ol"==o||"ul"==o)0==i?e.removeAttribute("data-depth"):e.dataset.depth=i;else if("table"==o){if("HTMLTableCellElement"==e.constructor.name){let o=parseInt(e.dataset.x),i=parseInt(e.dataset.y);1==n?o-=1:o+=1;let a=s(t,`*[data-x="${o}"][data-y="${i}"]`,!1);if(null!=a){let t=a.childNodes.length>0;d(1==t?a.childNodes[0]:a,0)}}}},150)}function b(t,e,n,c=o(t,"node"),r=o(e,"node")){let u=t.dataset.type,f=condition.areaContent.childElementCount,p=null!=t.previousElementSibling,b=e.textContent.length>0,g=t.previousElementSibling;if(1==a());else if(0==condition.baseOffset)if(n.preventDefault(),1==p){let n=g.dataset.type,o=g.textContent.length>0,i=1==o?1:0;if("text"==u)if(1==b)if("text"==n)if(1==o){let e=g.childNodes,n=e.length,o=g.innerHTML+t.innerHTML;i=e[n-1].textContent.length,g.innerHTML=o,t.remove(),d(g.childNodes[n-1],i)}else g.remove();else g.remove();else if(t.remove(),"text"==n){let t,e=g.childNodes,n=e.length;n>0?(t=e[n-1],i=t.length):(t=g,i=0),d(t,i)}else{let t=s(g,'*[contenteditable="true"]'),e=t.length;i=1==t[e-1].textContent.length>0?1:0,d(t[e-1],i)}else if("ol"==u||"ul"==u){let n=e.innerHTML,o=s(t,'*[contenteditable="true"]').length,a=e.previousElementSibling,c=null!=a;if(o>1)if(1==c){let t,o=a.childNodes,s=o.length;if(0==b)s>0?(t=o[s-1],i=t.length):(t=a,i=0);else if(s>0){let e=a.innerHTML+n;i=o[s-1].textContent.length,a.innerHTML=e,t=a.childNodes[s-1]}else a.innerHTML=n,t=a,i=0;e.remove(),d(t,i),condition.activeItem=a,condition.baseNode=t}else t.insertAdjacentHTML("beforebegin",l(n)),d(t.previousElementSibling,0),t.remove();else t.insertAdjacentHTML("afterend",l(n)),d(t.nextElementSibling,0),t.remove()}}else 0==b&&(t.remove(),i(condition.popOption,"remove","--act"),condition.activeItem=condition.wrap,1==f&&condition.areaContent.insertAdjacentHTML("beforeend",l()))}function g(t){let e=null,n=t.ctrlKey||t.metaKey,o=document.createEvent("HTMLEvents");if(o.initEvent("click",!0,!1),1==n){switch(t.keyCode){case 73:t.preventDefault(),e=condition.btnToggleItalic;break;case 66:t.preventDefault(),e=condition.btnToggleBold}null!==e&&e.dispatchEvent(o)}}function h(t,e,n=o(t,NodeList),i=o(e,"number")){let a,d,s,c=-1,l="",r="";for(let n=0;n<e;n+=1)if(t[n]==condition.baseNode){c=n;break}if(c<0)for(let n=0;n<e;n+=1)if(t[n]==condition.baseNode.parentNode){c=n;break}a=t[c],s=a.constructor.name,d=a.textContent,r+="Text"==s?a.textContent:a.outerHTML;for(let n=0;n<e;n+=1){let e=t[n].constructor.name;n>c?r+="Text"==e?t[n].textContent:t[n].outerHTML:n<c&&(l+="Text"==e?t[n].textContent:t[n].outerHTML)}return l+="Text"==s?a.textContent:a.outerHTML,{beforeHTML:l,afterHTML:r,beforeText:d.substring(0,condition.baseOffset),afterText:d.substring(condition.baseOffset,d.length),childNumber:c}}},function(t,e,n){"use strict";n.r(e),n.d(e,"contentPasteEvent",(function(){return c}));const{typeCheckThrow:o}=n(0),{findParentByClass:i}=n(1),{setCursor:a}=n(3),{fileUpload:d}=n(12),{setSelection:s}=n(6);function c(t,e=o(t,"event")){t.preventDefault();let n=window.getSelection(),s=i(t.target,"djs-item").dataset.type,c=function(t,e=o(t,"datatransfer")){if(!1===t)return;let n=t.items;if(void 0===n)return;let i,a,d=n.length;for(let t=0;t<d;t+=1){if(0===n[t].type.indexOf("image")){i="image",a=n[t].getAsFile();break}i="text"}"text"===i&&(a=t.getData("text"));return{type:i,value:a}}(t.clipboardData||window.clipboardData);if("text"==c.type){let t;c="codeblock"!=s?c.value.replaceAll("\n","").replaceAll(/  +/g," "):c.value,t=document.createTextNode(c),n.deleteFromDocument(),n.getRangeAt(0).insertNode(t),a(t,t.length)}else{if(""===condition.mediaURL)return void console.warn('DRAGON EDITOR - If you want upload image? set "uploadURL" first.');{let t=condition.uploadForm,e=new FormData(t);e.append("type",t.dataset.type),e.append("file",c.value),e.append("articleIdx",condition.articleIdx),e.append("articleTempIdx",condition.articleTempIdx),d(e)}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"changeTableCell",(function(){return l})),n.d(e,"tableCellControl",(function(){return r})),n.d(e,"setTableColSize",(function(){return u}));const{typeCheckThrow:o}=n(0),{openOptionPop:i}=n(5),{setCursor:a}=n(3),{findParentByClass:d,findContenteditable:s,getChild:c}=n(1);function l(t,e=o(t,"string")){let n=s(condition.baseNode),d=n.innerHTML;n.insertAdjacentHTML("afterend",`<${t} contenteditable="true">${d}</${t}>`),a(n.nextElementSibling,0),condition.activeElement=n.nextElementSibling,n.remove(),i()}function r(t,e,n,i,s=o(t,"string"),l=o(e,"string"),r=o(n,"string"),u=o(i,"string")){let f,p=d(condition.baseNode,"djs-item"),b=c(p,"col"),g=c(p,"tr");if(n=parseInt(n),i=parseInt(i),"row"==t){if(1==g.length&&"delete"==e)return;let t="";t+="<tr>",b.forEach((e,n)=>{t+=`<td contenteditable="true" data-x="${n}" data-y="${i+1}"></td>`}),t+="</tr>",g.forEach((n,o)=>{if(o==i)"add"==e?n.insertAdjacentHTML("afterend",t):n.remove();else if(o>i){c(n,"*[data-x]").forEach(t=>{let n=parseInt(t.dataset.y);t.dataset.y="add"==e?n+1:n-1})}}),f=c(p,"add"==e?`td[data-x="${n}"][data-y="${i+1}"]`:`*[data-x="${n}"][data-y="${i-1}"]`,!1)}else if("col"==t){if(1==b.length&&"delete"==e)return;g.forEach(t=>{c(t,"*[data-x]").forEach((t,o)=>{let i=parseInt(t.dataset.x),a=parseInt(t.dataset.y);"add"==e?o==n?t.insertAdjacentHTML("afterend",`<td contenteditable="true" data-x="${n+1}" data-y="${a}"></td>`):o>n&&(t.dataset.x=i+1):o==n?t.remove():o>n&&(t.dataset.x=i-1)})}),"add"==e?(b[n].insertAdjacentHTML("afterend",'<col data-size="100">'),f=c(p,`*[data-x="${n+1}"][data-y="${i}"]`,!1)):(b[n].remove(),f=c(p,`*[data-x="${n-1}"][data-y="${i}"]`,!1))}null!==f&&a(f,0)}function u(t,e=o(t,"string")){let n=d(condition.baseNode,"djs-item"),i=s(condition.baseNode),a=parseInt(i.dataset.x);c(n,"col")[a].dataset.size=t}}])}));