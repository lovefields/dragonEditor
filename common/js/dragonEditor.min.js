!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dragonEditor",[],t):"object"==typeof exports?exports.dragonEditor=t():e.dragonEditor=t()}(window,(function(){return function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){"use strict";function s(e){return document.querySelector(e)}function n(e){let t=document.querySelectorAll(e);return t.length<1?null:t}function o(e,t){if("HTMLBodyElement"!==e.constructor.name&&"HTMLHtmlElement"!==e.constructor.name){return!0===e.classList.contains(t)?e:o(e.parentElement,t)}return null}function i(e,t,a="single"){let o;if(o="single"===a?s("string"!=typeof e?t:e):n("string"!=typeof e?t:e),null!==o)return o;console.error("Can not find Element : "+e)}a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}))},function(e,t,a){"use strict";var s=a(0);function n(e,t){let a=null===Object(s.b)(e,"item")?Object(s.b)(e,"btn"):Object(s.b)(e,"item");t.forEach((function(e){e.classList.remove("lastset")})),a.classList.add("lastset")}function o(e,t){if(storage.classList.indexOf(t)>=0){let a=e.match(storage.classReg[t]);return""!==e&&null!==a?a[0]:""}console.warn(`You send wrong type name : [${t}]`)}function i(e){let t,a=e.constructor.name;if("HTMLBodyElement"!==a){return t="Text"===a?e.parentElement:e,"true"===t.getAttribute("contenteditable")?t:i(t.parentElement)}return null}function l(e){!0===e.classList.contains("lastset")&&e.classList.remove("lastset")}function r(e,t){let a=Math.floor(e.top-storage.popOptionHeight),s=storage.popOptions.querySelectorAll(".col"),n=new RegExp(t,"i"),o=0;storage.popOptions.classList.add("act"),storage.popOptions.querySelector(".pop").classList.remove("act"),null!==s&&s.forEach((function(e){let t=e.dataset.group;switch(!0){case"all"===t:case!0===n.test(t):e.classList.add("act"),o+=e.getBoundingClientRect().width;break;case!1===n.test(t):e.classList.remove("act")}}));let i=Math.floor((storage.windowWidth-storage.popOptions.getBoundingClientRect().width)/2);storage.windowWidth>storage.changePint?storage.popOptions.style.cssText="transform:translate("+i+"px, "+a+"px)":(storage.popOptions.removeAttribute("style"),storage.popOptions.querySelector(".scroll").style.width=`${o}px`)}function c(e){let t=Object(s.b)(e,"item");t=null===t?Object(s.b)(e,"btn"):t;let a=storage.activeElement;if(null!==t){let e=t.dataset.type,s=a.constructor.name,n=t.classList.value,i=a.classList.value;switch(storage.urlInput.value="",e){case"text":let e=o(n,"color"),a=o(n,"size");storage.btnColorSelect.dataset.class=""!==e?e:"default",storage.fontSizeSelect.value=""!==a?a:"default";break;case"image":let s=t.querySelector(".img").getAttribute("width");storage.widthInput.value=s;break;case"youtube":if(!1===t.classList.contains("btn")){let e=t.querySelector(".video").getAttribute("src");storage.urlInput.value=e}else storage.urlInput.value="";break;case"codepen":if(!1===t.classList.contains("btn")){let e=t.querySelector(".iframe"),a=e.getAttribute("src"),s=e.getAttribute("height");storage.urlInput.value=a,storage.heightInput.value=s}else storage.urlInput.value="",storage.heightInput.value="";break;case"list_o":let i=t.getAttribute("type");storage.listTypeSelect.value=i;break;case"codeblock":let l=t.dataset.theme,r=t.dataset.lang,c=o(n,"size");storage.fontSizeSelect.value=""!==c?c:"default",storage.themeSelect.value=l,storage.languageSelect.value=r}switch(!0){case"HTMLAnchorElement"===s:let e=a.getAttribute("href");storage.urlInput.value=e;break;case("HTMLTableCellElement"===s||"HTMLTableCaptionElement"===s)&&"table"===t.dataset.type:if("HTMLTableCellElement"===s){let e=parseInt(a.dataset.x)+1,s=t.querySelector("col:nth-child("+e+")").classList.value;storage.colSizeSelect.value=o(s,"size")}let n=o(i,"color"),l=o(i,"size");storage.btnColorSelect.dataset.class=""!==n?n:"default",storage.fontSizeSelect.value=""!==l?l:"default";break;case"HTMLSpanElement"===s||"HTMLElement"===s:let r=o(i,"color");storage.btnColorSelect.dataset.class=""!==r?r:"default";break;case"HTMLLIElement"===s:let c=o(i,"color"),d=o(i,"size");storage.btnColorSelect.dataset.class=""!==c?c:"default",storage.fontSizeSelect.value=""!==d?d:"default"}}}function d(e,t){"click"===t&&(storage.activeElement=e);let a=function(e){let t,a=null;if("HTMLBodyElement"!==document.activeElement.constructor.name)switch(storage.activeElement.constructor.name){case"HTMLSpanElement":case"HTMLElement":case"HTMLAnchorElement":t=storage.activeElement;break;case"Text":t=Object(s.b)(storage.activeElement.parentElement,"item");break;default:t=Object(s.b)(storage.activeElement,"item")}else t=Object(s.b)(e,"item"),a=null===t?Object(s.b)(e,"btn"):t;return null===t?a:t}(e),o=window.getSelection().baseOffset,i=window.getSelection().extentOffset;if(null!==a){let e=a.getBoundingClientRect(),l=a.dataset.type,c=Object(s.d)(storage.contentAreaName+" > *"),d=a.classList.contains("btn");switch(!0){case"CODE"===a.tagName&&"PRE"===a.parentElement.tagName:l="codeblock";break;case"HTMLElement"===a.constructor.name&&a.classList.contains("wordblock"):l="wordblock";break;case"HTMLAnchorElement"===a.constructor.name:l="link";break;case!0===d&&"click"===t:if(void 0!==a.dataset.value){let e=a.dataset.value;"image"===e?(storage.fileInput.dataset.type="image",storage.fileInput.setAttribute("accept","image/*"),storage.fileInput.click()):l=e}break;case window.getSelection().focusNode!==window.getSelection().baseNode:l="text";break;case o!==i:"BLOCKQUOTE"!==a.tagName&&(storage.focusNode=window.getSelection().focusNode,storage.baseNode=window.getSelection().baseNode,storage.startTextCursor=o,storage.endTextCursor=i,l="word");break;case void 0===l:l="all";break;default:l=l}if("click"===t)n(a,c),r(e,l);else if("mouseover"===t)if("youtube"!==l&&"codepen"!==l||!1!==d){if(!0===d){"image"===a.dataset.value?r(e,l):storage.popOptions.classList.remove("act")}}else n(a,c),r(e,l)}}function g(e,t="",a="afterend"){l(e);let s=storage.HTMLTextBlock.replace("[content]",t);e.insertAdjacentHTML(a,s),setTimeout(()=>{e.nextElementSibling.focus()},10)}function u(e,t,a,s){l(e);let n=storage.HTMLBtn.replace(/\[icon_id\]/g,t).replace(/\[type\]/g,a).replace(/\[text\]/g,s);e.insertAdjacentHTML("afterend",n)}function p(e,t,a=null,s=""){let n;l(e),n="ol"===t?"list_o":"list_u";let o=null===a?"":'type="'+a+'"',i=storage.HTMLChildList.replace(/\[content\]/g,s),r=storage.HTMLList.replace(/\[tag\]/g,t).replace("[dataType]",n).replace("[type]",o).replace("[child]",i);e.insertAdjacentHTML("afterend",r),e.nextElementSibling.children[0].focus()}function m(e){let t=storage.activeElement,a=t.tagName,s=t.innerHTML;if(a!==e.toUpperCase()){let a=t.dataset.x,n=t.dataset.y;t.insertAdjacentHTML("afterend",`<${e} contenteditable="true" data-x="${a}" data-y="${n}">${s}</${e}>`),storage.activeElement=t.nextElementSibling,t.nextElementSibling.focus(),t.remove()}}function b(e,t,a="afterend"){l(e),""===t.img&&(t.img=storage.defaultLinkBoxImage);let s=storage.HTMLLinkBox.replace("[url]",t.url).replace("[imgSrc]",t.img).replace("[title]",t.title).replace("[description]",t.description).replace("[domain]",t.domain);e.insertAdjacentHTML(a,s)}function h(e,t,a="afterend"){let s,n;if(l(e),n=100/t.width*t.height>100?300:t.width,n>storage.maxImageWidth&&(n=storage.maxImageWidth),!0===storage.useWebp==1)if(s=storage.HTMLImageType01.replace("[src]",`${t.src}.${t.format}`).replace("[alt]",t.alt).replace("[width]",n),!0===t.webp){let e=storage.HTMLImageSource.replace("[webp]",`${t.src}.webp`);s=s.replace("[source]",e)}else s=s.replace("[source]","");else s=storage.HTMLImageType02.replace("[src]",`${t.src}.${t.format}`).replace("[alt]",t.alt).replace("[width]",n);e.insertAdjacentHTML(a,s)}function f(){let e=storage.urlInput.value;if(!0===storage.urlReg.test(e)){!0===(storage.focusNode===storage.baseNode)?v("link",e):alert(storage.messageWrongNode)}else alert(storage.messageWrongURL)}function y(e,t,a){if(storage.focusNode===storage.baseNode){let s=storage.activeElement,n=s.constructor.name,o=i(s);if("HTMLAnchorElement"===n||"HTMLSpanElement"===n||"HTMLElement"===n){let n=s.classList,i=n.length,l=s.textContent;s.tagName===t?i>0?(s.insertAdjacentHTML("afterend",`<span class="${n.value}">${l}</span>`),storage.activeElement=s.nextElementSibling,s.remove()):(s.insertAdjacentText("afterend",l),s.remove(),o.innerHTML=o.innerHTML,storage.activeElement=storage.wrap):"SPAN"===s.tagName?i>0?(s.insertAdjacentHTML("afterend",`<${e} class="${n.value}">${l}</${e}>`),storage.activeElement=s.nextElementSibling,s.remove()):(s.insertAdjacentHTML("afterend",`<${e}>${l}</${e}>`),storage.activeElement=s.nextElementSibling,s.remove()):!0===s.classList.contains(a)?s.classList.remove(a):s.classList.add(a)}else window.getSelection().focusOffset!==window.getSelection().baseOffset?v(a):!0===s.classList.contains(a)?s.classList.remove(a):s.classList.add(a)}else alert(storage.messageWrongNode)}function v(e,t=null,a=null){let s=storage.focusNode.textContent,n=i(storage.focusNode);n.innerHTML=n.innerHTML;let o,l,r,c,d=n.childNodes,g=d.length,u="";for(let e=0;e<g;e+=1)if("Text"===d[e].constructor.name&&s===d[e].textContent){o=e;break}switch(storage.startTextCursor>storage.endTextCursor?(l=storage.endTextCursor,r=storage.startTextCursor):(l=storage.startTextCursor,r=storage.endTextCursor),e){case"link":c=`${s.substring(0,l)}<a href="${t}" rel="nofollow">${s.substring(l,r)}</a>${s.substring(r)}`;break;case"bold":c=`${s.substring(0,l)}<b>${s.substring(l,r)}</b>${s.substring(r)}`;break;case"italic":c=`${s.substring(0,l)}<i>${s.substring(l,r)}</i>${s.substring(r)}`;break;case"underline":c=`${s.substring(0,l)}<u>${s.substring(l,r)}</u>${s.substring(r)}`;break;case"strike":c=`${s.substring(0,l)}<s>${s.substring(l,r)}</s>${s.substring(r)}`;break;case"wordblock":c=`${s.substring(0,l)}<code class="wordblock">${s.substring(l,r)}</code>${s.substring(r)}`;break;case"color":c=`${s.substring(0,l)}<span class="${a}">${s.substring(l,r)}</span>${s.substring(r)}`}for(let e=0;e<g;e+=1)e!==o?"Text"===d[e].constructor.name?u+=d[e].textContent:u+=d[e].outerHTML:u+=c;n.innerHTML=u}function L(e,t={},a="form"){let s=new FormData;if("json"===a){for(let e in t.body)s.append(e,t.body[e]);t.body=s}return fetch(e,t).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")})}function x(){let e,t,a;window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout(()=>{storage.windowWidth=window.innerWidth,storage.windowHeight=window.innerHeight},250)})),document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("mouseup",(function(e){!function(e){if("object"==typeof e){let t=e.target;if(0===e.button){let e=Object(s.b)(t,"pop"),a=Object(s.b)(t,"btn_pop");Object(s.d)(".pop").forEach((function(e){null===a&&e.classList.remove("act")})),null!==e&&e.classList.add("act")}}}(e)})),storage.popBtns.forEach((function(e){e.addEventListener("click",(function(){let e=this.dataset.target,t=this.dataset.type,a=Object(s.c)(e),n=this.getBoundingClientRect(),o=storage.popOptions.getBoundingClientRect();if(a.removeAttribute("style"),a.classList.toggle("act"),"position"===t&&storage.windowWidth>storage.changePint){let e=Math.floor(n.left-o.left);a.style.cssText=`transform:translate(${e}px, 30px)`}else this.classList.toggle("act")}))})),storage.popCloseBtns.forEach((function(e){e.addEventListener("click",(function(){let e=this.dataset.target,t=Object(s.c)(e);t.removeAttribute("style"),t.classList.toggle("act")}))})),document.addEventListener("keydown",(function(e){if("HTMLBodyElement"===document.activeElement.constructor.name){let t;!0!==e.ctrlKey&&!0!==e.metaKey||(t=!0),"z"===e.key&&(!0===t?e.preventDefault():!0===t&&!0===e.shiftKey&&e.preventDefault())}})),document.addEventListener("paste",(function(e){console.log("paste",e)})),window.addEventListener("scroll",(function(e){storage.windowWidth>storage.changePint&&(document.activeElement.blur(),storage.popOptions.classList.remove("act"))})),storage.contentArea.addEventListener("click",(function(e){clearTimeout(t),t=setTimeout(()=>{0!==e.button&&!1!==e.isTrusted||(d(e.target,"click"),c(e.target),function(e){let t=e.constructor.name,a=e.classList;if("HTMLButtonElement"===t){let e=document.querySelector(".lastset .item_table"),t=e.querySelector("colgroup"),s=e.querySelectorAll("col").length,n=e.querySelectorAll("tr"),o=e.querySelector("tbody");switch(!0){case a.contains("btn_col_add"):n.forEach((function(e){let t=e.querySelector("*:nth-child(1)").dataset.y;e.insertAdjacentHTML("beforeend",`<td contenteditable="true" data-x="${s}" data-y="${t}"></td>`)})),t.insertAdjacentHTML("beforeend",'<col class="size_100">');break;case a.contains("btn_col_del"):if(s>1){let e=t.querySelector("*:last-child");n.forEach((function(e){e.querySelector("*:last-child").remove()})),e.remove()}break;case a.contains("btn_row_add"):let e="<tr>";for(let t=0;t<s;t+=1)e+=`<td contenteditable="true" data-x="${t}" data-y="${n.length}"></td>`;e+="</tr>",o.insertAdjacentHTML("beforeend",e);break;case a.contains("btn_row_del"):n.length>1&&o.querySelector("tr:last-child").remove()}}}(e.target))},150)})),storage.contentArea.addEventListener("mouseover",(function(e){clearTimeout(a),a=setTimeout(()=>{storage.windowWidth>storage.changePint&&(d(e.target,"mouseover"),c(e.target))},250)})),storage.contentArea.addEventListener("keydown",(function(e){!async function(e){let t=window.getSelection(),a=e.key,n=e.shiftKey,o="HTMLBodyElement"!==document.activeElement.constructor.name&&document.activeElement,i=Object(s.b)(o,"item"),l=o.tagName,c=o.textContent;switch(!1!==o&&(storage.activeElement=document.activeElement),!0){case"Enter"===a&&!1!==o:if(!0!==n&&(e.preventDefault(),0===storage.enterCount)){if("LI"===l)if(""===c){let e=i.querySelectorAll("li").length;g(i),e>1&&o.remove()}else o.insertAdjacentHTML("afterend",storage.HTMLChildList.replace("[content]","")),setTimeout(()=>{o.nextElementSibling.focus()},10);else{g(i);let e=i.nextElementSibling;storage.activeElement=e,r(e.getBoundingClientRect(),"text")}storage.enterCount+=1}break;case"Tab"===a&&!1!==o:if(!0===n)!0===o.classList.contains("title")&&e.preventDefault();else{storage.contentArea.querySelector(".item:nth-last-child(1)")===i&&e.preventDefault()}break;case"Backspace"===a&&!1!==o:console.log(t.focusNode,o.childNodes[0]),console.log(0===t.focusOffset,t.focusNode===i.childNodes[0]),0===t.focusOffset&&t.focusNode===i.childNodes[0]&&console.log("y")}}(e),setTimeout(()=>{storage.enterCount=0},150)})),storage.contentAddBtn.forEach((function(e){e.addEventListener("click",(function(){let e=this.dataset.value,t=storage.contentArea.childElementCount,a=Object(s.c)(".lastset"),n=null===a?storage.contentArea.children[t-1]:a;switch(e){case"text":g(n);break;case"image":u(n,storage.imageIconId,"image","Add on image"),storage.fileInput.dataset.type="image",storage.fileInput.setAttribute("accept","image/*"),storage.fileInput.click();break;case"sticker":!function(e,t){l(e);let a=storage.HTMLsticker.replace("[el]",t.innerHTML);e.insertAdjacentHTML("afterend",a)}(n,this);break;case"youtube":u(n,storage.youtubeIconId,"youtube","Add Youtube");break;case"codepen":u(n,storage.codepenIconId,"codepen","Add Codepen");break;case"bulletedlist":p(n,"ul");break;case"numberedlist":p(n,"ol","1");break;case"quote":!function(e){l(e),e.insertAdjacentHTML("afterend",storage.HTMLQuote),e.nextElementSibling.children[0].focus()}(n);break;case"table":!function(e){l(e),e.insertAdjacentHTML("afterend",storage.HTMLTable),e.nextElementSibling.querySelector("caption").focus()}(n);break;case"codeblock":!function(e){l(e),e.insertAdjacentHTML("afterend",storage.HTMLCodeBlock),e.nextElementSibling.children[0].focus()}(n);break;case"link":b(n,storage.linkBoxData),storage.popLink.classList.remove("act"),storage.popLink.querySelector(".url").value="",storage.popLink.querySelector(".view").innerHTML="",storage.popLink.querySelector(".btn_submit").setAttribute("disabled","true")}}))})),storage.viewBtn.addEventListener("click",(function(){storage.editorSection.classList.toggle("mobile"),this.classList.toggle("act")}));let n=Object(s.c)(storage.popLinkName+" .btn_check");null!==n?n.addEventListener("click",(async function(){let e={},t=Object(s.c)(storage.popLinkName+" .view"),a=Object(s.c)(storage.popLinkName+" .btn_submit"),n=Object(s.c)(storage.popLinkName+" .url").value;if(!0===storage.urlReg.test(n)){if(e.url=n,""===storage.linkBoxApi){let s=(await L(`https://api.allorigins.win/get?url=${encodeURIComponent(n)}`)).contents;if(null!==s){let o=new RegExp('property=\\"og:title\\"',"g"),i=new RegExp('([^])*\\<title>([^"]*)<\\/title>([^]*)',"g"),l=new RegExp('([^])*\\<meta property=\\"og:title\\" content=\\"([^"]*)"\\>([^]*)',"g"),r=new RegExp('property=\\"og:image\\"',"g"),c=new RegExp('([^])*\\<meta name=\\"image\\" content=\\"([^"]*)"\\>([^]*)',"g"),d=new RegExp('([^])*\\<meta property=\\"og:image\\" content=\\"([^"]*)"\\>([^]*)',"g"),g=new RegExp('property=\\"og:description\\"',"g"),u=new RegExp('([^])*\\<meta name=\\"description\\" content=\\"([^"]*)"\\>([^]*)',"g"),p=new RegExp('([^])*\\<meta property=\\"og:description\\" content=\\"([^"]*)"\\>([^]*)',"g");if(o.test(s)?e.title=s.replace(l,"$2"):e.title=s.replace(i,"$2"),r.test(s))e.img=s.replace(d,"$2");else{let t=s.replace(c,"$2");t.length>500?e.img="":e.img=t}if(g.test(s))e.description=s.replace(p,"$2");else{let t=s.replace(u,"$2");t.length>500?e.description="":e.description=t}n.indexOf("://")>-1?e.domain=n.split("/")[2]:e.domain=n.split("/")[0],e.domain=e.domain.split(":")[0],storage.linkBoxData=e,a.removeAttribute("disabled"),b(t,e,"afterbegin")}else a.setAttribute("disabled","true"),t.innerHTML=storage.messageNoData}}else alert(storage.messageWrongURL)})):console.warn("We need link check button from "+storage.popLinkName),storage.contentDelBtn.addEventListener("click",(function(){let e=Object(s.c)(".lastset");if(null!==e){e.remove(),storage.popOptions.classList.remove("act"),1===storage.contentArea.childElementCount&&g(storage.contentArea,"","beforeend")}else alert(storage.messageNotSelect)})),storage.fontSizeSelect.addEventListener("change",(function(){!function(e){let t=i(storage.activeElement),a=o(t.classList.value,"size");"default"===e?""!==a&&t.classList.remove(a):(""!==a&&t.classList.remove(a),t.classList.add(e))}(this.value)})),storage.btnColor.forEach((function(e){e.addEventListener("click",(function(){!function(e){let t=["I","B","S","U","A","SPAN"],a=storage.activeElement,s=a.tagName,n=i(a);if(window.getSelection().focusNode===window.getSelection().baseNode)if(t.indexOf(s)>0){let t=o(a.classList.value,"color");if(""!==t&&a.classList.remove(t),"default"!==e)a.classList.add(e);else if("SPAN"===s){let e=a.textContent;a.insertAdjacentText("afterend",e),a.remove(),n.innerHTML=n.innerHTML,storage.activeElement=storage.wrap}storage.btnColorSelect.dataset.class=e}else{let t=o(n.classList.value,"color");storage.startTextCursor===storage.endTextCursor?(""!==t&&n.classList.remove(t),"default"!==e&&n.classList.add(e),storage.btnColorSelect.dataset.class=e):v("color",null,e)}else alert(storage.messageWrongNode)}(this.dataset.class)}))})),storage.addLinkBtn.addEventListener("click",(function(){f()})),storage.unlinkBtn.addEventListener("click",(function(){!function(){let e=storage.activeElement,t=i(e);if("HTMLAnchorElement"===e.constructor.name){let a=e.textContent;e.insertAdjacentText("afterend",a),e.remove(),t.innerHTML=t.innerHTML}else alrt(storage.messageNotAnchorTag)}()})),storage.boldBtn.addEventListener("click",(function(){y("b","B","bold")})),storage.italicBtn.addEventListener("click",(function(){y("i","I","italic")})),storage.underlineBtn.addEventListener("click",(function(){y("u","U","underline")})),storage.strikeBtn.addEventListener("click",(function(){y("s","S","strike")})),storage.wordblockBtn.addEventListener("click",(function(){!function(){if(window.getSelection().focusNode===window.getSelection().baseNode){let e=storage.activeElement,t=e.tagName,a=i(e),s=e.textContent;"CODE"===t?(e.insertAdjacentText("afterend",s),e.remove(),a.innerHTML=a.innerHTML,storage.activeElement=storage.wrap):v("wordblock")}else alert(storage.messageWrongNode)}()})),storage.widthInput.addEventListener("keyup",(function(e){if("Enter"===e.key){!function(e,t){let a=Object(s.c)(".lastset .img"),n=storage.messageExceedSize.replace("[size]",storage.maxImageWidth);if(null!==a)if(storage.numberReg.test(t)){t<=storage.maxImageWidth?a.setAttribute("width",t):(alert(n),e.value=storage.maxImageWidth,a.setAttribute("width",storage.maxImageWidth)),r(Object(s.c)(".lastset").getBoundingClientRect(),"image")}else alert(storage.messageWrongValue);else alert(storage.messageNotSelecImage)}(this,this.value)}})),storage.heightInput.addEventListener("keyup",(function(e){if("Enter"===e.key){let e=this.value,t=Object(s.c)(".lastset .iframe"),a=storage.messageExceedSize.replace("[size]",storage.maxCodepenHeight);if(null!==t)if(storage.numberReg.test(e)){e<=storage.maxCodepenHeight?t.setAttribute("height",e):(alert(a),this.value=storage.maxCodepenHeight,t.setAttribute("height",storage.maxCodepenHeight)),r(Object(s.c)(".lastset").getBoundingClientRect(),"codepen")}else alert(storage.messageWrongValue);else alert(storage.messageNotSelecCodepen)}})),storage.listTypeSelect.addEventListener("change",(function(){let e=this.value,t=Object(s.c)(".lastset");!1!==t&&t.setAttribute("type",e)})),storage.colSizeSelect.addEventListener("change",(function(){let e=this.value,t=storage.activeElement.constructor.name,a=Object(s.c)(".lastset");if(("HTMLTableCellElement"===t||"HTMLTableCaptionElement"===t)&&null!==a){let t=parseInt(storage.activeElement.dataset.x)+1,s=a.querySelector(`col:nth-child(${t})`),n=o(s.classList.value,"size");s.classList.remove(n),s.classList.add(e)}})),storage.themeSelect.addEventListener("change",(function(){let e=this.value,t=Object(s.c)(".lastset");null!==t&&(t.dataset.theme=e)})),storage.languageSelect.addEventListener("change",(function(){let e=this.value,t=Object(s.c)(".lastset");if(null!==t){let a=t.childNodes[0];t.dataset.lang=e,a.classList.value="",a.classList.add(e),hljs.highlightBlock(a)}})),storage.changeThBtn.addEventListener("click",(function(){m("th")})),storage.changeTdBtn.addEventListener("click",(function(){m("td")})),storage.textAlgin.forEach((function(e){e.addEventListener("click",(function(){!function(e){let t=null===i(storage.activeElement)?Object(s.b)(storage.activeElement,"item"):i(storage.activeElement),a=o(t.classList.value,"align");""!==a&&t.classList.remove(a),t.classList.add(e)}(this.dataset.value)}))})),storage.changeUrlBtn.addEventListener("click",(function(){let e=storage.urlInput.value,t=Object(s.c)(".lastset"),a=t.dataset.type;switch(!0){case!1===storage.urlReg.test(e):alert(storage.messageWrongURL);break;case void 0===t:alert(storage.messageNotSelect);break;case"youtube"===a:if(storage.youtubeReg.test(e)){let a=e.replace(storage.youtubeCodeReg,"$7");t.querySelector(".video").setAttribute("src",`https://www.youtube.com/embed/${a}`)}else alert(storage.messageWrongUrlType);break;case"codepen"===a:if(storage.codepenReg.test(e)){let a=t.querySelector(".iframe"),s=a.getAttribute("height"),n=e.replace(storage.codepenCodeReg,"$2"),o=e.replace(storage.codepenCodeReg,"$4");a.setAttribute("src",`https://codepen.io/${n}/embed/${o}?height=${s}&theme-id=${storage.codepenTheme}&default-tab=result`)}else alert(storage.messageWrongUrlType);break;case"btn"===a:let s=t.dataset.value;"youtube"===s?(!function(e,t,a="afterend"){l(e);let s=t.replace(storage.youtubeCodeReg,"$7"),n=storage.HTMLYoutube.replace("[src]",`https://www.youtube.com/embed/${s}`);e.insertAdjacentHTML(a,n)}(t,e),t.remove(),storage.activeElement=storage.contentArea):"codepen"===s&&(!function(e,t,a="afterend",s=300){l(e);let n=t.replace(storage.codepenCodeReg,"$2"),o=t.replace(storage.codepenCodeReg,"$4"),i=storage.HTMLCodepen.replace("[src]",`https://codepen.io/${n}/embed/${o}?height=${s}&theme-id=${storage.codepenTheme}&default-tab=result`).replace("[height]",s);e.insertAdjacentHTML(a,i)}(t,e),t.remove(),storage.activeElement=storage.contentArea)}})),storage.fileInput.addEventListener("change",(async function(){let e=storage.contentArea,t=this.files,a=new FormData,n=this.dataset.type,o=e.dataset.idx,i=e.dataset.tempIdx;a.append("request_ype","upload"),a.append("file_type",n);for(let e of t)a.append("file[]",e);a.append("article_idx",o),a.append("temp_idx",i);let l=await L(storage.mediaUploadURL,{method:"POST",body:a});if(!0===l.result){let e=null===Object(s.c)(".lastset")?Object(s.c)(`${storage.contentAreaName} > *:nth-last-child(1)`):Object(s.c)(".lastset"),t=l.list,a="";for(let s of t){let t="y"===s.webp;a+=storage.HTMLMediaRow.replace(/\[idx\]/g,s.idx).replace("[webp]",t).replace("[height]",s.height).replace("[width]",s.width).replace("[src]",`${s.src}${s.name}.${s.format}`).replace("[alt]",s.alt).replace("[name]",s.alt),h(e,{idx:s.idx,src:`${s.src}${s.name}`,webp:t,format:s.format,alt:s.alt,width:s.width,height:s.height})}e.classList.contains("btn")&&e.remove(),storage.mediaList.insertAdjacentHTML("beforeend",a),storage.popMedia.classList.add("act"),this.value=""}else alert(l.message)})),storage.addMediaListBtn.addEventListener("click",(function(){storage.fileInput.dataset.type="image",storage.fileInput.setAttribute("accept","image/*"),storage.fileInput.click()})),storage.popMedia.addEventListener("click",(async function(e){let t,a=e.target,n=Object(s.b)(a,"btn_add_media"),o=this.querySelector("*[contenteditable]");switch(a.tagName){case"IMG":let e=a.getAttribute("src"),i=null===Object(s.c)(".lastset")?Object(s.c)(`${storage.contentAreaName} > *:nth-last-child(1)`):Object(s.c)(".lastset");t={width:a.getAttribute("width"),height:a.dataset.height,webp:n.dataset.webp,alt:n.querySelector(".name").textContent,src:e.replace(storage.srcReg,"$1"),format:e.replace(storage.srcReg,"$2")},h(i,t);break;case"P":if(null!==o){n=Object(s.b)(o,"btn_add_media"),o.removeAttribute("contenteditable"),t={idx:n.dataset.idx,textContent:o.textContent};let e=await L(storage.mediaUpdateURL,{method:"POST",body:t},"json");if(!0===e.result){let e=n.querySelector(".img").getAttribute("src");storage.contentArea.querySelectorAll(`*[src="${e}"]`).forEach((function(e){e.setAttribute("alt",o.textContent)}))}else alert(e.message)}a.setAttribute("contenteditable",!0),a.focus();break;case"BUTTON":if(!1===a.classList.contains(storage.addMediaListBtnName.substring(1))){let e=n.dataset.idx;if(!0===confirm(storage.messageDelImage)){let t=await L(`${storage.mediaDelURL}/${e}`,{method:"delete"});if(!0===t.result){let e=n.querySelector(".img").getAttribute("src");storage.contentArea.querySelectorAll(`*[src="${e}"]`).forEach((function(e){e.remove(),n.remove()}))}else alert(t.message)}}break;default:if(null!==o){n=Object(s.b)(o,"btn_add_media"),t={idx:n.dataset.idx,textContent:o.textContent},o.removeAttribute("contenteditable");let e=await L(storage.mediaUpdateURL,{method:"POST",body:t},"json");if(!0===e.result){let e=n.querySelector(".img").getAttribute("src");storage.contentArea.querySelectorAll(`*[src="${e}"]`).forEach((function(e){e.setAttribute("alt",o.textContent)}))}else alert(e.message)}}})),storage.popMedia.addEventListener("keydown",(async function(e){if("Enter"===e.key){e.preventDefault();let t=Object(s.b)(e.target,"btn_add_media"),a=e.target.textContent,n={idx:t.dataset.idx,textContent:a},o=await L(storage.mediaUpdateURL,{method:"POST",body:n},"json");if(!0===o.result){let e=t.querySelector(".img").getAttribute("src");storage.contentArea.querySelectorAll(`*[src="${e}"]`).forEach((function(e){e.setAttribute("alt",$p.textContent)}))}else alert(o.message);e.target.removeAttribute("contenteditable")}})),storage.languageChangeBtn.forEach((function(e){e.addEventListener("click",(function(){let e=storage.langStatus,t=k(),a=this.dataset.value,s=storage.contentData[a];if(storage.contentData[e]=t,storage.langStatus=a,storage.languageChangeBtn.forEach((function(e){e.classList.remove("act")})),this.classList.add("act"),s.length>0)w(s);else{w(!0===confirm(storage.messageDuplicateContent)?t:[{type:"title",class:["title"],textContent:""},{type:"text",class:["item"],textContent:""}])}}))}))}function w(e){let t=function(e){let t="";return e.forEach((function(e){switch(e.type){case"title":t+=`<h1 class="${e.class.join(" ")}" contenteditable="true" data-type="${e.type}">${e.textContent}</h1>`;break;case"text":t+=`<p class="${e.class.join(" ")}" contenteditable="true" data-type="${e.type}">${e.textContent}</p>`;break;case"image":!0===storage.useWebp?(t+=`<picture class="${e.class.join(" ")}" data-type="${e.type}">`,!0===e.hasWebp&&(t+=`<source srcset="${e.src}.webp" type="image/webp">`),t+=`<img src="${e.src}.${e.defaultFormat}" width="${e.size}" alt="${e.alt}" class="img"></picture>`):t+=`<div class="${e.class.join(" ")}" data-type="image"><img src="${e.src}.${e.defaultFormat}" width="${e.size}" alt="${e.alt}" class="img"></div>`;break;case"btn":"image"===e.value?(t+=`<div class="btn" data-type="${e.type}" data-value="${e.value}">`,"svg"===e.icon.type?t+=`<svg viewBox="${e.icon.viewBox}" class="${e.icon.class.join(" ")}"><use class="path" xlink:href="${e.icon.url}" href="${e.icon.url}"></use></svg>`:t+=`<img src="${e.icon.url}" alt="image icon" class="">`,t+=`${e.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")}</div>`):"youtube"===e.value?(t+=`<div class="btn" data-type="${e.type}" data-value="${e.value}">`,"svg"===e.icon.type?t+=`<svg viewBox="${e.icon.viewBox}" class="${e.icon.class.join(" ")}"><use class="path" xlink:href="${e.icon.url}" href="${e.icon.url}"></use></svg>`:t+=`<img src="${e.icon.url}" alt="youtube icon" class="">`,t+=`${e.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")}</div>`):"codepen"===e.value&&(t+=`<div class="btn" data-type="${e.type}" data-value="${e.value}">`,"svg"===e.icon.type?t+=`<svg viewBox="${e.icon.viewBox}" class="${e.icon.class.join(" ")}"><use class="path" xlink:href="${e.icon.url}" href="${e.icon.url}"></use></svg>`:t+=`<img src="${e.icon.url}" alt="codepen icon" class="">`,t+=`${e.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")}</div>`);break;case"youtube":t+=`<div class="${e.class.join(" ")}" data-type="${e.type}"><iframe src="${e.src}" allow="${e.allow}" allowfullscreen="" class="video"></iframe></div>`;break;case"codepen":t+=`<div class="${e.class.join(" ")}" data-type="${e.type}"><iframe height="${e.height}" title="" src="${e.src}" allowfullscreen="" class="iframe"></iframe></div>`;break;case"list":let a="";"ol"===e.tag?a="list_o":"ul"===e.tag&&(a="list_u"),null===e.listType?t+=`<${e.tag} class="${e.class.join(" ")}" data-type="${a}">`:t+=`<${e.tag} type="${e.listType}" class="${e.class.join(" ")}" data-type="${a}">`,e.child.forEach((function(e){e.class.length>0?t+=`<li class="${e.class.join(" ")}" contenteditable="true">${e.textContent}</li>`:t+=`<li contenteditable="true">${e.textContent}</li>`})),t+=`</${e.tag}>`;break;case"quote":t+=`<blockquote class="${e.class.join(" ")}" data-type="${e.type}"><p class="text" contenteditable="true">${e.text}</p><p class="author" contenteditable="true">${e.author}</p></blockquote>`;break;case"table":let s=0;t+=`<div class="${e.class.join(" ")}" data-type="${e.type}"><div class="scroll"><table class="item_table"><caption contenteditable="true">${e.caption}</caption><colgroup>`,e.colgroup.forEach((function(e){t+=`<col class="${e}">`})),t+="</colgroup><tbody>",e.child.forEach((function(e){let a=0;t+="<tr>",e.forEach((function(e){e.class.length>0?t+=`<${e.tag} class="${e.class.join(" ")}" contenteditable="true" data-x="${a}" data-y="${s}">${e.textContent}</${e.tag}>`:t+=`<${e.tag} contenteditable="true" data-x="${a}" data-y="${s}">${e.textContent}</${e.tag}>`,a+=1})),t+="</tr>",s+=1})),t+='</tbody></table></div><button class="btn btn_col_add">Add col</button><button class="btn btn_col_del">Remove col</button><button class="btn btn_row_add">Add row</button><button class="btn btn_row_del">Remove row</button></div>';break;case"codeblock":t+=`<pre class="${e.class.join(" ")}" data-type="${e.type}" data-theme="${e.theme}" data-lang="${e.lang}"><code class="${e.code.class.join(" ")}" contenteditable="true">${e.code.innerHTML}</code></pre>`;break;case"link_box":t+=`<div class="${e.class.join(" ")}" data-type="${e.type}"><a href="${e.url}" target="_blank" class="link_box clearfix" draggable="false"><div class="img_area"><img src="${e.imgSrc}" alt="미리보기 이미지" class="img" draggable="false"></div><div class="text_area"><p class="link_title ellipsis">${e.title}</p><p class="link_description ellipsis">${e.description}</p><p class="link_domain">${e.domain}</p></div></a></div>`;break;default:t+=e.other}})),t}(e);storage.contentArea.innerHTML=t}function k(){return function(e){let t=[];return e.forEach(e=>{let a=e.dataset.type;switch(!0){case"title"===a:t.push({type:"title",class:[...e.classList],textContent:e.textContent});break;case"text"===a:t.push({type:"text",class:[...e.classList],textContent:e.innerHTML});break;case"image"===a:let s="PICTURE"===e.tagName,n=e.querySelector(".img"),o=n.getAttribute("src");t.push({type:"image",class:[...e.classList],hasWebp:s,size:n.getAttribute("width"),alt:n.getAttribute("alt"),src:o.replace(storage.srcReg,"$1"),defaultFormat:o.replace(storage.srcReg,"$2")});break;case"youtube"===a:let i=e.querySelector(".video");t.push({type:"youtube",class:[...e.classList],src:i.getAttribute("src"),allow:i.getAttribute("allow")});break;case"codepen"===a:let l=e.querySelector(".iframe");t.push({type:"codepen",class:[...e.classList],src:l.getAttribute("src"),height:l.getAttribute("height"),title:l.getAttribute("title")});break;case"list_u"===a||"list_o"===a:let r=e.querySelectorAll("li"),c=[];r.forEach((function(e){c.push({class:[...e.classList],textContent:e.textContent})})),t.push({type:"list",class:[...e.classList],tag:e.tagName.toLowerCase(),listType:e.getAttribute("type"),child:c});break;case"quote"===a:let d=e.querySelector(".text").textContent,g=e.querySelector(".author").textContent;t.push({type:"quote",class:[...e.classList],text:d,author:g});break;case"table"===a:let u=[],p=[],m=e.querySelector("caption").textContent,b=e.querySelectorAll("col"),h=e.querySelectorAll("tr");b.forEach((function(e){u.push(e.classList.value)})),h.forEach((function(e){let t=[],a=e.childElementCount,s=e.children;for(let e=0;e<a;e+=1)t.push({tag:s[e].tagName.toLowerCase(),class:[...s[e].classList],textContent:s[e].textContent});p.push(t)})),t.push({type:"table",class:[...e.classList],caption:m,colgroup:u,child:p});break;case"codeblock"===a:let f=e.dataset.theme,y=e.dataset.lang,v=e.querySelector("code");t.push({type:"codeblock",class:[...e.classList],theme:f,lang:y,code:{class:[...v.classList],innerHTML:v.innerHTML}});break;case"link_box"===a:let L=e.querySelector(".link_box").getAttribute("href"),x=e.querySelector(".img").getAttribute("src"),w=e.querySelector(".link_title").textContent,k=e.querySelector(".link_description").textContent,$=e.querySelector(".link_domain").textContent;t.push({type:"link_box",class:[...e.classList],url:L,imgSrc:x,title:w,description:k,domain:$});break;case"btn"===a:let T,E=e.querySelector(".icon"),_=E.tagName.toLowerCase();T="svg"===_?E.querySelector("use").getAttribute("href"):E.getAttribute("src"),t.push({type:"btn",value:e.dataset.value,textContent:e.textContent,icon:{type:_,viewBox:E.getAttribute("viewBox"),class:[...E.classList],url:T}});break;case"sticker"===a:t.push({type:"sticker",code:e.innerHTML,class:[...e.classList]});break;default:t.push({type:"other",other:e.outerHTML})}}),t}(Object(s.d)(`${storage.contentAreaName} > *`),storage.srcReg)}a.d(t,"a",(function(){return x})),a.d(t,"c",(function(){return w})),a.d(t,"b",(function(){return k}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(0);class n{constructor(e,t){this.enterCount=0,this.startTextCursor=0,this.endTextCursor=0,this.activeElement,this.focusNode,this.baseNode,this.langStatus="ko",this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.changePint="number"!=typeof t.changePint?1120:t.changePint,this.maxImageWidth="number"!=typeof t.maxImageWidth?800:t.maxImageWidth,this.maxCodepenHeight="number"!=typeof t.maxCodepenHeight?1e3:t.maxCodepenHeight,this.popOptionHeight="number"!=typeof t.popOptionHeight?30:t.popOptionHeight,this.useWebp=!0,this.loading=!0,this.codepenTheme="string"!=typeof t.codepenTheme?"dark":t.codepenTheme,this.multiUpload="boolean"==typeof t.multiUpload&&t.multiUpload,this.mediaUploadURL="string"!=typeof t.mediaUploadURL?"":t.mediaUploadURL,this.mediaUpdateURL="string"!=typeof t.mediaUpdateURL?"":t.mediaUpdateURL,this.mediaDelURL="string"!=typeof t.mediaDelURL?"":t.mediaDelURL,this.linkBoxApi="string"!=typeof t.linkBoxApi?"":t.linkBoxApi,this.defaultLinkBoxImage="string"!=typeof t.defaultLinkBoxImage?"./common/img/img_cover.png":t.defaultLinkBoxImage,this.makeLinkBoxType="self"!=typeof t.makeLinkBoxType?"self":"api",this.makeLinkBoxURL="string"!=typeof t.makeLinkBoxURL?"":t.makeLinkBoxURL,this.imageIconId="string"!=typeof t.imageIconId?"#icon_image":t.imageIconId,this.youtubeIconId="string"!=typeof t.youtubeIconId?"#icon_youtube":t.youtubeIconId,this.codepenIconId="string"!=typeof t.codepenIconId?"#icon_codepen":t.codepenIconId,this.contentAreaName="string"!=typeof t.contentArea?".content_area":t.contentArea,this.popOptionsName="string"!=typeof t.popOptions?".pop_options":t.popOptions,this.popLinkName="string"!=typeof t.popLink?".pop_link_box":t.popLink,this.stickerListName="string"!=typeof t.stickerList?".pop_sticker":t.stickerList,this.addMediaListBtnName="string"!=typeof t.addMediaListBtn?".btn_add_media_list":t.addMediaListBtn,this.wrap=Object(s.a)(e,".editor_area"),this.editorSection=Object(s.a)(t.editorSection,".editor_section"),this.contentArea=Object(s.a)(t.contentArea,".content_area"),this.mediaList=Object(s.a)(t.mediaList,".pop_media .media_list"),this.popMedia=Object(s.a)(t.popMedia,".pop_media"),this.popLang=Object(s.a)(t.popLang,".pop_lang"),this.popBgArea=Object(s.a)(t.popBgArea,".pop_bg"),this.popOptions=Object(s.a)(t.popOptions,".pop_options"),this.popLink=Object(s.a)(t.popLink,".pop_link_box"),this.lodingArea=Object(s.a)(t.lodingArea,".pop_loding"),this.fileInput=Object(s.a)(t.fileInput,".file_check"),this.uploadForm=Object(s.a)(t.uploadForm,".file_uploader"),this.contentAddBtn=Object(s.a)(t.contentAddBtn,".btn_add_content","multi"),this.viewBtn=Object(s.a)(t.viewBtn,".btn_mod"),this.popBtns=Object(s.a)(t.popBtn,".btn_pop","multi"),this.popCloseBtns=Object(s.a)(t.popCloseBtns,".btn_pop_close","multi"),this.fontSizeSelect=Object(s.a)(t.fontSizeSelect,".select_font_size"),this.btnColorSelect=Object(s.a)(t.colorSelect,".select_color"),this.btnColor=Object(s.a)(t.colorSelect,".btn_set_color","multi"),this.textAlgin=Object(s.a)(t.textAlgin,".btn_text_algin","multi"),this.listTypeSelect=Object(s.a)(t.listTypeSelect,".select_list_type"),this.colSizeSelect=Object(s.a)(t.colSizeSelect,".select_col"),this.themeSelect=Object(s.a)(t.themeSelect,".select_theme"),this.languageSelect=Object(s.a)(t.languageSelect,".select_language"),this.changeThBtn=Object(s.a)(t.changeThBtn,".btn_change_th"),this.changeTdBtn=Object(s.a)(t.changeTdBtn,".btn_change_td"),this.widthInput=Object(s.a)(t.widthInput,".options_width .value"),this.heightInput=Object(s.a)(t.heightInput,".options_height .value"),this.urlInput=Object(s.a)(t.urlInput,".options_url .value"),this.changeUrlBtn=Object(s.a)(t.changeUrlBtn,".btn_url_change"),this.addLinkBtn=Object(s.a)(t.addLinkBtn,".btn_url_link"),this.unlinkBtn=Object(s.a)(t.unlinkBtn,".btn_url_unlink"),this.boldBtn=Object(s.a)(t.boldBtn,".btn_bold"),this.italicBtn=Object(s.a)(t.italicBtn,".btn_italic"),this.underlineBtn=Object(s.a)(t.underlineBtn,".btn_underline"),this.strikeBtn=Object(s.a)(t.strikeBtn,".btn_strike"),this.wordblockBtn=Object(s.a)(t.wordblockBtn,".btn_wordblock"),this.contentDelBtn=Object(s.a)(t.contentDelBtn,".btn_del_content"),this.languageChangeBtn=Object(s.a)(t.languageChangeBtn,".btn_chang_lang","multi"),this.addMediaListBtn=Object(s.a)(t.addMediaListBtn,".btn_add_media_list"),this.HTMLTextBlock='<p class="item item_text lastset" contenteditable="true" data-type="text">[content]</p>',this.HTMLBtn='<div class="btn lastset" data-type="btn" data-value="[type]"><svg viewbox="0 0 50 50" class="icon"><use class="path" xlink:href="[icon_id]" href="[icon_id]" /></svg>[text]</div>',this.HTMLList='<[tag] [type] class="item item_list lastset" data-type="[dataType]">[child]</[tag]>',this.HTMLChildList='<li contenteditable="true">[content]</li>',this.HTMLsticker='<div class="item item_sticker lastset" data-type="sticker">[el]</div>',this.HTMLQuote='<blockquote class="item item_quote lastset" data-type="quote"><p class="text" contenteditable="true"></p><p class="author" contenteditable="true"></p></blockquote>',this.HTMLTable='<div class="item item_table_area" data-type="table"><div class="scroll"><table class="item_table"><caption contenteditable="true"></caption><colgroup><col class="size_100"><col class="size_100"><col class="size_100"><col class="size_100"></colgroup><tbody><tr><th contenteditable="true" data-x="0" data-y="0"></th><th contenteditable="true" data-x="1" data-y="0"></th><th contenteditable="true" data-x="2" data-y="0"></th><th contenteditable="true" data-x="3" data-y="0"></th></tr><tr><td contenteditable="true" data-x="0" data-y="1"></td><td contenteditable="true" data-x="1" data-y="1"></td><td contenteditable="true" data-x="2" data-y="1"></td><td contenteditable="true" data-x="3" data-y="1"></td></tr></tbody></table></div><button class="btn btn_col_add">Add col</button><button class="btn btn_col_del">Remove col</button><button class="btn btn_row_add">Add row</button><button class="btn btn_row_del">Remove row</button></div>',this.HTMLCodeBlock='<pre class="item item_codeblock lastset" data-type="codeblock" data-theme="default" data-lang="text"><code class="nohighlight" contenteditable="true"></code></pre>',this.HTMLLinkBox='<div class="item lastset" data-type="link_box"><a href="[url]" target="_blank" rel="nofollow" class="link_box clearfix" draggable="false"><div class="img_area"><img src="[imgSrc]" alt="미리보기 이미지" class="img" draggable="false"></div><div class="text_area"><p class="link_title ellipsis">[title]</p><p class="link_description ellipsis">[description]</p><p class="link_domain">[domain]</p></div></a></div>',this.HTMLOption='<option value="[value]">[text]</option>',this.HTMLMediaRow='<li class="btn_add_media" data-webp="[webp]" data-idx="[idx]"><div class="img_area"><img src="[src]" alt="[alt]" width="[width]" data-height="[height]" class="img"></div><p class="name">[name]</p><button class="btn_remove_media" data-idx="[idx]">삭제</button></li>',this.HTMLImageType01='<picture class="item item_image lastset" data-type="image">[source]<img src="[src]" width="[width]" alt="[alt]" class="img"></picture>',this.HTMLImageSource='<source srcset="[webp]" type="image/webp">',this.HTMLImageType02='<div class="item item_image lastset" data-type="image"><img src="[src]" width="[width]" alt="[alt]" class="img"></div>',this.HTMLYoutube='<div class="item item_video lastset" data-type="youtube"><iframe src="[src]" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="video"></iframe></div>',this.HTMLCodepen='<div class="item item_codepen lastset" data-type="codepen"><iframe height="[height]" title="" src="[src]" allowfullscreen class="iframe"></iframe></div>',this.srcReg=new RegExp("(.*)\\.((jpg|png|gif|webp|bmp))","i"),this.youtubeReg=new RegExp("www.youtube.com","g"),this.youtubeCodeReg=new RegExp("((https:\\/\\/)?(www\\.)?youtu(be)?\\.(be|com)\\/(embed\\/|watch\\?v=)?)([^=\\/& :]*)(.*)","i"),this.codepenReg=new RegExp("codepen.io","g"),this.codepenCodeReg=new RegExp("(https:\\/\\/codepen\\.io\\/)(\\w*)\\/(pen|embed)\\/([A-Za-z]*)(.*)","i"),this.urlReg=new RegExp("https?:\\/\\/(\\w*:\\w*@)?[-\\w.]+(:\\d+)?(\\/([\\w\\/_.]*(\\?\\S+)?)?)?","i"),this.numberReg=new RegExp("[0-9]","g"),this.classReg={color:new RegExp("color_[a-z0-9_]*","i"),size:new RegExp("size_[0-9]*","i"),align:new RegExp("align_(left|center|right)*","i")},this.classList=["color","size","align"],this.messageNotSelecCodepen="string"!=typeof t.messageNotSelecCodepen?"You didn't select Codepen":t.messageNotSelecCodepen,this.messageNotSelecImage="string"!=typeof t.messageNotSelecImage?"You didn't select image":t.messageNotSelecImage,this.messageWrongURL="string"!=typeof t.messageWrongURL?"Please enter a valid URL.\nYou must enter http or https first.":t.messageWrongURL,this.messageNotSelect="string"!=typeof t.messageNotSelect?"No item selected Please try again.":t.messageNotSelect,this.messageNoData="string"!=typeof t.messageNoData?"Could not get data":t.messageNoData,this.messageExceedSize="string"!=typeof t.messageExceedSize?"Can't exceed [size]px":t.messageExceedSize,this.messageWrongNode="string"!=typeof t.messageWrongNode?"Wrong cursor pointer":t.messageWrongNode,this.messageNotAnchorTag="string"!=typeof t.messageNotAnchorTag?"Active item is not link":t.messageNotAnchorTag,this.messageWrongValue="string"!=typeof t.messageWrongValue?"Wrong value":t.messageWrongValue,this.messageWrongUrlType="string"!=typeof t.messageWrongUrlType?"Wrong URL type.":t.messageWrongUrlType,this.messageDelImage="string"!=typeof t.messageDelImage?"All images of the document you area creating will also disappear.\nAre you sure you want to delete it?":t.messageDelImage,this.messageDuplicateContent="string"!=typeof t.messageDuplicateContent?"This language not have content.\nDo you want duplicate to content?":t.messageDuplicateContent,this.messageNotSetAjax="Didn't setting Ajax url.",this.linkBoxData={},this.contentData={ko:[],en:[],es:[]},this.logData=[]}}},function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"init",(function(){return o})),a.d(t,"getOptionValue",(function(){return i})),a.d(t,"getContentData",(function(){return l})),a.d(t,"getStorage",(function(){return r})),a.d(t,"setContentData",(function(){return c})),a.d(t,"setOptionValue",(function(){return d})),a.d(t,"addLanguage",(function(){return g}));var s=a(2),n=a(1);function o(t,a={}){return t=null===t?".editor_area":t,e.storage=new s.a(t,a),""===storage.mediaUploadURL||""===storage.mediaUpdateURL||""===storage.mediaDelURL?void console.warn(storage.messageNotSetAjax):(storage.activeElement=storage.wrap,!0===storage.multiUpload&&storage.fileInput.setAttribute("multiple",!0),!0===storage.loading&&(storage.popBgArea.classList.remove("act"),storage.lodingArea.classList.remove("act")),Object(n.a)(),this)}function i(e){return void 0===storage[e]?(console.error(`Optins name "${e}" is didn't have.`),!1):storage[e]}function l(){let e=Object(n.b)();return storage.contentData[storage.langStatus]=e,storage.contentData}function r(){return storage}function c(e){storage.contentData=e,Object(n.c)(storage.contentData[storage.langStatus])}function d(e,t){return void 0===storage[e]?(console.error("Can not set other option name."),!1):(storage[e]=t,storage[e])}function g(e){return void 0===storage.contentData[e]?(storage.contentData[e]=[],!0):(console.error(`"${e}" is already exists.`),!1)}}.call(this,a(4))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a}])}));