!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dragonEditor=e():t.dragonEditor=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";function o(t,e){if("string"==typeof e){if(typeof t!=e)throw`DRAGON EDITOR - invalid type ${t} : ${e}`}else if(!(t instanceof e))throw`DRAGON EDITOR - invalid type ${t} : ${e}`;return t}function i(t,e){if("string"==typeof e){if(typeof t!=e)return!1}else if(!(t instanceof e))return!1;return!0}function s(t,e,n,i=!1,s=o(t,"object"),a=o(e,"string"),c=o(n,"function"),d=o(i,"boolean")){let l=e.split(",");t.length>0?t.forEach(t=>{l.forEach(e=>{t.addEventListener(e,n,!0)})}):l.forEach(e=>{t.addEventListener(e,n,!0)})}function a(t,e,n,i=o(t,"object"),s=o(e,"string"),a=o(n,"function")){let c=e.split(",");t.length>0?t.forEach(t=>{c.forEach(e=>{t.removeEventListener(e,n,!0)})}):c.forEach(e=>{t.removeEventListener(e,n,!0)})}function c(t,e,n,i=o(t,"object"),s=o(e,"string"),a=o(n,"string")){t.length>0?t.forEach(t=>{"add"==e?t.classList.add(n):"remove"==e?t.classList.remove(n):"toggle"==e&&t.classList.toggle(n)}):"add"==e?t.classList.add(n):"remove"==e?t.classList.remove(n):"toggle"==e&&t.classList.toggle(n)}function d(t,e,n=o(t,Node),i=o(e,"string")){let s=!1;return e.split(".").some(e=>{if(""!==e)return s=!!t.classList.contains(e),0==s}),s}function l(t,e={},n="form",i=o(t,"string"),s=o(e,"object"),a=o(n,"string")){let c=new FormData;if("json"===n){for(let t in e.body)c.append(t,e.body[t]);e.body=c}return fetch(t,e).then(t=>t.json()).catch(t=>({respon:!1,error:t}))}function r(t,e=o(t,"string")){return t.charAt(0).toUpperCase()+t.slice(1)}function u(){return condition.windowWidth<condition.changePint}function g(t,e,n=o(t,Array),i=o(e,Array)){let s=!1;return e.forEach(e=>{t.indexOf(e)>-1&&(s=!0)}),s}n.r(e),n.d(e,"typeCheckThrow",(function(){return o})),n.d(e,"typeCheckBoolean",(function(){return i})),n.d(e,"eventBinding",(function(){return s})),n.d(e,"removeEvent",(function(){return a})),n.d(e,"classControl",(function(){return c})),n.d(e,"hasClass",(function(){return d})),n.d(e,"fetchURL",(function(){return l})),n.d(e,"upperFirstChar",(function(){return r})),n.d(e,"isMobile",(function(){return u})),n.d(e,"hasValueArrToArr",(function(){return g}))},function(t,e,n){"use strict";n.r(e),n.d(e,"getElement",(function(){return i})),n.d(e,"getChild",(function(){return s})),n.d(e,"checkElement",(function(){return a})),n.d(e,"findParentByClass",(function(){return c})),n.d(e,"getActiveElement",(function(){return d})),n.d(e,"findContenteditable",(function(){return l}));const{typeCheckThrow:o}=n(0);function i(t,e=!0,n=o(t,"string"),i=o(e,"boolean")){return 1==e?document.querySelectorAll(t):document.querySelector(t)}function s(t,e,n=!0,i=o(t,Node),s=o(e,"string"),a=o(n,"boolean")){return 1==n?t.querySelectorAll(e):t.querySelector(e)}function a(t="",e,n=!0,s=o(t,"string"),a=o(e,"string"),c=o(n,"boolean")){return i(0==(""!=t&&function(t,e=o(t,"string")){return null!==document.querySelector(t)}(t))?e:t,n)}function c(t,e,n=o(t,Node),i=o(e,"string")){if("HTMLBodyElement"!==t.constructor.name&&"HTMLHtmlElement"!==t.constructor.name){return"Text"==t.constructor.name&&(t=t.parentNode),!0===t.classList.contains(e)?t:c(t.parentElement,e)}return null}function d(){let t=condition.areaContent.childElementCount,e=i(".djs-content > *");return null==condition.activeItem?e[t-1]:1==condition.activeItem.classList.contains("djs-item")?condition.activeItem:e[t-1]}function l(t,e=o(t,Node)){let n,i=t.constructor.name;if("HTMLBodyElement"!==i){return n="Text"===i?t.parentElement:t,"true"==n.getAttribute("contenteditable")?n:l(n.parentElement)}return null}},function(t,e,n){"use strict";n.r(e),n.d(e,"makeView",(function(){return u})),n.d(e,"scrollButtonHTML",(function(){return g})),n.d(e,"getDefaultBlockHTML",(function(){return b})),n.d(e,"getTextBlockHTML",(function(){return f})),n.d(e,"getImageBlockHTML",(function(){return p})),n.d(e,"getEmoticonBlockHTML",(function(){return h})),n.d(e,"getListChildHTML",(function(){return m})),n.d(e,"getYoutubeBlock",(function(){return v})),n.d(e,"getCodepenBlock",(function(){return x})),n.d(e,"getLinkboxBlock",(function(){return k})),n.d(e,"setEmoticonList",(function(){return j})),n.d(e,"setMediaList",(function(){return y})),n.d(e,"addBlockToContent",(function(){return w})),n.d(e,"getContentData",(function(){return L}));const{typeCheckThrow:o,upperFirstChar:i,classControl:s}=n(0),{getElement:a,getActiveElement:c,getChild:d}=n(1),{setCursor:l}=n(3),{htmlToJson:r}=n(14);function u(){let t="";t+=`<div class="editor-content djs-content" data-lang="${condition.lang}"><p class="editor-item djs-item" contenteditable="true" data-type="text"></p></div>`,t+='<div class="editor-menu-block">',t+=function(t){let e=Object.entries(t),n=`<div class="editor-scroll-col editor-clearfix" data-count="${e.length}">`;for(const[t,o]of e)"block"===o.type?n+=`\n                <button class="editor-btn djs-add-block" title="${o.text}" data-value="${t}" data-type="${o.type}">\n                    <svg viewbox="0 0 64 64" class="editor-icon">\n                        <use class="path" xlink:href="${o.icon}" href="${o.icon}"></use>\n                    </svg>\n                    ${o.text}\n                </button>\n            `:"pop"===o.type?n+=`\n                <button class="editor-btn djs-add-block djs-btn-ignore" title="${o.text}" data-value="${t}" data-type="${o.type}">\n                    <svg viewbox="0 0 64 64" class="editor-icon">\n                        <use class="path" xlink:href="${o.icon}" href="${o.icon}"></use>\n                    </svg>\n                    ${o.text}\n                </button>\n            `:"file"===o.type&&(n+=`\n                <button class="editor-btn djs-add-block" title="${o.text}" data-value="${t}" data-type="${o.type}">\n                    <svg viewbox="0 0 64 64" class="editor-icon">\n                        <use class="path" xlink:href="${o.icon}" href="${o.icon}"></use>\n                    </svg>\n                    ${o.text}\n                </button>\n            `);return n+="</div>",n}(condition.defaultMenu),t+="</div>",t+='<div class="editor-menu-bottom">',t+=function(){let t="";""!==condition.uploadURL&&(t+='\n            <button class="editor-btn djs-toggle-target djs-btn-ignore" data-target=".editor-pop-folder">\n                <svg viewbox="0 0 64 64" class="editor-icon">\n                    <use class="path" xlink:href="#icon-folder" href="#icon-folder"></use>\n                </svg>\n                Media\n            </button>\n        ');1==condition.multiLang&&(t+='\n            <button class="editor-btn djs-toggle-target djs-btn-ignore" data-target=".editor-pop-lang">\n                <svg viewbox="0 0 64 64" class="editor-icon">\n                    <use class="path" xlink:href="#icon-lang" href="#icon-lang"></use>\n                </svg>\n                Change language\n            </button>\n        ');return t+='\n        <button class="editor-btn editor-switch-device djs-switch-device">\n            <svg class="icon" viewbox="0 0 64 64">\n                <use class="path editor-pc" xlink:href="#icon-pc" href="#icon-pc"></use>\n                <use class="path editor-mobile" xlink:href="#icon_mobile" href="#icon-mobile"></use>\n            </svg>\n            Change view\n        </button>\n    ',t}(),1==condition.multiLang&&(t+=function(){let t=`<div class="editor-pop-lang djs-trigger" data-length="${condition.langCategory.length}">`;return condition.langCategory.forEach(e=>{e==condition.lang?t+=`<button class="editor-btn-lang djs-change-lang --act" data-value="${e}">${e.toUpperCase()}</button>`:t+=`<button class="editor-btn-lang djs-change-lang" data-value="${e}">${e.toUpperCase()}</button>`}),t+="</div>",t}()),t+='\n        <div class="editor-list-pop editor-pop-folder editor-scroll djs-folder-pop djs-trigger djs-scroll">\n            <div class="editor-scroll-content djs-scroll-content">\n                <ul class="editor-list-media djs-list-media editor-clearfix"></ul>\n            </div>\n        </div>\n    ',t+="</div>",""!==condition.uploadURL&&(t+=function(){let t='<form enctype="multipart/form-data" method="post" class="editor-uploader djs-uploader">';1==condition.multiUpload?t+='<input type="file" multiple class="djs-file">':t+='<input type="file" class="djs-file">';return t+="</form>",t}()),t+='\n        <div class="editor-pop-linkbox djs-linkbox-pop editor-clearfix djs-trigger" data-type="new">\n            <input type="url" class="editor-input djs-input --new" placeholder="https://dico.me">\n            <a href="" class="editor-link --del djs-link"></a>\n            <button class="editor-btn djs-btn" data-value="">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path --del" xlink:href="#icon-delete-link" href="#icon-delete-link"></use>\n                    <use class="path --new" xlink:href="#icon-btn-accept" href="#icon-btn-accept"></use>\n                </svg>\n            </button>\n        </div>\n    ',t+=function(){let t='<div class="editor-pop-option djs-option-pop">';return t+='\n        <div class="editor-scroll-wrap editor-clearfix">\n            <div class="editor-col --act" data-group="text,li,table,codeblock,word">\n                <button class="editor-select djs-fontsize djs-toggle-target djs-btn-ignore" data-target=".editor-list-fontsize">\n                    <span class="editor-text djs-text">16</span>\n\n                    <svg class="icon" viewbox="0 0 64 64">\n                        <use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use>\n                    </svg>\n                </button>\n\n                <div class="editor-list-fontsize editor-scroll djs-scroll djs-trigger">\n                    <div class="editor-scroll-content djs-scroll-content">\n    ',condition.frontSize.forEach(e=>{t+=`<button class="editor-btn djs-change-fontsize" data-value="${e}">${e}</button>`}),t+="\n                    </div>\n                </div>\n            </div>\n    ",t+='\n        <div class="editor-col --act" data-group="text,li,table,word">\n            <button class="editor-color djs-color djs-toggle-target djs-btn-ignore" data-target=".editor-list-color" data-value="#333"></button>\n            <div class="editor-list-color djs-trigger">\n    ',condition.colorList.forEach(e=>{t+=`<button class="editor-btn djs-change-color" data-value="${e}">${e}</button>`}),t+="\n            </div>\n        </div>\n    ",t+='\n        <div class="editor-col --act editor-btn-area" data-group="text,li,table,image,sticker">\n            <button class="editor-btn djs-change-align" data-value="left">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-align-left" href="#icon-align-left"></use>\n                </svg>\n\n                align left\n            </button>\n\n            <button class="editor-btn djs-change-align" data-value="center">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-align-center" href="#icon-align-center"></use>\n                </svg>\n\n                align center\n            </button>\n\n            <button class="editor-btn djs-change-align" data-value="right">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-align-right" href="#icon-align-right"></use>\n                </svg>\n\n                align right\n            </button>\n        </div>\n\n        <div class="editor-col --act editor-btn-area" data-group="text,li,table,word,link">\n            <button class="editor-btn djs-toggle-bold">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-bold" href="#icon-bold"></use>\n                </svg>\n\n                bold\n            </button>\n\n            <button class="editor-btn djs-toggle-italic">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-italic" href="#icon-italic"></use>\n                </svg>\n\n                italic\n            </button>\n\n            <button class="editor-btn djs-toggle-underline">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-underline" href="#icon-underline"></use>\n                </svg>\n\n                underline\n            </button>\n\n            <button class="editor-btn djs-toggle-strikethrough">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-strikethrough" href="#icon-strikethrough"></use>\n                </svg>\n\n                strikethrough\n            </button>\n        </div>\n\n        <div class="editor-col --act editor-btn-area" data-group="td">\n            <button class="editor-btn djs-table-header">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-table-header" href="#icon-table-header"></use>\n                </svg>\n\n                change to table header\n            </button>\n        </div>\n\n        <div class="editor-col --act editor-btn-area" data-group="th">\n            <button class="editor-btn djs-table-body">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-table-body" href="#icon-table-body"></use>\n                </svg>\n\n                change to table body\n            </button>\n        </div>\n\n        <div class="editor-col --act editor-btn-area" data-group="word,link">\n            <button class="editor-btn djs-open-linkbox">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-link" href="#icon-link"></use>\n                </svg>\n\n                open linkbox pop\n            </button>\n        </div>\n\n        <div class="editor-col --act editor-btn-area" data-group="codeblock">\n            <button class="editor-btn djs-code-theme djs-toggle-target djs-btn-ignore" data-target=".editor-list-theme">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-theme" href="#icon-theme"></use>\n                </svg>\n\n                open theme pop\n            </button>\n\n            <div class="editor-list-select editor-list-theme djs-trigger">\n    ',condition.codeTheme.forEach(e=>{t+=`<button class="editor-btn djs-set-theme" data-value="${e}">${i(e)}</button>`}),t+="\n            </div>\n        </div>\n    ",t+='\n        <div class="editor-col --act" data-group="codeblock">\n            <button class="editor-select djs-code-lang djs-toggle-target djs-btn-ignore" data-target=".editor-list-lang">\n                <span class="editor-text djs-text">Text</span>\n\n                <svg class="icon" viewbox="0 0 64 64">\n                    <use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use>\n                </svg>\n            </button>\n\n            <div class="editor-list-select editor-list-lang djs-trigger">\n    ',condition.codeLang.forEach(e=>{t+=`<button class="editor-btn djs-set-lang" data-value="${e}">${i(e)}</button>`}),t+="\n            </div>\n        </div>\n    ",t+='\n        <div class="editor-col --act" data-group="ol">\n            <button class="editor-select djs-list-style djs-toggle-target djs-btn-ignore" data-target=".editor-list-type">\n                <span class="editor-text djs-text">Numbered - 1</span>\n\n                <svg class="icon" viewbox="0 0 64 64">\n                    <use class="path" xlink:href="#icon-arrow-bottom" href="#icon-arrow-bottom"></use>\n                </svg>\n            </button>\n\n            <div class="editor-list-select editor-list-type djs-trigger">\n                <button class="editor-btn djs-set-list-type" data-value="number">Numbered - 1</button>\n                <button class="editor-btn djs-set-list-type" data-value="upper-roman">Upper-roman - I</button>\n                <button class="editor-btn djs-set-list-type" data-value="lower-roman">Lower-roman - i</button>\n                <button class="editor-btn djs-set-list-type" data-value="upper-alpha">Upper-alpha - A</button>\n                <button class="editor-btn djs-set-list-type" data-value="lower-alpha">Lower-alpha - a</button>\n            </div>\n        </div>\n    ',t+='\n        <div class="editor-col --act editor-btn-area" data-group="all">\n            <button class="editor-btn djs-move-up">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-arrow-up" href="#icon-arrow-up"></use>\n                </svg>\n\n                move up block\n            </button>\n        </div>\n    ',t+='\n        <div class="editor-col --act editor-btn-area" data-group="all">\n            <button class="editor-btn djs-move-down">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-arrow-down" href="#icon-arrow-down"></use>\n                </svg>\n\n                move down block\n            </button>\n        </div>\n    ',t+='\n        <div class="editor-col --act editor-btn-area" data-group="word,wordblock">\n            <button class="editor-btn djs-word-block">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path" xlink:href="#icon-word-block" href="#icon-word-block"></use>\n                </svg>\n\n                make word block\n            </button>\n        </div>\n    ',t+='\n        <div class="editor-col --act editor-btn-area --noline" data-group="all">\n            <button class="editor-btn djs-delete-block">\n                <svg viewBox="0 0 64 64" class="icon">\n                    <use class="path --red" xlink:href="#icon-delete-block" href="#icon-delete-block"></use>\n                </svg>\n\n                delete block\n            </button>\n        </div>\n    ',t+="</div>",t+="</div>",t}(),t+='\n        <div class="editor-list-pop editor-pop-emoticon editor-scroll djs-emoticon-pop djs-trigger djs-scroll">\n            <div class="editor-scroll-content djs-scroll-content">\n                <div class="editor-list-emoticon djs-list-emoticon editor-clearfix"></div>\n            </div>\n        </div>\n    ',condition.wrap.insertAdjacentHTML("beforeend",t)}function g(){return'<button class="scroll-bar djs-scroll-bar" style="transform:translateY(0)"></button>'}function b(t,e=o(t,"string")){let n;switch(t){case"textBlock":n=f();break;case"ulBlock":n=function(t=[""],e=o(t,Array)){let n='<ul class="editor-item djs-item --djs-selected" data-type="ul">';return t.forEach(t=>{n+=`<li contenteditable="true">${t}</li>`}),n+="</ul>",n}();break;case"olBlock":n=function(t=[""],e=o(t,Array)){let n='<ol class="editor-item djs-item --djs-selected" data-style="number" data-type="ol">';return t.forEach(t=>{n+=`<li contenteditable="true">${t}</li>`}),n+="</ol>",n}();break;case"quotaionBlock":n='<blockquote class="editor-item djs-item --djs-selected" data-type="quote"><p class="text djs-text" contenteditable="true"></p><p class="author djs-author" contenteditable="true"></p></blockquote>';break;case"tableBlock":n='\n        <div class="editor-item djs-item --djs-selected" data-type="table">\n            <div class="scroll">\n                <table class="table">\n                    <caption class="djs-caption" contenteditable="true"></caption>\n                    <colgroup>\n                        <col data-size="100">\n                        <col data-size="100">\n                        <col data-size="100">\n                        <col data-size="100">\n                    </colgroup>\n                    <tbody>\n                        <tr>\n                            <th contenteditable="true" data-x="0" data-y="0"></th>\n                            <th contenteditable="true" data-x="1" data-y="0"></th>\n                            <th contenteditable="true" data-x="2" data-y="0"></th>\n                            <th contenteditable="true" data-x="3" data-y="0"></th>\n                        </tr>\n                        <tr>\n                            <td contenteditable="true" data-x="0" data-y="1"></td>\n                            <td contenteditable="true" data-x="1" data-y="1"></td>\n                            <td contenteditable="true" data-x="2" data-y="1"></td>\n                            <td contenteditable="true" data-x="3" data-y="1"></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    ';break;case"codeBlock":n='\n        <pre class="editor-item djs-item --djs-selected" data-type="codeblock" data-theme="default" data-lang="text"><code class="nohighlight editor-code djs-code" contenteditable="true"></code></pre>\n    ';break;default:n=""}return n}function f(t="",e=o(t,"string")){return`<p class="editor-item djs-item --djs-selected" contenteditable="true" data-type="text">${t}</p>`}function p(t,e=700,n=o(t,"object"),i=o(e,"number")){let s=`\n        <div class="editor-item djs-item --djs-selected" data-type="image" data-webp="${t.hasWebp}">\n            <div class="editor-size djs-size" data-width="${e}">\n    `;return 1==condition.useWebp?(s+="<picture>",1==t.hasWebp&&(s+=`<source srcset="${t.src}.webp" type="image/webp">`),s+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" alt="${t.alt}" data-height="${t.height}" class="img djs-img" draggable="false">`,s+="</picture>"):s+=`<img src="${t.src}.${t.defaultFormat}" width="${t.width}" alt="${t.alt}" data-height="${t.height}" class="img djs-img" draggable="false">`,s+='<button class="editor-btn-resize --left djs-resize" data-value="width" data-position="left">resize</button>',s+='<button class="editor-btn-resize --right djs-resize" data-value="width" data-position="right">resize</button>',s+="</div>",s+=`<p class="editor-caption" contenteditable="true" data-type="caption">${t.alt}</p>`,s+="</div>",s}function h(t,e=o(t,"string")){return`<div class="editor-item djs-item --djs-selected" data-type="emoticon">${t}</div>`}function m(t="",e=o(t,"string")){return`<li contenteditable="true">${t}</li>`}function v(t,e=o(t,"string")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="youtube">\n            <iframe src="https://www.youtube.com/embed/${t}" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="editor-iframe djs-iframe"></iframe>\n            <button class="editor-edit">edit</button>\n        </div>\n    `}function x(t,e,n=300,i=o(t,"string"),s=o(e,"string"),a=o(n,"number")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="codepen">\n            <iframe height="${n}" title="" src="https://codepen.io/${t}/embed/${e}?height=${n}&theme-id=${condition.codepenTheme}&default-tab=result" allowfullscreen class="editor-iframe djs-iframe" data-code="${e}" data-nickname="${t}"></iframe>\n            <button class="editor-btn-resize djs-resize" data-value="height">Resize height</button>\n            <button class="editor-edit">edit</button>\n        </div>\n    `}function k(t,e=o(t,"object")){return`\n        <div class="editor-item djs-item --djs-selected" data-type="linkbox">\n            <a href="${t.url}" target="_blank" rel="nofollow" class="editor-linkbox editor-clearfix djs-linkbox" draggable="false">\n                <div class="editor-linkbox-img">\n                    <img src="${t.img}" alt="미리보기 이미지" class="editor-img djs-img" draggable="false">\n                </div>\n\n                <div class="editor-linkbox-text">\n                    <p class="editor-title djs-title">${t.title}</p>\n                    <p class="editor-description djs-description">${t.description}</p>\n                    <p class="editor-domain djs-domain">${t.domain}</p>\n                </div>\n            </a>\n        </div>\n    `}function j(t){let e="";t.forEach(t=>{"image"==t.type?e+=`\n                <button class="editor-emoticon djs-add-emoticon">\n                    <img src="${t.value}" alt="${t.caption}" class="img">\n                </button>\n            `:"svg"==t.type&&(e+=`\n                <button class="editor-emoticon djs-add-emoticon">\n                    ${t.value}\n                </button>\n            `)}),condition.listEmoticon.insertAdjacentHTML("beforeend",e)}function y(t){let e="";t.forEach(t=>{"image"==t.type&&(e+=`\n                <li class="editor-media djs-media" data-type="image" data-idx="${t.idx}">\n                    <div class="eidtor-img-area djs-add-media" data-src="${t.src}" data-alt="${t.alt}" data-default-format="${t.defaultFormat}" data-webp="${t.webp}" data-width="${t.width}" data-height="${t.height}">\n                        <img src="${t.src}.${t.defaultFormat}" class="editor-img">\n                    </div>\n\n                    <p class="editor-name djs-name">${t.alt}</p>\n                    <button class="editor-btn-del djs-del-media" data-idx="${t.idx}">\n                        <svg viewBox="0 0 64 64" class="icon">\n                            <use class="path" xlink:href="#icon-delete-block" href="#icon-delete-block"></use>\n                        </svg>\n\n                        delete media\n                    </button>\n                </li>\n            `)}),condition.listMedia.insertAdjacentHTML("beforeend",e)}function w(t,e=o(t,"string")){let n,i=c(),r=a(".--djs-selected");if(i.insertAdjacentHTML("afterend",t),n=i.nextElementSibling,"true"==n.contentEditable)condition.activeElement=n,l(n,0);else{let t=d(n,"*[contenteditable]",!1);null!=t&&(condition.activeElement=t,l(t,0))}r.length>0&&s(r,"remove","--djs-selected"),condition.activeItem=n}function L(){let t=d(condition.areaContent,".djs-item");return r(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"setCursor",(function(){return i})),n.d(e,"isTextSelect",(function(){return s}));const{typeCheckThrow:o}=n(0);function i(t,e,n=o(t,Node),i=o(e,"number")){let s=window.getSelection(),a=document.createRange();a.setStart(t,e),a.collapse(!0),s.removeAllRanges(),s.addRange(a)}function s(){return condition.focusNode!=condition.baseNode||condition.focusOffset!=condition.baseOffset}},function(t,e,n){"use strict";n.r(e),n.d(e,"message",(function(){return o}));const o={wrongValue:t=>`DRAGON EDITOR - Wrong type value in "${t}".`,wrongURL:(t,e)=>`DRAGON EDITOR - Wrong URL value { ${t} : "${e}" }`,wrongKey:(t,e)=>`DRAGON EDITOR - Wrong key set "${t}" : { "${e}" : ... }`,apiNotWorking:"API server is not responding.",wrongItemStructure:"This block structure is broken, But we fixed it. Try again please.",missingSelect:"Missing block. Please select block."}},function(t,e,n){"use strict";n.r(e),n.d(e,"getTextItemOption",(function(){return s})),n.d(e,"setTextItemOption",(function(){return a}));const{typeCheckThrow:o}=n(0),{findParentByClass:i}=n(1);function s(t,e=o(t,Node)){let n=i(t,"djs-item").dataset.type,s=["color","fontSize","align","bold","italic","underline","strikethrough"],a={color:"",fontSize:"",align:"",bold:"",italic:"",underline:"",strikethrough:"",wordblock:""};switch("Text"==t.constructor.name&&(t=t.parentNode),null!=t.dataset&&s.forEach(e=>{a[e]=null==t.dataset[e]?"":t.dataset[e]}),t.tagName){case"B":a.bold="true";break;case"I":a.italic="true";break;case"U":a.underline="true";break;case"DEL":a.strikethrough="true";break;case"CODE":"codeblock"!=n&&(a.wordblock="true")}return a}function a(t,e,n=o(t,Node),i=o(e,"object")){for(const[n,o]of Object.entries(e))""!=o&&(t.dataset[n]=o)}},function(t,e,n){"use strict";n.r(e),n.d(e,"setScroll",(function(){return c})),n.d(e,"refreshScroll",(function(){return l})),n.d(e,"getScrollInfo",(function(){return r}));const{typeCheckThrow:o}=n(0),{getChild:i}=n(1),{scrollButtonHTML:s}=n(2),{bindingScrollEvent:a}=n(7);function c(){condition.scrollArea.forEach(t=>{t.insertAdjacentHTML("beforeend",s()),d(t),a(t)})}function d(t,e=o(t,Node)){let n=i(t,".djs-scroll-bar",!1),s=r(t);n.style.height=s.scrollHeight+"px"}function l(){condition.scrollArea.forEach(t=>{d(t),a(t)})}function r(t,e=o(t,Node)){let n,s,a,c,d=i(t,".djs-scroll-content",!1),l=t.getBoundingClientRect(),r=d.getBoundingClientRect(),u=i(t,".djs-scroll-content > *"),g=l.height-10,b=0;return u.forEach(t=>{b+=t.getBoundingClientRect().height}),b<g&&(b=g),n=100/b*g,s=Math.floor(n/100*g),a=b-r.height,c=r.height-8-s,s==g&&(s=0),{scrollHeight:s,contentHeight:b,maxScrollTop:a,maxBarTop:c}}},function(t,e,n){"use strict";n.r(e),n.d(e,"setEvent",(function(){return I})),n.d(e,"bindingScrollEvent",(function(){return z})),n.d(e,"setEmoticonBtnEvent",(function(){return U})),n.d(e,"setMediaEvent",(function(){return W}));const{typeCheckThrow:o,eventBinding:i,classControl:s,hasClass:a,fetchURL:c,isMobile:d}=n(0),{getElement:l,findParentByClass:r,getChild:u,findContenteditable:g}=n(1),{setScroll:b,getScrollInfo:f}=n(6),{getDefaultBlockHTML:p,getYoutubeBlock:h,getCodepenBlock:m,getLinkboxBlock:v,getEmoticonBlockHTML:x,addBlockToContent:k,getImageBlockHTML:j,getContentData:y}=n(2),{itemClickEvent:w,itemKeyboardEvent:L,itemStructureValidation:T,nodeEffect:$,textStylingNode:C,changeTableCell:E,itemMove:N}=n(8),{openFile:M}=n(16),{openPop:B,closeOptionPop:H,openOptionPop:S,openLinkPop:O}=n(9),{isTextSelect:A}=n(3),{message:R}=n(4);function I(){!function(){let t;i(window,"resize",(function(e){clearTimeout(t),t=setTimeout(()=>{condition.windowWidth=window.innerWidth,condition.windowHeight=window.innerHeight},250)})),i(document,"mousedown",(function(t){let e=t.target,n=l(".djs-trigger.--act"),o=null!=r(e,"djs-trigger");0==(null!=r(e,"djs-btn-ignore"))&&0==o&&n.length>0&&s(n,"remove","--act"),H(t.target)})),i(condition.btnToggleTarget,"click",(function(t){let e=this.dataset.target,n=l(e,!1),o=l(".djs-trigger.--act"),i=a(n,".djs-scroll");o.forEach(t=>{if(t!==n&&(s(t,"remove","--act"),1==i)){n.querySelector(".djs-scroll-content").scrollTo(0,0)}}),s(n,"toggle","--act")}))}(),i(condition.btnChangeLang,"click",(function(){let t=this.dataset.value,e=y();s(condition.btnChangeLang,"remove","--act"),s(this,"add","--act"),console.log(condition.lang,t),console.log(e),condition.triggerLangChange(t)})),i(condition.btnSwitchDevice,"click",(function(){s(condition.areaContent,"toggle","--mobile"),s(this,"toggle","--act")})),i(condition.btnAddBlock,"click",(function(){let t=this.dataset.type,e=this.dataset.value;if("block"===t){let t=p(e);k(t),S()}else"pop"===t?B(e,this):"file"===t&&M(e)})),i(condition.btnLinkbox,"click",(async function(){let t,e=u(condition.popLinkbox,".djs-input",!1),n=e.value,o=this.dataset.value,i=!1;if("linkbox"==o){let e={};if(condition.regList.defaultURL.test(n)){if(s(this,"add","--ing"),""===condition.linkBoxApi){let o=await c("https://api.allorigins.win/get?url="+n);if(!1!==o.respon){let s=o.contents,a=new RegExp('property=\\"og:title\\"',"g"),c=new RegExp('([^])*\\<title>([^"]*)<\\/title>([^]*)',"g"),d=new RegExp('([^]*)\\<meta property=\\"og:title\\" content=\\"([^"]*)(?=\\")"([^]*)',"g"),l=new RegExp('property=\\"og:image\\"',"g"),r=new RegExp('([^])*\\<meta name=\\"image\\" content=\\"([^"]*)"\\>([^]*)',"g"),u=new RegExp('([^])*\\<meta property=\\"og:image\\" content=\\"([^"]*)(?=\\")([^]*)',"g"),g=new RegExp('property=\\"og:description\\"',"g"),b=new RegExp('([^])*\\<meta name=\\"description\\" content=\\"([^"]*)(?=\\")([^]*)',"g"),f=new RegExp('([^])*\\<meta property=\\"og:description\\" content=\\"([^"]*)(?=\\")([^]*)',"g");if(1==a.test(s)?e.title=s.replace(d,"$2"):e.title=s.replace(c,"$2"),1==l.test(s))e.img=s.replace(u,"$2");else{let t=s.replace(r,"$2");t.length>500?e.img="":e.img=t}if(1==g.test(s))e.description=s.replace(f,"$2");else{let t=s.replace(b,"$2");t.length>500?e.description="":e.description=t}n.indexOf("://")>-1?e.domain=n.split("/")[2]:e.domain=n.split("/")[0],e.domain=e.domain.split(":")[0],e.url=n,t=v(e),i=!0}else console.error(o.error),alert(R.apiNotWorking)}else console.log("self!");s(this,"remove","--ing")}}else if("youtube"==o){if(condition.regList.youtubeURL.test(n)){let e=n.replace(condition.regList.youtubeCode,"$7");t=h(e),i=!0}}else if("codepen"==o){if(condition.regList.codepenURL.test(n)){let e=n.replace(condition.regList.codepenCode,"$2"),o=n.replace(condition.regList.codepenCode,"$4");t=m(e,o),i=!0}}else if("word"==o){let t=condition.baseNode.parentNode;t.insertAdjacentHTML("afterend",`<span>${t.textContent}</span>`),t.remove(),T(),s(condition.popLinkbox,"remove","--act")}else"link"==o&&condition.regList.defaultURL.test(n)&&($("link",n),i=!0);1==i?("link"!=o&&k(t),e.value="",s(condition.popLinkbox,"remove","--act")):"word"!=o&&(s(condition.popLinkbox,"add","--wrong"),e.focus(),setTimeout(()=>{s(condition.popLinkbox,"remove","--wrong")},1e3))})),i(u(condition.popLinkbox,".djs-input",!1),"keydown",(function(t){if("Enter"==t.code){let t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1),condition.btnLinkbox.dispatchEvent(t)}})),b(),function(){let t={resize:!1,client:{x:0,y:0},type:"",item:"",position:""};i(condition.areaContent,"mousedown,touchstart",(function(e){let n=e.target;1==n.classList.contains("djs-resize")&&(1==d()?(t.client.x=Math.floor(e.touches[0].clientX),t.client.y=Math.floor(e.touches[0].clientY)):(t.client.x=e.clientX,t.client.y=e.clientY),t.resize=!0,t.item=r(n,"djs-item"),t.type=t.item.dataset.type,t.position=n.dataset.position,"image"==t.type?(t.target=u(t.item,".djs-size",!1),t.defaultValue=parseInt(t.target.dataset.width)):"codepen"==t.type&&(t.target=u(t.item,".djs-iframe",!1),t.defaultValue=parseInt(t.target.height),s(t.item,"add","--act")))})),i(condition.areaContent,"mousemove,touchmove",(function(e){if(1==t.resize){let n,o;if(1==d()?(n=Math.floor(e.touches[0].clientX),o=Math.floor(e.touches[0].clientY)):(n=e.clientX,o=e.clientY),"image"==t.type){let e;"left"==t.position?e=n-t.client.x:"right"==t.position&&(e=t.client.x-n);let o=50*Math.floor(e/50),i=t.defaultValue-o;i>condition.maxImageWidth?i=condition.maxImageWidth:i<50&&(i=50),t.target.dataset.width=i}else if("codepen"==t.type){let e=t.client.y-o,n=50*Math.floor(e/50),i=t.defaultValue-n;i<300?i=300:i>condition.maxCodepenHeight&&(i=condition.maxCodepenHeight),t.target.height=i}}})),i(condition.areaContent,"mouseup,touchend",(function(e){t.resize=!1,"codepen"==t.type&&s(t.item,"remove","--act"),w(e)})),i(condition.areaContent,"keydown",(function(t){L(t)})),i(condition.areaContent,"keyup",(function(t){w(t)})),console.log("set content event")}(),i(condition.btnFontSize,"click",(function(){let t=l(".djs-fontsize",!1),e=this.dataset.value,n=document.createEvent("HTMLEvents");if(n.initEvent("click",!0,!1),1==A())$("fontSize",e),u(t,".djs-text",!1).textContent=e;else{let n;n="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,condition.defaultFontSize==parseInt(e)?(n.removeAttribute("data-font-size"),T()):n.setAttribute("data-font-size",e),u(t,".djs-text",!1).textContent=e,n.focus()}t.dispatchEvent(n)})),i(condition.btnColor,"click",(function(){let t=l(".djs-color",!1),e=this.dataset.value,n=document.createEvent("HTMLEvents");if(n.initEvent("click",!0,!1),1==A())$("color",e),t.dataset.value=e;else{let n;n="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,condition.defaultColor==e?(n.removeAttribute("data-color"),T()):n.setAttribute("data-color",e),t.dataset.value=e,n.focus()}t.dispatchEvent(n)})),i(condition.btnAlign,"click",(function(){let t=g(condition.baseNode),e=this.dataset.value,n=this.classList.contains("--act");null==t&&(t=r(condition.baseNode,"djs-item")),1==n?(t.removeAttribute("data-align"),s(this,"remove","--act")):(t.setAttribute("data-align",e),s(condition.btnAlign,"remove","--act"),s(this,"add","--act"))})),i(condition.btnToggleBold,"click",(function(){let t=this.classList.contains("--act");1==A()?$("bold"):C("bold","B",t),s(this,"toggle","--act")})),i(condition.btnToggleItalic,"click",(function(){let t=this.classList.contains("--act");1==A()?$("italic"):C("italic","I",t),s(this,"toggle","--act")})),i(condition.btnToggleUnderline,"click",(function(){let t=this.classList.contains("--act");1==A()?$("underline"):C("underline","U",t),s(this,"toggle","--act")})),i(condition.btnToggleStrikethrough,"click",(function(){let t=this.classList.contains("--act");1==A()?$("strikethrough"):C("strikethrough","DEL",t),s(this,"toggle","--act")})),i(condition.btnListType,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=this.dataset.value;t.dataset.style=e})),i(condition.btnTableHeader,"click",(function(){E("th")})),i(condition.btnTableBody,"click",(function(){E("td")})),i(condition.btnThemeSet,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=this.dataset.value,n=l(".djs-code-theme",!1),o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),t.dataset.theme=e,n.dispatchEvent(o)})),i(condition.btnLangSet,"click",(function(){let t=r(condition.baseNode,"djs-item"),e=g(condition.baseNode),n=this.dataset.value,o=l(".djs-code-lang",!1),i=l(".djs-code-lang .djs-text",!1),s=document.createEvent("HTMLEvents");s.initEvent("click",!0,!1),"text"==n&&(n="nohighlight"),t.dataset.lang=n,e.classList=n+" editor-code djs-code",e.textContent=e.textContent,hljs.highlightBlock(e),i.textContent="text"==n?"text":n,o.dispatchEvent(s),e.focus(),condition.baseNode=e})),i(condition.btnItemMobeUp,"click",(function(){N("up")})),i(condition.btnItemMobeDown,"click",(function(){N("down")})),i(condition.btnWordBlock,"click",(function(){let t=this.classList.contains("--act");1==A()?$("wordblock"):C("wordblock","CODE",t),s(this,"toggle","--act")})),i(condition.btnWordLink,"click",(function(){let t,e,n=this.classList.contains("--act"),o={};t="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,e=t.getBoundingClientRect(),o.top=e.top-37,o.right=e.right+230,o.width=e.width,s(condition.popOption,"remove","--act"),O(1==n?"word":"link",o)})),i(condition.btnItemDelete,"click",(function(){r(condition.baseNode,"djs-item").remove(),0==u(condition.areaContent,".djs-item").length>0&&(condition.areaContent.insertAdjacentHTML("beforeend",p("textBlock")),condition.areaContent.childNodes[0].focus())}))}function z(t,e=o(t,Node)){let n=u(t,".djs-scroll-content",!1),s=u(t,".djs-scroll-bar",!1),a=f(t),c={activity:!1,mouseY:0,scrollY:0};i(n,"scroll",(function(){let t=this.scrollTop,e=Math.floor(100/a.maxScrollTop*t),n=Math.floor(e/100*a.maxBarTop);s.style.transform=`translateY(${n}px)`})),i(t,"mousemove",(function(t){if(1==c.activity){let e=-(c.mouseY-t.clientY),o=c.scrollY+2*e;n.scrollTo(0,o)}})),i(s,"mousedown",(function(t){c.activity=!0,c.mouseY=t.clientY,c.scrollY=n.scrollTop})),i(t,"mouseup",(function(){c.activity=!1}))}function U(){condition.btnEmoticon=u(condition.listEmoticon,".djs-add-emoticon"),i(condition.btnEmoticon,"click",(function(){let t=this.innerHTML.trim(),e=x(t);k(e)}))}function W(){i(condition.listMedia,"click",(function(t){let e=r(t.target,"djs-media"),n=e.dataset.type;e.dataset.idx;if("image"==n)switch(!0){case null!==r(t.target,"djs-add-media"):let e,n=r(t.target,"djs-add-media"),o={src:n.dataset.src,alt:n.dataset.alt,defaultFormat:n.dataset.defaultFormat,webp:n.dataset.webp,width:parseInt(n.dataset.width),height:parseInt(n.dataset.height)},i=700;1==d()?i=300:o.width<o.height&&(i=400),e=j(o,i),k(e);break;case null!==r(t.target,"djs-del-media"):console.log("del");break;case null!==r(t.target,"djs-name"):console.log("edit")}})),console.log("to-do media ajax")}},function(t,e,n){"use strict";n.r(e),n.d(e,"itemClickEvent",(function(){return p})),n.d(e,"getItemType",(function(){return h})),n.d(e,"itemKeyboardEvent",(function(){return m})),n.d(e,"wrappingNode",(function(){return v})),n.d(e,"brokenNode",(function(){return x})),n.d(e,"margeNode",(function(){return k})),n.d(e,"nodeEffect",(function(){return y})),n.d(e,"textStylingNode",(function(){return w})),n.d(e,"changeTableCell",(function(){return L})),n.d(e,"itemMove",(function(){return T})),n.d(e,"itemStructureValidation",(function(){return $}));const{typeCheckThrow:o,classControl:i}=n(0),{openOptionPop:s}=n(9),{contentEnterKeyEvent:a}=n(15),{getTextItemOption:c,setTextItemOption:d}=n(5),{setCursor:l,isTextSelect:r}=n(3),{findParentByClass:u,findContenteditable:g,getChild:b}=n(1),{message:f}=n(4);function p(t,e=o(t,Event)){let n=t.target,i=u(n,"djs-item"),a=g(n);null===i&&null===a||(condition.activeItem=i,condition.activeElement=a,condition.baseNode=n,s())}function h(t,e){let n=["all"],o=t.dataset.type;if(null!==e){let t,s=window.getSelection();switch(condition.focusNode=s.focusNode,condition.baseNode=s.baseNode,condition.focusOffset=s.focusOffset,condition.baseOffset=s.baseOffset,t="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,e.constructor.name){case"HTMLLIElement":n.push("li");break;case"HTMLTableCellElement":"TD"==e.tagName?n.push("td"):"TH"==e.tagName&&n.push("th")}switch(i(condition.btnWordLink,"remove","--act"),i(condition.btnWordBlock,"remove","--act"),t.tagName){case"A":n.push("link"),i(condition.btnWordLink,"add","--act");break;case"CODE":"codeblock"!=o&&(n.push("wordblock"),i(condition.btnWordBlock,"add","--act"))}if(1==r()){let t=condition.baseNode.constructor.name;"codeblock"!=o&&((t="HTMLAnchorElement")&&n.push("link"),n.push("word"))}}return n.push(o),n}function m(t,e=o(t,Event)){let n=u(t.target,"djs-item"),i=g(t.target),s=window.getSelection(),c=t.code;switch(condition.focusNode=s.focusNode,condition.baseNode=s.baseNode,condition.focusOffset=s.focusOffset,condition.baseOffset=s.baseOffset,c){case"Enter":a(n,i,t.shiftKey,t)}}function v(t,e,n=o(t,"string"),i=o(e,"string")){let s=condition.baseNode,a=g(s),c=a.childNodes,d=s.textContent,r=d.substring(0,condition.baseOffset),u=d.substring(condition.baseOffset,condition.focusOffset),b=d.substring(condition.focusOffset,d.length),f=r,p=-1,h="";f+=j(t,e,u),f+=b,c.forEach((t,e)=>{t==s&&(p=e)}),c.forEach((t,e)=>{if(e==p)h+=f;else{let e=t.constructor.name;h+="Text"==e?t.textContent:t.outerHTML}}),a.innerHTML=h,l(a.childNodes[p+1],1)}function x(t,e,n=o(t,"string"),i=o(e,"string")){let s=condition.baseNode,a=s.textContent,r=a.substring(0,condition.baseOffset),u=a.substring(condition.baseOffset,condition.focusOffset),g=a.substring(condition.focusOffset,a.length),b=s.parentNode,f="",p=c(b);if(a.length==condition.focusOffset&&0==condition.baseOffset||e==p[t]){let n={};n[t]=e,d(b,n)}else f+=`<span>${r}</span>`,f+=j(t,e,u),f+=`<span>${g}</span>`,b.insertAdjacentHTML("afterend",f),d(b.nextElementSibling,p),d(b.nextElementSibling.nextElementSibling.nextElementSibling,p),l(b.nextElementSibling.nextElementSibling,1),b.remove();$()}function k(t,e,n=o(t,"string"),i=o(e,"string")){let s,a,c,d,r=g(condition.baseNode),u=r.childNodes,b=condition.baseNode,f=condition.focusNode,p="",h="";b.parentNode!=r&&(b=b.parentNode),f.parentNode!=r&&(f=f.parentNode),c=b.textContent,d=f.textContent,u.forEach((t,e)=>{t==b?s=e:t==f&&(a=e)}),p+=c.substring(condition.baseOffset,c.length),u.forEach((t,e)=>{e>s&&e<a&&(p+=t.textContent)}),p+=d.substring(0,condition.focusOffset),u.forEach((t,e)=>{if(e<s){let e=t.constructor.name;h+="Text"==e?t.textContent:t.outerHTML}}),"Text"==b.constructor.name?h+=c.substring(0,condition.baseOffset):(b.textContent=c.substring(0,condition.baseOffset),h+=b.outerHTML),h+=j(t,e,p),"Text"==f.constructor.name?h+=d.substring(condition.focusOffset,d.length):(f.textContent=d.substring(condition.focusOffset,d.length),h+=f.outerHTML),u.forEach((t,e)=>{if(e>a){let e=t.constructor.name;h+="Text"==e?t.textContent:t.outerHTML}}),r.innerHTML=h,l(r.childNodes[s+1],1)}function j(t,e,n,i=o(t,"string"),s=o(e,"string"),a=o(n,"string")){let c;switch(t){case"fontSize":c=`<span data-font-size="${e}">${n}</span>`;break;case"color":c=`<span data-color="${e}">${n}</span>`;break;case"bold":c=`<b>${n}</b>`;break;case"italic":c=`<i>${n}</i>`;break;case"underline":c=`<u>${n}</u>`;break;case"strikethrough":c=`<del>${n}</del>`;break;case"wordblock":c=`<code>${n}</code>`;break;case"link":c=`<a href="${e}" rel="nofollow">${n}</a>`}return c}function y(t,e="",n=o(t,"string"),i=o(e,"string")){if(condition.baseNode==condition.focusNode){let n=g(condition.baseNode),o=condition.baseNode.parentNode;if(n==o)v(t,e);else{n==o.parentNode?x(t,e):($(),alert(f.wrongItemStructure))}}else k(t,e)}function w(t,e,n,i=o(t,"string"),s=o(e,"string"),a=o(n,"boolean")){let l;if(l="Text"==condition.baseNode.constructor.name?condition.baseNode.parentNode:condition.baseNode,l.tagName==e){if(1==(0!=Object.keys(l.dataset))){let e=c(l);e[t]="",l.insertAdjacentHTML("afterend",`<span>${l.textContent}</span>`),d(l.nextElementSibling,e),l.nextElementSibling.focus(),l.remove()}else l.outerHTML=l.textContent,l.focus()}else 1==n?l.removeAttribute("data-"+t,"true"):l.setAttribute("data-"+t,"true"),l.focus()}function L(t,e=o(t,"string")){let n=g(condition.baseNode),i=n.innerHTML;n.insertAdjacentHTML("afterend",`<${t} contenteditable="true">${i}</${t}>`),l(n.nextElementSibling,0),condition.activeElement=n.nextElementSibling,n.remove(),s()}function T(t,e=o(t,"string")){let n,i,a=u(condition.baseNode,"djs-item");null!=a?("up"==t?n=a.previousElementSibling:"down"==t&&(n=a.nextElementSibling),null!=n&&(i=n.outerHTML,"up"==t?a.insertAdjacentHTML("afterend",i):"down"==t&&a.insertAdjacentHTML("beforebegin",i),n.remove()),s(),a.focus()):alert(f.missingSelect)}function $(){let t=["font","center","div"];b(condition.areaContent,'[contenteditable="true"]').forEach(e=>{let n=u(e,"djs-item").dataset.type,o=e.childNodes;"codeblock"!=n&&o.forEach(e=>{if(1==("Text"!=e.constructor.name)){let n=e.childNodes,o=e.tagName.toLowerCase(),i=0!=Object.keys(e.dataset),s=""!=e.textContent;e.removeAttribute("style"),0==s?e.remove():0==i?(t.indexOf(o)>-1||"span"==o)&&(e.outerHTML=e.textContent):n.forEach(t=>{"Text"!=t.constructor.name&&(t.outerHTML=t.innerText)})}})})}},function(t,e,n){"use strict";n.r(e),n.d(e,"openPop",(function(){return f})),n.d(e,"openLinkPop",(function(){return p})),n.d(e,"closeOptionPop",(function(){return m})),n.d(e,"openOptionPop",(function(){return v}));const{typeCheckThrow:o,classControl:i,isMobile:s,hasValueArrToArr:a}=n(0),{getElement:c,getChild:d,findParentByClass:l,findContenteditable:r}=n(1),{getTextItemOption:u}=n(5),{getItemType:g,itemStructureValidation:b}=n(8);function f(t,e,n=o(t,"string"),a=o(e,Node)){let c=e.getBoundingClientRect();switch(t){case"linkboxBlock":p("linkbox",c);break;case"emoticonBlock":!function(t,e=o(t,"object")){let n=condition.popEmoticon.getBoundingClientRect(),a=condition.windowWidth-t.right+(t.width+10),c=t.top;if(1==s()){let e=condition.windowWidth-n.width;c=t.top+t.height,a>e&&(a=e)}condition.popEmoticon.style.top=c+"px",condition.popEmoticon.style.right=a+"px",h(condition.popEmoticon),i(condition.popEmoticon,"toggle","--act")}(c);break;case"youtubeBlock":p("youtube",c);break;case"codepenBlock":p("codepen",c)}}function p(t,e={},n=o(t,"string"),a=o(e,"object")){let c=condition.popLinkbox.getBoundingClientRect(),l=d(condition.popLinkbox,".djs-input",!1),r=d(condition.popLinkbox,".djs-btn",!1),u=d(condition.popLinkbox,".djs-link",!1),g=condition.windowWidth-e.right+(e.width+10),b=e.top;if(1==s()){let t=condition.windowWidth-c.width;b=e.top+e.height,g>t&&(g=t)}if("word"==t){let e=condition.baseNode.parentNode;u.textContent=e.href,r.dataset.value=t,condition.popLinkbox.dataset.type="del",r.dataset.type=t,i(condition.popLinkbox,"add","--act")}else r.dataset.value=t,l.value="",condition.popLinkbox.style.top=b+"px",condition.popLinkbox.style.right=g+"px",h(condition.popLinkbox),i(condition.popLinkbox,"add","--act"),setTimeout(()=>{l.focus()},250)}function h(t,e=o(t,Node)){let n=c(".djs-trigger.--act");n.length>0&&n.forEach(e=>{e!==t&&i(e,"remove","--act")})}function m(t,e=o(t,Node)){let n=null!==l(t,"djs-option-pop"),s=null!==l(t,"djs-item"),a=l(t,"djs-add-block"),c=!1;if(null!=a){"block"==a.dataset.type&&(c=!0)}0==n&&0==s&&0==c&&i(condition.popOption,"remove","--act")}function v(){let t=condition.activeItem.getBoundingClientRect(),e=g(condition.activeItem,condition.activeElement),n=d(condition.popOption,".editor-col"),o=condition.popOption.getBoundingClientRect();!0!==s()&&(condition.popOption.style.top=t.top-o.height-10+"px",condition.popOption.style.left=t.left+"px"),n.forEach(t=>{let n=t.dataset.group.split(",");1==a(n,e)?i(t,"add","--act"):i(t,"remove","--act")}),function(){let t=l(condition.baseNode,"djs-item");if(null!=t){let e=t.dataset.type,n=r(condition.baseNode),o=u(condition.baseNode),s=c(".djs-fontsize .djs-text",!1),a=c(".djs-color",!1),d=c(".djs-list-style .djs-text",!1),l=c(".djs-code-lang .djs-text",!1);null==n&&(n=t);let g=u(n);if(""!=o.fontSize?s.textContent=o.fontSize:s.textContent=condition.defaultFontSize,""!=o.color?a.dataset.value=o.color:a.dataset.value=condition.defaultColor,""!=g.align?condition.btnAlign.forEach(t=>{t.dataset.value==g.align?i(t,"add","--act"):i(t,"remove","--act")}):i(condition.btnAlign,"remove","--act"),""!=o.bold?i(condition.btnToggleBold,"add","--act"):i(condition.btnToggleBold,"remove","--act"),""!=o.italic?i(condition.btnToggleItalic,"add","--act"):i(condition.btnToggleItalic,"remove","--act"),""!=o.underline?i(condition.btnToggleUnderline,"add","--act"):i(condition.btnToggleUnderline,"remove","--act"),"ol"==e){let e;condition.btnListType.forEach(n=>{n.dataset.value==t.dataset.style&&(e=n.textContent)}),d.textContent=e}if("codeblock"==e){let e=t.dataset.lang;l.textContent=e}""!=o.wordblock?i(condition.btnWordBlock,"add","--act"):i(condition.btnWordBlock,"remove","--act")}}(),i(condition.popOption,"add","--act"),b()}},function(t,e,n){t.exports=n(11)},function(t,e,n){(function(e){const{typeCheckThrow:o}=n(0),{storage:i}=n(13),{makeView:s,setEmoticonList:a,setMediaList:c}=n(2),{refreshScroll:d}=n(6),{setEvent:l,setEmoticonBtnEvent:r,setMediaEvent:u}=n(7);t.exports=class{constructor(t="",n={},a=o(t,"string"),c=o(n,"object")){return e.condition=new i(t,n),s(),condition.setElement(n),l(),this}setEmoticon(t,e=o(t,Array)){a(t),d(),r()}setMedia(t,e=o(t,Array)){c(t),d(),u()}}}).call(this,n(12))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"storage",(function(){return d}));const{typeCheckThrow:o,typeCheckBoolean:i}=n(0),{getElement:s,checkElement:a}=n(1),{message:c}=n(4);class d{constructor(t,e){this.wrap=a(t,".editor-dragon",!1),this.setMessage(e.message),this.setStatus(e)}setMessage(t={},e=o(t,Object)){let n=["apiNotWorking"];for(const[e,o]of Object.entries(t))n.indexOf(e)>-1?c[e]=o:console.warn(c.wrongKey("message",e))}setStatus(t){this.popOptionToClose=!0,this.log=[],this.linkBoxData={},this.langCategory=["en","ko"],this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.enterCount=0,this.startTextCursor=0,this.endTextCursor=0,this.activeItem=this.wrap,this.activeElement=this.wrap,this.focusNode,this.baseNode,this.focusOffset,this.baseOffset,this.regList={srcURL:new RegExp("(.*)\\.(jpg|png|gif|webp|bmp)","i"),defaultURL:new RegExp("https?:\\/\\/(\\w*:\\w*@)?[-\\w.]+(:\\d+)?(\\/([\\w\\/_.]*(\\?\\S+)?)?)?","i"),youtubeURL:new RegExp("(https:\\/\\/)?(www\\.)?youtu(be)?\\.(be|com)?","i"),youtubeCode:new RegExp("((https:\\/\\/)?(www\\.)?youtu(be)?\\.(be|com)\\/(embed\\/|watch\\?v=)?)([^=\\/& :]*)(.*)","i"),codepenURL:new RegExp("codepen.io","g"),codepenCode:new RegExp("(https:\\/\\/codepen\\.io\\/)(\\w*)\\/(pen|embed)\\/([A-Za-z]*)(.*)","i")},this.mode=i(t.mode,"string")?t.mode:"editor",this.multiLang=!i(t.multiLang,"boolean")||t.multiLang,this.defaultColor=i(t.defaultColor,"string")?t.defaultColor:"#333",this.defaultFontSize=i(t.defaultFontSize,"number")?t.defaultFontSize:16,this.changePint=i(t.changePint,"number")?t.changePint:800,this.maxImageWidth=i(t.maxImageWidth,"number")?t.maxImageWidth:700,this.maxCodepenHeight=i(t.maxCodepenHeight,"number")?t.maxCodepenHeight:1e3,this.useWebp=!i(t.useWebp,"boolean")||t.useWebp,this.codepenTheme=i(t.codepenTheme,"string")?t.codepenTheme:"dark",this.blockName=i(t.blockName,Object)?t.blockName:{},this.removeMenu=i(t.removeMenu,Array)?t.removeMenu:[],this.frontSize=i(t.frontSize,Array)?t.frontSize:[12,14,16,18,20,24,28,30,34,38],this.codeTheme=i(t.codeTheme,Array)?t.codeTheme:["default","vs2015","androidstudio","monokai"],this.codeLang=i(t.codeLang,Array)?t.codeLang:["text","css","html","xml","json","java","javascript","markdown","objective-c","php","python","sql","shell","kotlin","swift"],this.colorList=i(t.colorList,Array)?t.colorList:["#fff","#efefef","#ccc","#999","#777","#555","#333","#e6b8af","#dd7e6b","#cc4125","#980000","#a61c00","#85200c","#5b0f00","#f4cccc","#ea9999","#e06666","#ff0000","#cc0000","#990000","#660000","#fce5cd","#f9cb9c","#f6b36b","#ff9900","#e69138","#b45f06","#783f04","#fff2cc","#ffe599","#ffd966","#ffff00","#f1c232","#bf9000","#7f6000","#d9ead3","#b6d7a8","#93c47d","#00ff00","#6aa84f","#38761d","#274e13","#d0e0e3","#a2c4c9","#76a5af","#00ffff","#45818e","#134f5c","#0c343d","#c9daf8","#a4c2f4","#6d9eeb","#4a87e8","#3c78d8","#1156cc","#1c4587","#cfe2f3","#9fc5e8","#6fa8dc","#0000ff","#3d85c6","#0b5394","#073763","#d9d2e9","#b4a7d6","#8e7cc3","#9900ff","#674ea7","#351c75","#20124d","#ead1dc","#d5a6bd","#c27ba0","#ff00ff","#a64d79","#741b47","#4c1130"],this.addMenu=i(t.addMenu,Object)?t.addMenu:{},this.addLang=i(t.addLang,Array)?t.addLang:[],this.emoticonData=i(t.emoticonData,Array)?t.emoticonData:[],this.triggerLangChange=i(t.triggerLangChange,"function")?t.triggerLangChange:()=>{},this.multiUpload=!!i(t.multiUpload,"boolean")&&t.multiUpload,this.defaultLinkBoxImage=i(t.defaultLinkBoxImage,"string")?t.defaultLinkBoxImage:"https://via.placeholder.com/600x300.png",this.linkBoxApi=i(t.linkBoxApi,"string")?t.linkBoxApi:"",this.setUploadURL(t.uploadURL),this.setLang(t.lang),this.setContentData(),this.setBlockMenu(),this.addLanguage()}setUploadURL(t=""){""!=t?1==i(t,"string")&&(1==this.regList.defaultURL.test(t)||"/"==t.substr(0,1))?this.uploadURL=t:(console.warn(c.wrongURL("uploadURL",t)),this.uploadURL=""):this.uploadURL=""}setLang(t){if(1==i(t,"undefined"))this.lang=this.langCategory[0];else if(1==i(t,"string")){let e=this.langCategory.indexOf(t);e>-1?this.lang=this.langCategory[e]:(this.langCategory.unshift(t),this.lang=this.langCategory[0])}else console.warn(c.wrongValue("lang")),this.lang=this.langCategory[0]}setContentData(){let t={};this.langCategory.forEach(e=>{t[e]=[]}),this.contentData=t}setBlockMenu(){let t={textBlock:{text:"Text",icon:"#icon-text-block",type:"block"},imageBlock:{text:"Image",icon:"#icon-image-block",type:"file"},ulBlock:{text:"Unnumbered list",icon:"#icon-ul-block",type:"block"},olBlock:{text:"Numbered list",icon:"#icon-ol-block",type:"block"},quotaionBlock:{text:"Quotaion",icon:"#icon-quotaion-block",type:"block"},tableBlock:{text:"Table",icon:"#icon-table-block",type:"block"},linkboxBlock:{text:"Link box",icon:"#icon-linkbox-block",type:"pop"},emoticonBlock:{text:"Emoticon",icon:"#icon-emoticon-block",type:"pop"},youtubeBlock:{text:"Youtube",icon:"#icon-youtube-block",type:"pop"},codepenBlock:{text:"Codepen",icon:"#icon-codepen-block",type:"pop"},codeBlock:{text:"Code",icon:"#icon-code-block",type:"block"}};for(const[e,n]of Object.entries(this.blockName))1==i(n,"string")&&(t[e].text=n);delete this.blockName,""==this.uploadURL&&delete t.imageBlock,this.removeMenu.forEach(e=>{delete t[e]}),delete this.removeMenu;for(const[e,n]of Object.entries(this.addMenu))t[e]={text:n.text,icon:n.icon,fn:n.fn};delete this.addMenu,this.defaultMenu=t}addLanguage(){let t=[];this.addLang.forEach(e=>{i(e,"string")&&2==e.length&&t.push(e)}),this.langCategory=[...new Set(this.langCategory.concat(t))],delete this.addLang}setElement(t){this.scrollArea=s(".djs-scroll"),this.btnToggleTarget=s(".djs-toggle-target"),this.btnAddBlock=s(".djs-add-block"),this.areaContent=s(".djs-content",!1),this.uploadForm=s(".djs-uploader",!1),this.uploadInput=s(".djs-uploader .djs-file",!1),this.popEmoticon=s(".djs-emoticon-pop",!1),this.popFolder=s(".djs-folder-pop",!1),this.popLinkbox=s(".djs-linkbox-pop",!1),this.btnLinkbox=s(".djs-linkbox-pop .djs-btn",!1),this.listEmoticon=s(".djs-list-emoticon",!1),this.listMedia=s(".djs-list-media",!1),this.popOption=s(".djs-option-pop",!1),this.btnSwitchDevice=a(t.btnSwitchDevice,".djs-switch-device",!1),this.btnChangeLang=a(t.btnChangeLang,".djs-change-lang"),this.btnFontSize=s(".djs-change-fontsize"),this.btnColor=s(".djs-change-color"),this.btnAlign=s(".djs-change-align"),this.btnToggleBold=s(".djs-toggle-bold",!1),this.btnToggleItalic=s(".djs-toggle-italic",!1),this.btnToggleUnderline=s(".djs-toggle-underline",!1),this.btnToggleStrikethrough=s(".djs-toggle-strikethrough",!1),this.btnListType=s(".djs-set-list-type"),this.btnTableHeader=s(".djs-table-header",!1),this.btnTableBody=s(".djs-table-body",!1),this.btnThemeSet=s(".djs-set-theme"),this.btnLangSet=s(".djs-set-lang"),this.btnItemMobeUp=s(".djs-move-up",!1),this.btnItemMobeDown=s(".djs-move-down",!1),this.btnWordBlock=s(".djs-word-block",!1),this.btnWordLink=s(".djs-open-linkbox",!1),this.btnItemDelete=s(".djs-delete-block",!1)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"jsonToHtml",(function(){return a})),n.d(e,"htmlToJson",(function(){return c}));const{typeCheckThrow:o}=n(0),{getTextItemOption:i}=n(5),{getChild:s}=n(1);function a(t){let e="";return t.forEach((function(t){switch(t.type){case"title":e+=`<h1 class="${t.class.join(" ")}" contenteditable="true" data-type="${t.type}">${t.textContent}</h1>`;break;case"text":e+=`<p class="${t.class.join(" ")}" contenteditable="true" data-type="${t.type}">${t.textContent}</p>`;break;case"image":!0===storage.useWebp?(e+=`<picture class="${t.class.join(" ")}" data-type="${t.type}">`,!0===t.hasWebp&&(e+=`<source srcset="${t.src}.webp" type="image/webp">`),e+=`<img src="${t.src}.${t.defaultFormat}" width="${t.size}" alt="${t.alt}" class="img"></picture>`):e+=`<div class="${t.class.join(" ")}" data-type="image"><img src="${t.src}.${t.defaultFormat}" width="${t.size}" alt="${t.alt}" class="img"></div>`;break;case"btn":"image"===t.value?(e+=`<div class="btn" data-type="${t.type}" data-value="${t.value}">`,"svg"===t.icon.type?e+=`<svg viewBox="${t.icon.viewBox}" class="${t.icon.class.join(" ")}"><use class="path" xlink:href="${t.icon.url}" href="${t.icon.url}"></use></svg>`:e+=`<img src="${t.icon.url}" alt="image icon" class="">`,e+=t.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")+"</div>"):"youtube"===t.value?(e+=`<div class="btn" data-type="${t.type}" data-value="${t.value}">`,"svg"===t.icon.type?e+=`<svg viewBox="${t.icon.viewBox}" class="${t.icon.class.join(" ")}"><use class="path" xlink:href="${t.icon.url}" href="${t.icon.url}"></use></svg>`:e+=`<img src="${t.icon.url}" alt="youtube icon" class="">`,e+=t.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")+"</div>"):"codepen"===t.value&&(e+=`<div class="btn" data-type="${t.type}" data-value="${t.value}">`,"svg"===t.icon.type?e+=`<svg viewBox="${t.icon.viewBox}" class="${t.icon.class.join(" ")}"><use class="path" xlink:href="${t.icon.url}" href="${t.icon.url}"></use></svg>`:e+=`<img src="${t.icon.url}" alt="codepen icon" class="">`,e+=t.textContent.replace(/\n/i,"").replace(/^\s*/i,"").replace(/\s*$/i,"")+"</div>");break;case"youtube":e+=`<div class="${t.class.join(" ")}" data-type="${t.type}"><iframe src="${t.src}" allow="${t.allow}" allowfullscreen="" class="video"></iframe></div>`;break;case"codepen":e+=`<div class="${t.class.join(" ")}" data-type="${t.type}"><iframe height="${t.height}" title="" src="${t.src}" allowfullscreen="" class="iframe"></iframe></div>`;break;case"list":let n="";"ol"===t.tag?n="list_o":"ul"===t.tag&&(n="list_u"),null===t.listType?e+=`<${t.tag} class="${t.class.join(" ")}" data-type="${n}">`:e+=`<${t.tag} type="${t.listType}" class="${t.class.join(" ")}" data-type="${n}">`,t.child.forEach((function(t){t.class.length>0?e+=`<li class="${t.class.join(" ")}" contenteditable="true">${t.textContent}</li>`:e+=`<li contenteditable="true">${t.textContent}</li>`})),e+=`</${t.tag}>`;break;case"quote":e+=`<blockquote class="${t.class.join(" ")}" data-type="${t.type}"><p class="text" contenteditable="true">${t.text}</p><p class="author" contenteditable="true">${t.author}</p></blockquote>`;break;case"table":let o=0;e+=`<div class="${t.class.join(" ")}" data-type="${t.type}"><div class="scroll"><table class="item_table"><caption contenteditable="true">${t.caption}</caption><colgroup>`,t.colgroup.forEach((function(t){e+=`<col class="${t}">`})),e+="</colgroup><tbody>",t.child.forEach((function(t){let n=0;e+="<tr>",t.forEach((function(t){t.class.length>0?e+=`<${t.tag} class="${t.class.join(" ")}" contenteditable="true" data-x="${n}" data-y="${o}">${t.textContent}</${t.tag}>`:e+=`<${t.tag} contenteditable="true" data-x="${n}" data-y="${o}">${t.textContent}</${t.tag}>`,n+=1})),e+="</tr>",o+=1})),e+='</tbody></table></div><button class="btn btn_col_add">Add col</button><button class="btn btn_col_del">Remove col</button><button class="btn btn_row_add">Add row</button><button class="btn btn_row_del">Remove row</button></div>';break;case"codeblock":e+=`<pre class="${t.class.join(" ")}" data-type="${t.type}" data-theme="${t.theme}" data-lang="${t.lang}"><code class="${t.code.class.join(" ")}" contenteditable="true">${t.code.innerHTML}</code></pre>`;break;case"link_box":e+=`<div class="${t.class.join(" ")}" data-type="${t.type}"><a href="${t.url}" target="_blank" class="link_box clearfix" draggable="false"><div class="img_area"><img src="${t.imgSrc}" alt="미리보기 이미지" class="img" draggable="false"></div><div class="text_area"><p class="link_title ellipsis">${t.title}</p><p class="link_description ellipsis">${t.description}</p><p class="link_domain">${t.domain}</p></div></a></div>`;break;default:e+=t.other}})),e}function c(t,e=o(t,NodeList)){let n=[];return t.forEach(t=>{switch(t.dataset.type){case"text":n.push({type:"text",option:i(t),textContent:t.innerHTML});break;case"image":let e="true"==t.dataset.webp,o=s(t,".djs-img",!1),a=o.getAttribute("src");n.push({type:"image",hasWebp:e,width:o.getAttribute("width"),height:o.dataset.height,alt:o.getAttribute("alt"),src:a.replace(condition.regList.srcURL,"$1"),defaultFormat:a.replace(condition.regList.srcURL,"$2")});break;case"ul":let c=[];s(t,'*[contenteditable="true"]').forEach(t=>{c.push({option:i(t),textContent:t.innerHTML})}),n.push({type:"ul",child:c});break;case"ol":let d=[];s(t,'*[contenteditable="true"]').forEach(t=>{d.push({option:i(t),textContent:t.innerHTML})}),n.push({type:"ol",style:t.dataset.style,child:d});break;case"quote":n.push({type:"quote",text:s(t,".djs-text",!1).textContent,author:s(t,".djs-author",!1).textContent});break;case"table":let l=[],r=[],u=s(t,"col"),g=s(t,"tbody tr");u.forEach(t=>{l.push(t.dataset.size)}),g.forEach(t=>{let e=[];s(t,'*[contenteditable="true"]').forEach(t=>{e.push({tag:t.tagName.toLowerCase(),optoin:i(t),textContent:t.innerHTML})}),r.push(e)}),n.push({type:"table",caption:s(t,".djs-caption",!1).textContent,colgroup:l,body:r});break;case"linkbox":n.push({type:"linkbox",url:s(t,".djs-linkbox",!1).getAttribute("href"),imgSrc:s(t,".djs-img",!1).getAttribute("src"),title:s(t,".djs-title",!1).textContent,description:s(t,".djs-description",!1).textContent,domain:s(t,".djs-domain",!1).textContent});break;case"emoticon":n.push({type:"emoticon",code:t.innerHTML});break;case"youtube":n.push({type:"youtube",src:s(t,".djs-iframe",!1).getAttribute("src")});break;case"codepen":n.push({type:"codepen",nickname:s(t,".djs-iframe",!1).dataset.nickname,code:s(t,".djs-iframe",!1).dataset.code,height:s(t,".djs-iframe",!1).getAttribute("height")});break;case"codeblock":n.push({type:"codeblock",theme:t.dataset.theme,lang:t.dataset.lang,code:s(t,".djs-code",!1).innerHTML});break;default:n.push({type:"other",other:t.innerHTML})}}),n}},function(t,e,n){"use strict";n.r(e),n.d(e,"contentEnterKeyEvent",(function(){return r}));const{typeCheckThrow:o}=n(0),{isTextSelect:i,setCursor:s}=n(3),{getChild:a}=n(1),{getTextBlockHTML:c,getListChildHTML:d,addBlockToContent:l}=n(2);function r(t,e,n,r,g=o(t,Node),b=o(e,Node),f=o(n,"boolean")){if(0==n&&0==condition.enterCount){r.preventDefault();let n=t.dataset.type;if(condition.enterCount+=1,1==i());else{let o=e.childNodes,i=o.length;s(condition.baseNode,condition.baseOffset),setTimeout(()=>{if("text"==n)if(i>0){let e=o[i-1],n=e.textContent.length;if(condition.baseNode==e&&condition.baseOffset==n)t.insertAdjacentHTML("afterend",c()),s(t.nextElementSibling,0);else if(condition.baseNode==o[0]&&0==condition.baseOffset)t.insertAdjacentHTML("beforebegin",c());else{let e=u(o,i);t.innerHTML=e.beforeHTML,t.childNodes[e.childNumber].textContent=e.beforeText,t.insertAdjacentHTML("afterend",c(e.afterHTML)),t.nextElementSibling.childNodes[0].textContent=e.afterText,s(t.nextElementSibling.childNodes[0],0)}}else t.insertAdjacentHTML("afterend",c()),s(t.nextElementSibling,0);else if("ol"==n||"ul"==n)if(i>0){let t=o[i-1],n=t.textContent.length;if(condition.baseNode==t&&condition.baseOffset==n)e.insertAdjacentHTML("afterend",d()),s(e.nextElementSibling,0);else if(condition.baseNode==o[0]&&0==condition.baseOffset)e.insertAdjacentHTML("beforebegin",d());else{let t=u(o,i);e.innerHTML=t.beforeHTML,e.childNodes[t.childNumber].textContent=t.beforeText,e.insertAdjacentHTML("afterend",d(t.afterHTML)),e.nextElementSibling.childNodes[0].textContent=t.afterText,s(e.nextElementSibling.childNodes[0],0)}}else{let n=a(t,'[contenteditable="true"]'),o=n.length;if(o>1){let t=!1;n.forEach((n,i)=>{n==e&&i==o-1&&(t=!0)}),1==t?(e.remove(),l(c())):(e.insertAdjacentHTML("afterend",d()),s(e.nextElementSibling,0))}else e.insertAdjacentHTML("afterend",d()),s(e.nextElementSibling,0)}else if("table"==n){if("HTMLTableCaptionElement"==e.constructor.name){let e=a(t,'*[data-x="0"][data-y="0"]',!1),n=e.childNodes.length>0;s(1==n?e.childNodes[0]:e,0)}else{let n=parseInt(e.dataset.x),o=parseInt(e.dataset.y)+1,i=a(t,`*[data-x="${n}"][data-y="${o}"]`,!1);if(null!=i){let t=i.childNodes.length>0;s(1==t?i.childNodes[0]:i,0)}else t.insertAdjacentHTML("afterend",c()),s(t.nextElementSibling,0)}}else t.insertAdjacentHTML("afterend",c()),s(t.nextElementSibling,0)},50)}setTimeout(()=>{condition.enterCount=0},150)}else 0!=condition.enterCount&&r.preventDefault()}function u(t,e,n=o(t,NodeList),i=o(e,"number")){let s,a,c,d=-1,l="",r="";for(let n=0;n<e;n+=1)if(t[n]==condition.baseNode){d=n;break}if(d<0)for(let n=0;n<e;n+=1)if(t[n]==condition.baseNode.parentNode){d=n;break}s=t[d],c=s.constructor.name,a=s.textContent,r+="Text"==c?s.textContent:s.outerHTML;for(let n=0;n<e;n+=1){let e=t[n].constructor.name;n>d?r+="Text"==e?t[n].textContent:t[n].outerHTML:n<d&&(l+="Text"==e?t[n].textContent:t[n].outerHTML)}return l+="Text"==c?s.textContent:s.outerHTML,{beforeHTML:l,afterHTML:r,beforeText:a.substring(0,condition.baseOffset),afterText:a.substring(condition.baseOffset,a.length),childNumber:d}}},function(t,e,n){"use strict";function o(t){console.log(t)}n.r(e),n.d(e,"openFile",(function(){return o}))}])}));